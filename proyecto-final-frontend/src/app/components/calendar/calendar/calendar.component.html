<main class="centrar">
    <div class="box-calendar">
        <h2>Calendario Escolar</h2>
        <div class="container">
            <div class="row">
                <div class="col-xl-6">

                    <button type="button" (click)="login()"
                        *ngIf="sessionStorage.getItem('rol')=='administrador/a'">01 login</button>
                    <button type="button" (click)="token()"
                        *ngIf="sessionStorage.getItem('rol')=='administrador/a'">02 Token</button>
                    <button type="button" (click)="verEventos()"
                        *ngIf="sessionStorage.getItem('rol')=='administrador/a'">03 Eventos</button>

                    <form class="form" #calendarForm="ngForm" *ngIf="sessionStorage.getItem('rol')=='administrador/a'">
                        <div>
                            <div class="row">
                                <label for="my-input">Titulo del Evento: </label>
                                <div class="col-sm-10">
                                    <input id="sumary" class="form-control" type="text" [(ngModel)]="event.summary"
                                        name="sumary" required #sumary="ngModel">
                                </div>

                                <div *ngIf="sumary.invalid && (sumary.dirty || sumary.touched)" class="alerta-danger">
                                    <div *ngIf="sumary.errors?.['required']">
                                        El campo titulo es requerido
                                    </div>
                                </div>
                            </div>

                            <div>
                                <label for="my-input">Descripcion: </label>
                                <div>
                                    <input id="description" class="form-control" type="text"
                                        [(ngModel)]="event.description" name="description" required
                                        #description="ngModel">
                                </div>

                                <div *ngIf="description.invalid && (description.dirty || description.touched)"
                                    class="alerta-danger">
                                    <div *ngIf="description.errors?.['required']">
                                        El campo Descripcion es requerido
                                    </div>
                                </div>
                            </div>

                            <div>
                                <label for="my-input">Fecha desde: </label>
                                <div>
                                    <input id="from" class="form-control" type="datetime-local" [(ngModel)]="fromDate"
                                        name="from" required #from="ngModel">
                                </div>

                                <div *ngIf="from.invalid && (from.dirty || from.touched)" class="alerta-danger">
                                    <div *ngIf="from.errors?.['required']">
                                        El campo es requerido
                                    </div>
                                </div>
                            </div>

                            <div>
                                <label for="my-input">Fecha hasta: </label>
                                <div>
                                    <input id="to" class="form-control" type="datetime-local" [(ngModel)]="toDate"
                                        name="to" required #to="ngModel">
                                </div>

                                <div *ngIf="to.invalid && (to.dirty || to.touched)" class="alerta-danger">
                                    <div *ngIf="to.errors?.['required']">
                                        El campo es requerido
                                    </div>
                                </div>
                            </div>



                        </div>
                        <button [disabled]="!calendarForm.form.valid" type="button" class="ov-btn-grow-skew"
                            (click)="crearEvento()">04 Crear Evento</button>
                        <button type="button" class="ov-btn-grow-skew" (click)="logout()">05 logout</button>
                    </form>
                </div>

                <div class="col-xl-6">
                    <div class="row" style="margin: 10px;">
                        <div class="col-12">
                            <div class="task" draggable="true">
                                <div class="tags">
                                    <iframe
                                        src="https://calendar.google.com/calendar/embed?height=600&wkst=1&bgcolor=%23c4f897&ctz=America%2FArgentina%2FJujuy&showTitle=1&title=Calendario%20Escuela%20General%20Savio%20N%C2%B0119&mode=MONTH&showCalendars=1&showTabs=1&showPrint=1&src=ZXNjdWVsYWdlbmVyYWxzYXZpbzExOUBnbWFpbC5jb20&src=NTg1YTVmZTFkODEzMTZhZDZjYzY4ODgwYjFlODhmYmExYjAzOGUxMTY3YTg3YjgzMGMyNGIzODEzNGQwYjA1MEBncm91cC5jYWxlbmRhci5nb29nbGUuY29t&color=%23039BE5&color=%23F6BF26"
                                        style="border:solid 1px rgb(122, 255, 109)" class="calendario" frameborder="0"
                                        scrolling="no"></iframe>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="accordion" id="accordionPanelsStayOpenExample">
                                <div class="accordion-item">
                                    <h2 class="accordion-header">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#collapseOne" aria-expanded="false"
                                            aria-controls="collapseOne" (click)="getEventos()">
                                            Ver los Eventos del Calendario
                                        </button>
                                    </h2>
                                    <div id="collapseOne" class="accordion-collapse collapse"
                                        data-bs-parent="#accordionExample">
                                        <div class="accordion-body">
                                            <div class="row bg-white">
                                                <div class="table-responsive">
                                                    <table class="table table-striped table-hover table-bordered">
                                                        <thead class="table-primary titulo">
                                                            <tr class="text-center">
                                                                <th scope="col" class="text-center">Motivo</th>
                                                                <th scope="col" class="text-center">Descripcion</th>
                                                                <th scope="col" class="text-center">El recordatorio
                                                                    Inicia
                                                                </th>
                                                                <th scope="col" class="text-center">El recordatorio
                                                                    Finaliza
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let r of resultados">
                                                                <td>{{r.summary}}</td>
                                                                <td>{{r.description}}</td>
                                                                <td>{{r.start.dateTime | date:"medium" }}</td>
                                                                <td>{{r.end.dateTime | date:"medium" }}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>





            </div>
        </div>
    </div>


</main>