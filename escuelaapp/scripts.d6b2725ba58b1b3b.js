(function(On,$n){"object"==typeof exports&&typeof module<"u"?module.exports=$n():"function"==typeof define&&define.amd?define($n):(On=typeof globalThis<"u"?globalThis:On||self).bootstrap=$n()})(this,function(){"use strict";const On=new Map,$n={set(x,m,y){On.has(x)||On.set(x,new Map);const S=On.get(x);S.has(m)||0===S.size?S.set(m,y):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(S.keys())[0]}.`)},get:(x,m)=>On.has(x)&&On.get(x).get(m)||null,remove(x,m){if(!On.has(x))return;const y=On.get(x);y.delete(m),0===y.size&&On.delete(x)}},Ta="transitionend",Ra=x=>(x&&window.CSS&&window.CSS.escape&&(x=x.replace(/#([^\s"#']+)/g,(m,y)=>`#${CSS.escape(y)}`)),x),Da=x=>{x.dispatchEvent(new Event(Ta))},qn=x=>!(!x||"object"!=typeof x)&&(void 0!==x.jquery&&(x=x[0]),void 0!==x.nodeType),Ho=x=>qn(x)?x.jquery?x[0]:x:"string"==typeof x&&x.length>0?document.querySelector(Ra(x)):null,gr=x=>{if(!qn(x)||0===x.getClientRects().length)return!1;const m="visible"===getComputedStyle(x).getPropertyValue("visibility"),y=x.closest("details:not([open])");if(!y)return m;if(y!==x){const S=x.closest("summary");if(S&&S.parentNode!==y||null===S)return!1}return m},io=x=>!x||x.nodeType!==Node.ELEMENT_NODE||!!x.classList.contains("disabled")||(void 0!==x.disabled?x.disabled:x.hasAttribute("disabled")&&"false"!==x.getAttribute("disabled")),xi=x=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof x.getRootNode){const m=x.getRootNode();return m instanceof ShadowRoot?m:null}return x instanceof ShadowRoot?x:x.parentNode?xi(x.parentNode):null},Cs=()=>{},bt=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ae=[],yn=()=>"rtl"===document.documentElement.dir,Gt=x=>{var m;m=()=>{const y=bt();if(y){const S=x.NAME,j=y.fn[S];y.fn[S]=x.jQueryInterface,y.fn[S].Constructor=x,y.fn[S].noConflict=()=>(y.fn[S]=j,x.jQueryInterface)}},"loading"===document.readyState?(Ae.length||document.addEventListener("DOMContentLoaded",()=>{for(const y of Ae)y()}),Ae.push(m)):m()},le=(x,m=[],y=x)=>"function"==typeof x?x(...m):y,qo=(x,m,y=!0)=>{if(!y)return void le(x);const S=(Y=>{if(!Y)return 0;let{transitionDuration:J,transitionDelay:mt}=window.getComputedStyle(Y);const wt=Number.parseFloat(J),yt=Number.parseFloat(mt);return wt||yt?(J=J.split(",")[0],mt=mt.split(",")[0],1e3*(Number.parseFloat(J)+Number.parseFloat(mt))):0})(m)+5;let j=!1;const A=({target:Y})=>{Y===m&&(j=!0,m.removeEventListener(Ta,A),le(x))};m.addEventListener(Ta,A),setTimeout(()=>{j||Da(m)},S)},we=(x,m,y,S)=>{const j=x.length;let A=x.indexOf(m);return-1===A?!y&&S?x[j-1]:x[0]:(A+=y?1:-1,S&&(A=(A+j)%j),x[Math.max(0,Math.min(A,j-1))])},ve=/[^.]*(?=\..*)\.|.*/,et=/\..*/,Vt=/::\d+$/,_n={};let pr=1;const Bt={mouseenter:"mouseover",mouseleave:"mouseout"},hr=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ba(x,m){return m&&`${m}::${pr++}`||x.uidEvent||pr++}function ot(x){const m=Ba(x);return x.uidEvent=m,_n[m]=_n[m]||{},_n[m]}function He(x,m,y=null){return Object.values(x).find(S=>S.callable===m&&S.delegationSelector===y)}function mc(x,m,y){const S="string"==typeof m,j=S?y:m||y;let A=Ei(x);return hr.has(A)||(A=x),[S,j,A]}function dt(x,m,y,S,j){if("string"!=typeof m||!x)return;let[A,Y,J]=mc(m,y,S);var U;m in Bt&&(U=Y,Y=function(Pt){if(!Pt.relatedTarget||Pt.relatedTarget!==Pt.delegateTarget&&!Pt.delegateTarget.contains(Pt.relatedTarget))return U.call(this,Pt)});const mt=ot(x),wt=mt[J]||(mt[J]={}),yt=He(wt,Y,A?y:null);if(yt)return void(yt.oneOff=yt.oneOff&&j);const pt=Ba(Y,m.replace(ve,"")),Ut=A?function(Lt,U,Pt){return function Ft(Kt){const oe=Lt.querySelectorAll(U);for(let{target:qt}=Kt;qt&&qt!==this;qt=qt.parentNode)for(const Dt of oe)if(Dt===qt)return ne(Kt,{delegateTarget:qt}),Ft.oneOff&&nt.off(Lt,Kt.type,U,Pt),Pt.apply(qt,[Kt])}}(x,y,Y):function(Lt,U){return function Pt(Ft){return ne(Ft,{delegateTarget:Lt}),Pt.oneOff&&nt.off(Lt,Ft.type,U),U.apply(Lt,[Ft])}}(x,Y);Ut.delegationSelector=A?y:null,Ut.callable=Y,Ut.oneOff=j,Ut.uidEvent=pt,wt[pt]=Ut,x.addEventListener(J,Ut,A)}function zr(x,m,y,S,j){const A=He(m[y],S,j);A&&(x.removeEventListener(y,A,Boolean(j)),delete m[y][A.uidEvent])}function fc(x,m,y,S){const j=m[y]||{};for(const[A,Y]of Object.entries(j))A.includes(S)&&zr(x,m,y,Y.callable,Y.delegationSelector)}function Ei(x){return x=x.replace(et,""),Bt[x]||x}const nt={on(x,m,y,S){dt(x,m,y,S,!1)},one(x,m,y,S){dt(x,m,y,S,!0)},off(x,m,y,S){if("string"!=typeof m||!x)return;const[j,A,Y]=mc(m,y,S),J=Y!==m,mt=ot(x),wt=mt[Y]||{},yt=m.startsWith(".");if(void 0===A){if(yt)for(const pt of Object.keys(mt))fc(x,mt,pt,m.slice(1));for(const[pt,Ut]of Object.entries(wt)){const Lt=pt.replace(Vt,"");J&&!m.includes(Lt)||zr(x,mt,Y,Ut.callable,Ut.delegationSelector)}}else{if(!Object.keys(wt).length)return;zr(x,mt,Y,A,j?y:null)}},trigger(x,m,y){if("string"!=typeof m||!x)return null;const S=bt();let j=null,A=!0,Y=!0,J=!1;m!==Ei(m)&&S&&(j=S.Event(m,y),S(x).trigger(j),A=!j.isPropagationStopped(),Y=!j.isImmediatePropagationStopped(),J=j.isDefaultPrevented());const mt=ne(new Event(m,{bubbles:A,cancelable:!0}),y);return J&&mt.preventDefault(),Y&&x.dispatchEvent(mt),mt.defaultPrevented&&j&&j.preventDefault(),mt}};function ne(x,m={}){for(const[y,S]of Object.entries(m))try{x[y]=S}catch{Object.defineProperty(x,y,{configurable:!0,get:()=>S})}return x}function ge(x){if("true"===x)return!0;if("false"===x)return!1;if(x===Number(x).toString())return Number(x);if(""===x||"null"===x)return null;if("string"!=typeof x)return x;try{return JSON.parse(decodeURIComponent(x))}catch{return x}}function w(x){return x.replace(/[A-Z]/g,m=>`-${m.toLowerCase()}`)}const Vn={setDataAttribute(x,m,y){x.setAttribute(`data-bs-${w(m)}`,y)},removeDataAttribute(x,m){x.removeAttribute(`data-bs-${w(m)}`)},getDataAttributes(x){if(!x)return{};const m={},y=Object.keys(x.dataset).filter(S=>S.startsWith("bs")&&!S.startsWith("bsConfig"));for(const S of y){let j=S.replace(/^bs/,"");j=j.charAt(0).toLowerCase()+j.slice(1,j.length),m[j]=ge(x.dataset[S])}return m},getDataAttribute:(x,m)=>ge(x.getAttribute(`data-bs-${w(m)}`))};class ws{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(m){return m=this._mergeConfigObj(m),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}_configAfterMerge(m){return m}_mergeConfigObj(m,y){const S=qn(y)?Vn.getDataAttribute(y,"config"):{};return{...this.constructor.Default,..."object"==typeof S?S:{},...qn(y)?Vn.getDataAttributes(y):{},..."object"==typeof m?m:{}}}_typeCheckConfig(m,y=this.constructor.DefaultType){for(const[j,A]of Object.entries(y)){const Y=m[j],J=qn(Y)?"element":null==(S=Y)?`${S}`:Object.prototype.toString.call(S).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(A).test(J))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${j}" provided type "${J}" but expected type "${A}".`)}var S}}class Wn extends ws{constructor(m,y){super(),(m=Ho(m))&&(this._element=m,this._config=this._getConfig(y),$n.set(this._element,this.constructor.DATA_KEY,this))}dispose(){$n.remove(this._element,this.constructor.DATA_KEY),nt.off(this._element,this.constructor.EVENT_KEY);for(const m of Object.getOwnPropertyNames(this))this[m]=null}_queueCallback(m,y,S=!0){qo(m,y,S)}_getConfig(m){return m=this._mergeConfigObj(m,this._element),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}static getInstance(m){return $n.get(Ho(m),this.DATA_KEY)}static getOrCreateInstance(m,y={}){return this.getInstance(m)||new this(m,"object"==typeof y?y:null)}static get VERSION(){return"5.3.0-alpha2"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(m){return`${m}${this.EVENT_KEY}`}}const ki=x=>{let m=x.getAttribute("data-bs-target");if(!m||"#"===m){let y=x.getAttribute("href");if(!y||!y.includes("#")&&!y.startsWith("."))return null;y.includes("#")&&!y.startsWith("#")&&(y=`#${y.split("#")[1]}`),m=y&&"#"!==y?y.trim():null}return Ra(m)},ut={find:(x,m=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(m,x)),findOne:(x,m=document.documentElement)=>Element.prototype.querySelector.call(m,x),children:(x,m)=>[].concat(...x.children).filter(y=>y.matches(m)),parents(x,m){const y=[];let S=x.parentNode.closest(m);for(;S;)y.push(S),S=S.parentNode.closest(m);return y},prev(x,m){let y=x.previousElementSibling;for(;y;){if(y.matches(m))return[y];y=y.previousElementSibling}return[]},next(x,m){let y=x.nextElementSibling;for(;y;){if(y.matches(m))return[y];y=y.nextElementSibling}return[]},focusableChildren(x){const m=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(y=>`${y}:not([tabindex^="-"])`).join(",");return this.find(m,x).filter(y=>!io(y)&&gr(y))},getSelectorFromElement(x){const m=ki(x);return m&&ut.findOne(m)?m:null},getElementFromSelector(x){const m=ki(x);return m?ut.findOne(m):null},getMultipleElementsFromSelector(x){const m=ki(x);return m?ut.find(m):[]}},ce=(x,m="hide")=>{const S=x.NAME;nt.on(document,`click.dismiss${x.EVENT_KEY}`,`[data-bs-dismiss="${S}"]`,function(j){if(["A","AREA"].includes(this.tagName)&&j.preventDefault(),io(this))return;const A=ut.getElementFromSelector(this)||this.closest(`.${S}`);x.getOrCreateInstance(A)[m]()})};class jt extends Wn{static get NAME(){return"alert"}close(){if(nt.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const m=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,m)}_destroyElement(){this._element.remove(),nt.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(m){return this.each(function(){const y=jt.getOrCreateInstance(this);if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m](this)}})}}ce(jt,"close"),Gt(jt);const X='[data-bs-toggle="button"]';class Ur extends Wn{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(m){return this.each(function(){const y=Ur.getOrCreateInstance(this);"toggle"===m&&y[m]()})}}nt.on(document,"click.bs.button.data-api",X,x=>{x.preventDefault();const m=x.target.closest(X);Ur.getOrCreateInstance(m).toggle()}),Gt(Ur);const xs={endCallback:null,leftCallback:null,rightCallback:null},Et={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Vo extends ws{constructor(m,y){super(),this._element=m,m&&Vo.isSupported()&&(this._config=this._getConfig(y),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return xs}static get DefaultType(){return Et}static get NAME(){return"swipe"}dispose(){nt.off(this._element,".bs.swipe")}_start(m){this._supportPointerEvents?this._eventIsPointerPenTouch(m)&&(this._deltaX=m.clientX):this._deltaX=m.touches[0].clientX}_end(m){this._eventIsPointerPenTouch(m)&&(this._deltaX=m.clientX-this._deltaX),this._handleSwipe(),le(this._config.endCallback)}_move(m){this._deltaX=m.touches&&m.touches.length>1?0:m.touches[0].clientX-this._deltaX}_handleSwipe(){const m=Math.abs(this._deltaX);if(m<=40)return;const y=m/this._deltaX;this._deltaX=0,y&&le(y>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(nt.on(this._element,"pointerdown.bs.swipe",m=>this._start(m)),nt.on(this._element,"pointerup.bs.swipe",m=>this._end(m)),this._element.classList.add("pointer-event")):(nt.on(this._element,"touchstart.bs.swipe",m=>this._start(m)),nt.on(this._element,"touchmove.bs.swipe",m=>this._move(m)),nt.on(this._element,"touchend.bs.swipe",m=>this._end(m)))}_eventIsPointerPenTouch(m){return this._supportPointerEvents&&("pen"===m.pointerType||"touch"===m.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Me="next",br="prev",de="left",Wo="right",Si="slid.bs.carousel",Kn="carousel",Yn="active",Es={ArrowLeft:Wo,ArrowRight:de},Ni={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},La={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Tn extends Wn{constructor(m,y){super(m,y),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ut.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Kn&&this.cycle()}static get Default(){return Ni}static get DefaultType(){return La}static get NAME(){return"carousel"}next(){this._slide(Me)}nextWhenVisible(){!document.hidden&&gr(this._element)&&this.next()}prev(){this._slide(br)}pause(){this._isSliding&&Da(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?nt.one(this._element,Si,()=>this.cycle()):this.cycle())}to(m){const y=this._getItems();if(m>y.length-1||m<0)return;if(this._isSliding)return void nt.one(this._element,Si,()=>this.to(m));const S=this._getItemIndex(this._getActive());S!==m&&this._slide(m>S?Me:br,y[m])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(m){return m.defaultInterval=m.interval,m}_addEventListeners(){this._config.keyboard&&nt.on(this._element,"keydown.bs.carousel",m=>this._keydown(m)),"hover"===this._config.pause&&(nt.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),nt.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&Vo.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const y of ut.find(".carousel-item img",this._element))nt.on(y,"dragstart.bs.carousel",S=>S.preventDefault());this._swipeHelper=new Vo(this._element,{leftCallback:()=>this._slide(this._directionToOrder(de)),rightCallback:()=>this._slide(this._directionToOrder(Wo)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(m){if(/input|textarea/i.test(m.target.tagName))return;const y=Es[m.key];y&&(m.preventDefault(),this._slide(this._directionToOrder(y)))}_getItemIndex(m){return this._getItems().indexOf(m)}_setActiveIndicatorElement(m){if(!this._indicatorsElement)return;const y=ut.findOne(".active",this._indicatorsElement);y.classList.remove(Yn),y.removeAttribute("aria-current");const S=ut.findOne(`[data-bs-slide-to="${m}"]`,this._indicatorsElement);S&&(S.classList.add(Yn),S.setAttribute("aria-current","true"))}_updateInterval(){const m=this._activeElement||this._getActive();if(!m)return;const y=Number.parseInt(m.getAttribute("data-bs-interval"),10);this._config.interval=y||this._config.defaultInterval}_slide(m,y=null){if(this._isSliding)return;const S=this._getActive(),j=m===Me,A=y||we(this._getItems(),S,j,this._config.wrap);if(A===S)return;const Y=this._getItemIndex(A),J=pt=>nt.trigger(this._element,pt,{relatedTarget:A,direction:this._orderToDirection(m),from:this._getItemIndex(S),to:Y});if(J("slide.bs.carousel").defaultPrevented||!S||!A)return;const mt=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Y),this._activeElement=A;const wt=j?"carousel-item-start":"carousel-item-end",yt=j?"carousel-item-next":"carousel-item-prev";A.classList.add(yt),S.classList.add(wt),A.classList.add(wt),this._queueCallback(()=>{A.classList.remove(wt,yt),A.classList.add(Yn),S.classList.remove(Yn,yt,wt),this._isSliding=!1,J(Si)},S,this._isAnimated()),mt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return ut.findOne(".active.carousel-item",this._element)}_getItems(){return ut.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(m){return yn()?m===de?br:Me:m===de?Me:br}_orderToDirection(m){return yn()?m===br?de:Wo:m===br?Wo:de}static jQueryInterface(m){return this.each(function(){const y=Tn.getOrCreateInstance(this,m);if("number"!=typeof m){if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m]()}}else y.to(m)})}}nt.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(x){const m=ut.getElementFromSelector(this);if(!m||!m.classList.contains(Kn))return;x.preventDefault();const y=Tn.getOrCreateInstance(m),S=this.getAttribute("data-bs-slide-to");return S?(y.to(S),void y._maybeEnableCycle()):"next"===Vn.getDataAttribute(this,"slide")?(y.next(),void y._maybeEnableCycle()):(y.prev(),void y._maybeEnableCycle())}),nt.on(window,"load.bs.carousel.data-api",()=>{const x=ut.find('[data-bs-ride="carousel"]');for(const m of x)Tn.getOrCreateInstance(m)}),Gt(Tn);const Hr="show",Ie="collapse",ao="collapsing",Fe='[data-bs-toggle="collapse"]',$r={parent:null,toggle:!0},an={parent:"(null|element)",toggle:"boolean"};class qr extends Wn{constructor(m,y){super(m,y),this._isTransitioning=!1,this._triggerArray=[];const S=ut.find(Fe);for(const j of S){const A=ut.getSelectorFromElement(j),Y=ut.find(A).filter(J=>J===this._element);null!==A&&Y.length&&this._triggerArray.push(j)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return $r}static get DefaultType(){return an}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let m=[];if(this._config.parent&&(m=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(j=>j!==this._element).map(j=>qr.getOrCreateInstance(j,{toggle:!1}))),m.length&&m[0]._isTransitioning||nt.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const j of m)j.hide();const y=this._getDimension();this._element.classList.remove(Ie),this._element.classList.add(ao),this._element.style[y]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const S=`scroll${y[0].toUpperCase()+y.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ao),this._element.classList.add(Ie,Hr),this._element.style[y]="",nt.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[y]=`${this._element[S]}px`}hide(){if(this._isTransitioning||!this._isShown()||nt.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const m=this._getDimension();this._element.style[m]=`${this._element.getBoundingClientRect()[m]}px`,this._element.classList.add(ao),this._element.classList.remove(Ie,Hr);for(const y of this._triggerArray){const S=ut.getElementFromSelector(y);S&&!this._isShown(S)&&this._addAriaAndCollapsedClass([y],!1)}this._isTransitioning=!0,this._element.style[m]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ao),this._element.classList.add(Ie),nt.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(m=this._element){return m.classList.contains(Hr)}_configAfterMerge(m){return m.toggle=Boolean(m.toggle),m.parent=Ho(m.parent),m}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const m=this._getFirstLevelChildren(Fe);for(const y of m){const S=ut.getElementFromSelector(y);S&&this._addAriaAndCollapsedClass([y],this._isShown(S))}}_getFirstLevelChildren(m){const y=ut.find(":scope .collapse .collapse",this._config.parent);return ut.find(m,this._config.parent).filter(S=>!y.includes(S))}_addAriaAndCollapsedClass(m,y){if(m.length)for(const S of m)S.classList.toggle("collapsed",!y),S.setAttribute("aria-expanded",y)}static jQueryInterface(m){const y={};return"string"==typeof m&&/show|hide/.test(m)&&(y.toggle=!1),this.each(function(){const S=qr.getOrCreateInstance(this,y);if("string"==typeof m){if(void 0===S[m])throw new TypeError(`No method named "${m}"`);S[m]()}})}}nt.on(document,"click.bs.collapse.data-api",Fe,function(x){("A"===x.target.tagName||x.delegateTarget&&"A"===x.delegateTarget.tagName)&&x.preventDefault();for(const m of ut.getMultipleElementsFromSelector(this))qr.getOrCreateInstance(m,{toggle:!1}).toggle()}),Gt(qr);var Mt="top",Ke="bottom",Cn="right",$e="left",ks="auto",lo=[Mt,Ke,Cn,$e],wo="start",Ko="end",Zt="clippingParents",Ot="viewport",Xn="popper",Pa="reference",Ai=lo.reduce(function(x,m){return x.concat([m+"-"+wo,m+"-"+Ko])},[]),Ss=[].concat(lo,[ks]).reduce(function(x,m){return x.concat([m,m+"-"+wo,m+"-"+Ko])},[]),Ns="beforeRead",Vr="afterRead",As="beforeMain",Yo="afterMain",Xo="beforeWrite",Ti="afterWrite",Wr=[Ns,"read",Vr,As,"main",Yo,Xo,"write",Ti];function Gn(x){return x?(x.nodeName||"").toLowerCase():null}function ln(x){if(null==x)return window;if("[object Window]"!==x.toString()){var m=x.ownerDocument;return m&&m.defaultView||window}return x}function Go(x){return x instanceof ln(x).Element||x instanceof Element}function se(x){return x instanceof ln(x).HTMLElement||x instanceof HTMLElement}function xe(x){return typeof ShadowRoot<"u"&&(x instanceof ln(x).ShadowRoot||x instanceof ShadowRoot)}const Os={name:"applyStyles",enabled:!0,phase:"write",fn:function(x){var m=x.state;Object.keys(m.elements).forEach(function(y){var S=m.styles[y]||{},j=m.attributes[y]||{},A=m.elements[y];se(A)&&Gn(A)&&(Object.assign(A.style,S),Object.keys(j).forEach(function(Y){var J=j[Y];!1===J?A.removeAttribute(Y):A.setAttribute(Y,!0===J?"":J)}))})},effect:function(x){var m=x.state,y={popper:{position:m.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(m.elements.popper.style,y.popper),m.styles=y,m.elements.arrow&&Object.assign(m.elements.arrow.style,y.arrow),function(){Object.keys(m.elements).forEach(function(S){var j=m.elements[S],A=m.attributes[S]||{},Y=Object.keys(m.styles.hasOwnProperty(S)?m.styles[S]:y[S]).reduce(function(J,mt){return J[mt]="",J},{});se(j)&&Gn(j)&&(Object.assign(j.style,Y),Object.keys(A).forEach(function(J){j.removeAttribute(J)}))})}},requires:["computeStyles"]};function Rn(x){return x.split("-")[0]}var Dn=Math.max,Ri=Math.min,vr=Math.round;function Bn(){var x=navigator.userAgentData;return null!=x&&x.brands&&Array.isArray(x.brands)?x.brands.map(function(m){return m.brand+"/"+m.version}).join(" "):navigator.userAgent}function Kr(){return!/^((?!chrome|android).)*safari/i.test(Bn())}function xo(x,m,y){void 0===m&&(m=!1),void 0===y&&(y=!1);var S=x.getBoundingClientRect(),j=1,A=1;m&&se(x)&&(j=x.offsetWidth>0&&vr(S.width)/x.offsetWidth||1,A=x.offsetHeight>0&&vr(S.height)/x.offsetHeight||1);var Y=(Go(x)?ln(x):window).visualViewport,J=!Kr()&&y,mt=(S.left+(J&&Y?Y.offsetLeft:0))/j,wt=(S.top+(J&&Y?Y.offsetTop:0))/A,yt=S.width/j,pt=S.height/A;return{width:yt,height:pt,top:wt,right:mt+yt,bottom:wt+pt,left:mt,x:mt,y:wt}}function Ts(x){var m=xo(x),y=x.offsetWidth,S=x.offsetHeight;return Math.abs(m.width-y)<=1&&(y=m.width),Math.abs(m.height-S)<=1&&(S=m.height),{x:x.offsetLeft,y:x.offsetTop,width:y,height:S}}function co(x,m){var y=m.getRootNode&&m.getRootNode();if(x.contains(m))return!0;if(y&&xe(y)){var S=m;do{if(S&&x.isSameNode(S))return!0;S=S.parentNode||S.host}while(S)}return!1}function Eo(x){return ln(x).getComputedStyle(x)}function Ru(x){return["table","td","th"].indexOf(Gn(x))>=0}function ko(x){return((Go(x)?x.ownerDocument:x.document)||window.document).documentElement}function Rs(x){return"html"===Gn(x)?x:x.assignedSlot||x.parentNode||(xe(x)?x.host:null)||ko(x)}function Fa(x){return se(x)&&"fixed"!==Eo(x).position?x.offsetParent:null}function Yr(x){for(var m=ln(x),y=Fa(x);y&&Ru(y)&&"static"===Eo(y).position;)y=Fa(y);return y&&("html"===Gn(y)||"body"===Gn(y)&&"static"===Eo(y).position)?m:y||function(S){var j=/firefox/i.test(Bn());if(/Trident/i.test(Bn())&&se(S)&&"fixed"===Eo(S).position)return null;var A=Rs(S);for(xe(A)&&(A=A.host);se(A)&&["html","body"].indexOf(Gn(A))<0;){var Y=Eo(A);if("none"!==Y.transform||"none"!==Y.perspective||"paint"===Y.contain||-1!==["transform","perspective"].indexOf(Y.willChange)||j&&"filter"===Y.willChange||j&&Y.filter&&"none"!==Y.filter)return A;A=A.parentNode}return null}(x)||m}function Di(x){return["top","bottom"].indexOf(x)>=0?"x":"y"}function Xr(x,m,y){return Dn(x,Ri(m,y))}function ja(x){return Object.assign({},{top:0,right:0,bottom:0,left:0},x)}function gc(x,m){return m.reduce(function(y,S){return y[S]=x,y},{})}const pc={name:"arrow",enabled:!0,phase:"main",fn:function(x){var m,te,ae,y=x.state,S=x.name,j=x.options,A=y.elements.arrow,Y=y.modifiersData.popperOffsets,J=Rn(y.placement),mt=Di(J),wt=[$e,Cn].indexOf(J)>=0?"height":"width";if(A&&Y){var yt=(ae=y,ja("number"!=typeof(te="function"==typeof(te=j.padding)?te(Object.assign({},ae.rects,{placement:ae.placement})):te)?te:gc(te,lo))),pt=Ts(A),Ut="y"===mt?Mt:$e,Lt="y"===mt?Ke:Cn,U=y.rects.reference[wt]+y.rects.reference[mt]-Y[mt]-y.rects.popper[wt],Pt=Y[mt]-y.rects.reference[mt],Ft=Yr(A),Kt=Ft?"y"===mt?Ft.clientHeight||0:Ft.clientWidth||0:0,$t=Kt/2-pt[wt]/2+(U/2-Pt/2),It=Xr(yt[Ut],$t,Kt-pt[wt]-yt[Lt]);y.modifiersData[S]=((m={})[mt]=It,m.centerOffset=It-$t,m)}},effect:function(x){var m=x.state,y=x.options.element,S=void 0===y?"[data-popper-arrow]":y;null!=S&&("string"!=typeof S||(S=m.elements.popper.querySelector(S)))&&co(m.elements.popper,S)&&(m.elements.arrow=S)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function yr(x){return x.split("-")[1]}var hc={top:"auto",right:"auto",bottom:"auto",left:"auto"};function za(x){var m,y=x.popper,S=x.popperRect,j=x.placement,A=x.variation,Y=x.offsets,J=x.position,mt=x.gpuAcceleration,wt=x.adaptive,yt=x.roundOffsets,pt=x.isFixed,Ut=Y.x,Lt=void 0===Ut?0:Ut,U=Y.y,Pt=void 0===U?0:U,Ft="function"==typeof yt?yt({x:Lt,y:Pt}):{x:Lt,y:Pt};Lt=Ft.x,Pt=Ft.y;var Kt=Y.hasOwnProperty("x"),oe=Y.hasOwnProperty("y"),qt=$e,Dt=Mt,$t=window;if(wt){var It=Yr(y),At="clientHeight",te="clientWidth";It===ln(y)&&"static"!==Eo(It=ko(y)).position&&"absolute"===J&&(At="scrollHeight",te="scrollWidth"),(j===Mt||(j===$e||j===Cn)&&A===Ko)&&(Dt=Ke,Pt-=(pt&&It===$t&&$t.visualViewport?$t.visualViewport.height:It[At])-S.height,Pt*=mt?1:-1),j!==$e&&(j!==Mt&&j!==Ke||A!==Ko)||(qt=Cn,Lt-=(pt&&It===$t&&$t.visualViewport?$t.visualViewport.width:It[te])-S.width,Lt*=mt?1:-1)}var ae,Fn,Ze,Qt,he,re=Object.assign({position:J},wt&&hc),En=!0===yt?(Fn={x:Lt,y:Pt},Ze=ln(y),Qt=Fn.y,{x:vr(Fn.x*(he=Ze.devicePixelRatio||1))/he||0,y:vr(Qt*he)/he||0}):{x:Lt,y:Pt};return Lt=En.x,Pt=En.y,Object.assign({},re,mt?((ae={})[Dt]=oe?"0":"",ae[qt]=Kt?"0":"",ae.transform=($t.devicePixelRatio||1)<=1?"translate("+Lt+"px, "+Pt+"px)":"translate3d("+Lt+"px, "+Pt+"px, 0)",ae):((m={})[Dt]=oe?Pt+"px":"",m[qt]=Kt?Lt+"px":"",m.transform="",m))}const Bi={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(x){var m=x.state,y=x.options,S=y.gpuAcceleration,j=void 0===S||S,A=y.adaptive,Y=void 0===A||A,J=y.roundOffsets,mt=void 0===J||J,wt={placement:Rn(m.placement),variation:yr(m.placement),popper:m.elements.popper,popperRect:m.rects.popper,gpuAcceleration:j,isFixed:"fixed"===m.options.strategy};null!=m.modifiersData.popperOffsets&&(m.styles.popper=Object.assign({},m.styles.popper,za(Object.assign({},wt,{offsets:m.modifiersData.popperOffsets,position:m.options.strategy,adaptive:Y,roundOffsets:mt})))),null!=m.modifiersData.arrow&&(m.styles.arrow=Object.assign({},m.styles.arrow,za(Object.assign({},wt,{offsets:m.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:mt})))),m.attributes.popper=Object.assign({},m.attributes.popper,{"data-popper-placement":m.placement})},data:{}};var Ds={passive:!0};const Li={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(x){var m=x.state,y=x.instance,S=x.options,j=S.scroll,A=void 0===j||j,Y=S.resize,J=void 0===Y||Y,mt=ln(m.elements.popper),wt=[].concat(m.scrollParents.reference,m.scrollParents.popper);return A&&wt.forEach(function(yt){yt.addEventListener("scroll",y.update,Ds)}),J&&mt.addEventListener("resize",y.update,Ds),function(){A&&wt.forEach(function(yt){yt.removeEventListener("scroll",y.update,Ds)}),J&&mt.removeEventListener("resize",y.update,Ds)}},data:{}};var bc={left:"right",right:"left",bottom:"top",top:"bottom"};function Bs(x){return x.replace(/left|right|bottom|top/g,function(m){return bc[m]})}var Du={start:"end",end:"start"};function vc(x){return x.replace(/start|end/g,function(m){return Du[m]})}function Ua(x){var m=ln(x);return{scrollLeft:m.pageXOffset,scrollTop:m.pageYOffset}}function Ha(x){return xo(ko(x)).left+Ua(x).scrollLeft}function Ln(x){var m=Eo(x);return/auto|scroll|overlay|hidden/.test(m.overflow+m.overflowY+m.overflowX)}function yc(x){return["html","body","#document"].indexOf(Gn(x))>=0?x.ownerDocument.body:se(x)&&Ln(x)?x:yc(Rs(x))}function _r(x,m){var y;void 0===m&&(m=[]);var S=yc(x),j=S===(null==(y=x.ownerDocument)?void 0:y.body),A=ln(S),Y=j?[A].concat(A.visualViewport||[],Ln(S)?S:[]):S,J=m.concat(Y);return j?J:J.concat(_r(Rs(Y)))}function Pn(x){return Object.assign({},x,{left:x.x,top:x.y,right:x.x+x.width,bottom:x.y+x.height})}function Qn(x,m,y){return m===Ot?Pn(function(S,j){var A=ln(S),Y=ko(S),J=A.visualViewport,mt=Y.clientWidth,wt=Y.clientHeight,yt=0,pt=0;if(J){mt=J.width,wt=J.height;var Ut=Kr();(Ut||!Ut&&"fixed"===j)&&(yt=J.offsetLeft,pt=J.offsetTop)}return{width:mt,height:wt,x:yt+Ha(S),y:pt}}(x,y)):Go(m)?((A=xo(S=m,!1,"fixed"===y)).top=A.top+S.clientTop,A.left=A.left+S.clientLeft,A.bottom=A.top+S.clientHeight,A.right=A.left+S.clientWidth,A.width=S.clientWidth,A.height=S.clientHeight,A.x=A.left,A.y=A.top,A):Pn(function(S){var j,A=ko(S),Y=Ua(S),J=null==(j=S.ownerDocument)?void 0:j.body,mt=Dn(A.scrollWidth,A.clientWidth,J?J.scrollWidth:0,J?J.clientWidth:0),wt=Dn(A.scrollHeight,A.clientHeight,J?J.scrollHeight:0,J?J.clientHeight:0),yt=-Y.scrollLeft+Ha(S),pt=-Y.scrollTop;return"rtl"===Eo(J||A).direction&&(yt+=Dn(A.clientWidth,J?J.clientWidth:0)-mt),{width:mt,height:wt,x:yt,y:pt}}(ko(x)));var S,A}function Qo(x){var m,y=x.reference,S=x.element,j=x.placement,A=j?Rn(j):null,Y=j?yr(j):null,J=y.x+y.width/2-S.width/2,mt=y.y+y.height/2-S.height/2;switch(A){case Mt:m={x:J,y:y.y-S.height};break;case Ke:m={x:J,y:y.y+y.height};break;case Cn:m={x:y.x+y.width,y:mt};break;case $e:m={x:y.x-S.width,y:mt};break;default:m={x:y.x,y:y.y}}var wt=A?Di(A):null;if(null!=wt){var yt="y"===wt?"height":"width";switch(Y){case wo:m[wt]=m[wt]-(y[yt]/2-S[yt]/2);break;case Ko:m[wt]=m[wt]+(y[yt]/2-S[yt]/2)}}return m}function Gr(x,m){void 0===m&&(m={});var Ze,Ve,Qt,he,Xt,ue,tn,jn,kn,ze,S=m.placement,j=void 0===S?x.placement:S,A=m.strategy,Y=void 0===A?x.strategy:A,J=m.boundary,mt=void 0===J?Zt:J,wt=m.rootBoundary,yt=void 0===wt?Ot:wt,pt=m.elementContext,Ut=void 0===pt?Xn:pt,Lt=m.altBoundary,U=void 0!==Lt&&Lt,Pt=m.padding,Ft=void 0===Pt?0:Pt,Kt=ja("number"!=typeof Ft?Ft:gc(Ft,lo)),qt=x.rects.popper,Dt=x.elements[U?Ut===Xn?Pa:Xn:Ut],$t=(Ze=Go(Dt)?Dt:Dt.contextElement||ko(x.elements.popper),Qt=yt,he=Y,jn="clippingParents"===(Ve=mt)?(ue=_r(Rs(Xt=Ze)),Go(tn=["absolute","fixed"].indexOf(Eo(Xt).position)>=0&&se(Xt)?Yr(Xt):Xt)?ue.filter(function(un){return Go(un)&&co(un,tn)&&"body"!==Gn(un)}):[]):[].concat(Ve),ze=(kn=[].concat(jn,[Qt])).reduce(function(Xt,ue){var tn=Qn(Ze,ue,he);return Xt.top=Dn(tn.top,Xt.top),Xt.right=Ri(tn.right,Xt.right),Xt.bottom=Ri(tn.bottom,Xt.bottom),Xt.left=Dn(tn.left,Xt.left),Xt},Qn(Ze,kn[0],he)),ze.width=ze.right-ze.left,ze.height=ze.bottom-ze.top,ze.x=ze.left,ze.y=ze.top,ze),It=xo(x.elements.reference),At=Qo({reference:It,element:qt,strategy:"absolute",placement:j}),te=Pn(Object.assign({},qt,At)),ae=Ut===Xn?te:It,re={top:$t.top-ae.top+Kt.top,bottom:ae.bottom-$t.bottom+Kt.bottom,left:$t.left-ae.left+Kt.left,right:ae.right-$t.right+Kt.right},En=x.modifiersData.offset;if(Ut===Xn&&En){var Fn=En[j];Object.keys(re).forEach(function(Ze){var Ve=[Cn,Ke].indexOf(Ze)>=0?1:-1,Qt=[Mt,Ke].indexOf(Ze)>=0?"y":"x";re[Ze]+=Fn[Qt]*Ve})}return re}const _c={name:"flip",enabled:!0,phase:"main",fn:function(x){var m=x.state,y=x.options,S=x.name;if(!m.modifiersData[S]._skip){for(var j=y.mainAxis,A=void 0===j||j,Y=y.altAxis,J=void 0===Y||Y,mt=y.fallbackPlacements,wt=y.padding,yt=y.boundary,pt=y.rootBoundary,Ut=y.altBoundary,Lt=y.flipVariations,U=void 0===Lt||Lt,Pt=y.allowedAutoPlacements,Ft=m.options.placement,Kt=Rn(Ft),oe=mt||(Kt!==Ft&&U?function(Xt){if(Rn(Xt)===ks)return[];var ue=Bs(Xt);return[vc(Xt),ue,vc(ue)]}(Ft):[Bs(Ft)]),qt=[Ft].concat(oe).reduce(function(Xt,ue){return Xt.concat(Rn(ue)===ks?function zt(x,m){void 0===m&&(m={});var j=m.boundary,A=m.rootBoundary,Y=m.padding,J=m.flipVariations,mt=m.allowedAutoPlacements,wt=void 0===mt?Ss:mt,yt=yr(m.placement),pt=yt?J?Ai:Ai.filter(function(U){return yr(U)===yt}):lo,Ut=pt.filter(function(U){return wt.indexOf(U)>=0});0===Ut.length&&(Ut=pt);var Lt=Ut.reduce(function(U,Pt){return U[Pt]=Gr(x,{placement:Pt,boundary:j,rootBoundary:A,padding:Y})[Rn(Pt)],U},{});return Object.keys(Lt).sort(function(U,Pt){return Lt[U]-Lt[Pt]})}(m,{placement:ue,boundary:yt,rootBoundary:pt,padding:wt,flipVariations:U,allowedAutoPlacements:Pt}):ue)},[]),Dt=m.rects.reference,$t=m.rects.popper,It=new Map,At=!0,te=qt[0],ae=0;ae<qt.length;ae++){var re=qt[ae],En=Rn(re),Fn=yr(re)===wo,Ze=[Mt,Ke].indexOf(En)>=0,Ve=Ze?"width":"height",Qt=Gr(m,{placement:re,boundary:yt,rootBoundary:pt,altBoundary:Ut,padding:wt}),he=Ze?Fn?Cn:$e:Fn?Ke:Mt;Dt[Ve]>$t[Ve]&&(he=Bs(he));var jn=Bs(he),kn=[];if(A&&kn.push(Qt[En]<=0),J&&kn.push(Qt[he]<=0,Qt[jn]<=0),kn.every(function(Xt){return Xt})){te=re,At=!1;break}It.set(re,kn)}if(At)for(var Tr=function(Xt){var ue=qt.find(function(tn){var un=It.get(tn);if(un)return un.slice(0,Xt).every(function(Hs){return Hs})});if(ue)return te=ue,"break"},ze=U?3:1;ze>0&&"break"!==Tr(ze);ze--);m.placement!==te&&(m.modifiersData[S]._skip=!0,m.placement=te,m.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function $a(x,m,y){return void 0===y&&(y={x:0,y:0}),{top:x.top-m.height-y.y,right:x.right-m.width+y.x,bottom:x.bottom-m.height+y.y,left:x.left-m.width-y.x}}function qa(x){return[Mt,Cn,Ke,$e].some(function(m){return x[m]>=0})}const Q={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(x){var m=x.state,y=x.name,S=m.rects.reference,j=m.rects.popper,A=m.modifiersData.preventOverflow,Y=Gr(m,{elementContext:"reference"}),J=Gr(m,{altBoundary:!0}),mt=$a(Y,S),wt=$a(J,j,A),yt=qa(mt),pt=qa(wt);m.modifiersData[y]={referenceClippingOffsets:mt,popperEscapeOffsets:wt,isReferenceHidden:yt,hasPopperEscaped:pt},m.attributes.popper=Object.assign({},m.attributes.popper,{"data-popper-reference-hidden":yt,"data-popper-escaped":pt})}},Cr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(x){var m=x.state,S=x.name,j=x.options.offset,A=void 0===j?[0,0]:j,Y=Ss.reduce(function(yt,pt){return yt[pt]=(Lt=m.rects,U=A,Pt=Rn(Ut=pt),Ft=[$e,Mt].indexOf(Pt)>=0?-1:1,oe=(oe=(Kt="function"==typeof U?U(Object.assign({},Lt,{placement:Ut})):U)[0])||0,qt=((qt=Kt[1])||0)*Ft,[$e,Cn].indexOf(Pt)>=0?{x:qt,y:oe}:{x:oe,y:qt}),yt;var Ut,Lt,U,Pt,Ft,Kt,oe,qt},{}),J=Y[m.placement],wt=J.y;null!=m.modifiersData.popperOffsets&&(m.modifiersData.popperOffsets.x+=J.x,m.modifiersData.popperOffsets.y+=wt),m.modifiersData[S]=Y}},je={name:"popperOffsets",enabled:!0,phase:"read",fn:function(x){var m=x.state;m.modifiersData[x.name]=Qo({reference:m.rects.reference,element:m.rects.popper,strategy:"absolute",placement:m.placement})},data:{}},wr={name:"preventOverflow",enabled:!0,phase:"main",fn:function(x){var Zi,al,m=x.state,y=x.options,S=x.name,j=y.mainAxis,A=void 0===j||j,Y=y.altAxis,J=void 0!==Y&&Y,Ut=y.tether,Lt=void 0===Ut||Ut,U=y.tetherOffset,Pt=void 0===U?0:U,Ft=Gr(m,{boundary:y.boundary,rootBoundary:y.rootBoundary,padding:y.padding,altBoundary:y.altBoundary}),Kt=Rn(m.placement),oe=yr(m.placement),qt=!oe,Dt=Di(Kt),$t="x"===Dt?"y":"x",It=m.modifiersData.popperOffsets,At=m.rects.reference,te=m.rects.popper,ae="function"==typeof Pt?Pt(Object.assign({},m.rects,{placement:m.placement})):Pt,re="number"==typeof ae?{mainAxis:ae,altAxis:ae}:Object.assign({mainAxis:0,altAxis:0},ae),En=m.modifiersData.offset?m.modifiersData.offset[m.placement]:null,Fn={x:0,y:0};if(It){if(A){var Ze,Ve="y"===Dt?Mt:$e,Qt="y"===Dt?Ke:Cn,he="y"===Dt?"height":"width",jn=It[Dt],kn=jn+Ft[Ve],Tr=jn-Ft[Qt],ze=Lt?-te[he]/2:0,Xt=oe===wo?At[he]:te[he],ue=oe===wo?-te[he]:-At[he],tn=m.elements.arrow,un=Lt&&tn?Ts(tn):{width:0,height:0},Hs=m.modifiersData["arrow#persistent"]?m.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Wi=Hs[Ve],os=Hs[Qt],Ki=Xr(0,At[he],un[he]),$s=qt?At[he]/2-ze-Ki-Wi-re.mainAxis:Xt-Ki-Wi-re.mainAxis,Yi=qt?-At[he]/2+ze+Ki+os+re.mainAxis:ue+Ki+os+re.mainAxis,rl=m.elements.arrow&&Yr(m.elements.arrow),qs=null!=(Ze=En?.[Dt])?Ze:0,tr=jn+Yi-qs,Hc=Xr(Lt?Ri(kn,jn+$s-qs-(rl?"y"===Dt?rl.clientTop||0:rl.clientLeft||0:0)):kn,jn,Lt?Dn(Tr,tr):Tr);It[Dt]=Hc,Fn[Dt]=Hc-jn}if(J){var Te,Rr=It[$t],Do="y"===$t?"height":"width",Dr=Rr+Ft["x"===Dt?Mt:$e],Bo=Rr-Ft["x"===Dt?Ke:Cn],en=-1!==[Mt,$e].indexOf(Kt),sl=null!=(Te=En?.[$t])?Te:0,Gi=en?Dr:Rr-At[Do]-te[Do]-sl+re.altAxis,Qi=en?Rr+At[Do]+te[Do]-sl-re.altAxis:Bo,Vs=Lt&&en?(al=Xr(Gi,Rr,Zi=Qi))>Zi?Zi:al:Xr(Lt?Gi:Dr,Rr,Lt?Qi:Bo);It[$t]=Vs,Fn[$t]=Vs-Rr}m.modifiersData[S]=Fn}},requiresIfExists:["offset"]};function Bu(x,m,y){void 0===y&&(y=!1);var S,j,pt,Ut,Lt,U,A=se(m),Y=se(m)&&(Ut=(pt=m).getBoundingClientRect(),Lt=vr(Ut.width)/pt.offsetWidth||1,U=vr(Ut.height)/pt.offsetHeight||1,1!==Lt||1!==U),J=ko(m),mt=xo(x,Y,y),wt={scrollLeft:0,scrollTop:0},yt={x:0,y:0};return(A||!A&&!y)&&(("body"!==Gn(m)||Ln(J))&&(wt=(S=m)!==ln(S)&&se(S)?{scrollLeft:(j=S).scrollLeft,scrollTop:j.scrollTop}:Ua(S)),se(m)?((yt=xo(m,!0)).x+=m.clientLeft,yt.y+=m.clientTop):J&&(yt.x=Ha(J))),{x:mt.left+wt.scrollLeft-yt.x,y:mt.top+wt.scrollTop-yt.y,width:mt.width,height:mt.height}}function Cc(x){var m=new Map,y=new Set,S=[];function j(A){y.add(A.name),[].concat(A.requires||[],A.requiresIfExists||[]).forEach(function(Y){if(!y.has(Y)){var J=m.get(Y);J&&j(J)}}),S.push(A)}return x.forEach(function(A){m.set(A.name,A)}),x.forEach(function(A){y.has(A.name)||j(A)}),S}var wc={placement:"bottom",modifiers:[],strategy:"absolute"};function xc(){for(var x=arguments.length,m=new Array(x),y=0;y<x;y++)m[y]=arguments[y];return!m.some(function(S){return!(S&&"function"==typeof S.getBoundingClientRect)})}function Yt(x){void 0===x&&(x={});var y=x.defaultModifiers,S=void 0===y?[]:y,j=x.defaultOptions,A=void 0===j?wc:j;return function(Y,J,mt){void 0===mt&&(mt=A);var wt,yt,pt={placement:"bottom",orderedModifiers:[],options:Object.assign({},wc,A),modifiersData:{},elements:{reference:Y,popper:J},attributes:{},styles:{}},Ut=[],Lt=!1,U={state:pt,setOptions:function(Ft){var Kt="function"==typeof Ft?Ft(pt.options):Ft;Pt(),pt.options=Object.assign({},A,pt.options,Kt),pt.scrollParents={reference:Go(Y)?_r(Y):Y.contextElement?_r(Y.contextElement):[],popper:_r(J)};var oe,qt,$t,It,Dt=(oe=[].concat(S,pt.options.modifiers),qt=oe.reduce(function($t,It){var At=$t[It.name];return $t[It.name]=At?Object.assign({},At,It,{options:Object.assign({},At.options,It.options),data:Object.assign({},At.data,It.data)}):It,$t},{}),$t=Object.keys(qt).map(function($t){return qt[$t]}),It=Cc($t),Wr.reduce(function(At,te){return At.concat(It.filter(function(ae){return ae.phase===te}))},[]));return pt.orderedModifiers=Dt.filter(function($t){return $t.enabled}),pt.orderedModifiers.forEach(function($t){var At=$t.options,ae=$t.effect;if("function"==typeof ae){var re=ae({state:pt,name:$t.name,instance:U,options:void 0===At?{}:At});Ut.push(re||function(){})}}),U.update()},forceUpdate:function(){if(!Lt){var Ft=pt.elements,Kt=Ft.reference,oe=Ft.popper;if(xc(Kt,oe)){pt.rects={reference:Bu(Kt,Yr(oe),"fixed"===pt.options.strategy),popper:Ts(oe)},pt.reset=!1,pt.placement=pt.options.placement,pt.orderedModifiers.forEach(function(ae){return pt.modifiersData[ae.name]=Object.assign({},ae.data)});for(var qt=0;qt<pt.orderedModifiers.length;qt++)if(!0!==pt.reset){var Dt=pt.orderedModifiers[qt],$t=Dt.fn,It=Dt.options;"function"==typeof $t&&(pt=$t({state:pt,options:void 0===It?{}:It,name:Dt.name,instance:U})||pt)}else pt.reset=!1,qt=-1}}},update:(wt=function(){return new Promise(function(Ft){U.forceUpdate(),Ft(pt)})},function(){return yt||(yt=new Promise(function(Ft){Promise.resolve().then(function(){yt=void 0,Ft(wt())})})),yt}),destroy:function(){Pt(),Lt=!0}};if(!xc(Y,J))return U;function Pt(){Ut.forEach(function(Ft){return Ft()}),Ut=[]}return U.setOptions(mt).then(function(Ft){!Lt&&mt.onFirstUpdate&&mt.onFirstUpdate(Ft)}),U}}var Ec=Yt(),Pi=Yt({defaultModifiers:[Li,je,Bi,Os]}),Ls=Yt({defaultModifiers:[Li,je,Bi,Os,Cr,_c,wr,pc,Q]});const Ye=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Yo,afterRead:Vr,afterWrite:Ti,applyStyles:Os,arrow:pc,auto:ks,basePlacements:lo,beforeMain:As,beforeRead:Ns,beforeWrite:Xo,bottom:Ke,clippingParents:Zt,computeStyles:Bi,createPopper:Ls,createPopperBase:Ec,createPopperLite:Pi,detectOverflow:Gr,end:Ko,eventListeners:Li,flip:_c,hide:Q,left:$e,main:"main",modifierPhases:Wr,offset:Cr,placements:Ss,popper:Xn,popperGenerator:Yt,popperOffsets:je,preventOverflow:wr,read:"read",reference:Pa,right:Cn,start:wo,top:Mt,variationPlacements:Ai,viewport:Ot,write:"write"},Symbol.toStringTag,{value:"Module"})),cn="dropdown",Lu="ArrowUp",kc="ArrowDown",Mi="click.bs.dropdown.data-api",Va="keydown.bs.dropdown.data-api",pe="show",dn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',wn=`${dn}.show`,Mn=".dropdown-menu",Ii=yn()?"top-end":"top-start",Oe=yn()?"top-start":"top-end",Sc=yn()?"bottom-end":"bottom-start",Wa=yn()?"bottom-start":"bottom-end",Ps=yn()?"left-start":"right-start",Nc=yn()?"right-start":"left-start",Ac={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Oc={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Xe extends Wn{constructor(m,y){super(m,y),this._popper=null,this._parent=this._element.parentNode,this._menu=ut.next(this._element,Mn)[0]||ut.prev(this._element,Mn)[0]||ut.findOne(Mn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ac}static get DefaultType(){return Oc}static get NAME(){return cn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(io(this._element)||this._isShown())return;const m={relatedTarget:this._element};if(!nt.trigger(this._element,"show.bs.dropdown",m).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const y of[].concat(...document.body.children))nt.on(y,"mouseover",Cs);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(pe),this._element.classList.add(pe),nt.trigger(this._element,"shown.bs.dropdown",m)}}hide(){!io(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(m){if(!nt.trigger(this._element,"hide.bs.dropdown",m).defaultPrevented){if("ontouchstart"in document.documentElement)for(const y of[].concat(...document.body.children))nt.off(y,"mouseover",Cs);this._popper&&this._popper.destroy(),this._menu.classList.remove(pe),this._element.classList.remove(pe),this._element.setAttribute("aria-expanded","false"),Vn.removeDataAttribute(this._menu,"popper"),nt.trigger(this._element,"hidden.bs.dropdown",m)}}_getConfig(m){if("object"==typeof(m=super._getConfig(m)).reference&&!qn(m.reference)&&"function"!=typeof m.reference.getBoundingClientRect)throw new TypeError(`${cn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return m}_createPopper(){if(void 0===Ye)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let m=this._element;"parent"===this._config.reference?m=this._parent:qn(this._config.reference)?m=Ho(this._config.reference):"object"==typeof this._config.reference&&(m=this._config.reference);const y=this._getPopperConfig();this._popper=Ls(m,this._menu,y)}_isShown(){return this._menu.classList.contains(pe)}_getPlacement(){const m=this._parent;if(m.classList.contains("dropend"))return Ps;if(m.classList.contains("dropstart"))return Nc;if(m.classList.contains("dropup-center"))return"top";if(m.classList.contains("dropdown-center"))return"bottom";const y="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return m.classList.contains("dropup")?y?Oe:Ii:y?Wa:Sc}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:m}=this._config;return"string"==typeof m?m.split(",").map(y=>Number.parseInt(y,10)):"function"==typeof m?y=>m(y,this._element):m}_getPopperConfig(){const m={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Vn.setDataAttribute(this._menu,"popper","static"),m.modifiers=[{name:"applyStyles",enabled:!1}]),{...m,...le(this._config.popperConfig,[m])}}_selectMenuItem({key:m,target:y}){const S=ut.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(j=>gr(j));S.length&&we(S,y,m===kc,!S.includes(y)).focus()}static jQueryInterface(m){return this.each(function(){const y=Xe.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m])throw new TypeError(`No method named "${m}"`);y[m]()}})}static clearMenus(m){if(2===m.button||"keyup"===m.type&&"Tab"!==m.key)return;const y=ut.find(wn);for(const S of y){const j=Xe.getInstance(S);if(!j||!1===j._config.autoClose)continue;const A=m.composedPath(),Y=A.includes(j._menu);if(A.includes(j._element)||"inside"===j._config.autoClose&&!Y||"outside"===j._config.autoClose&&Y||j._menu.contains(m.target)&&("keyup"===m.type&&"Tab"===m.key||/input|select|option|textarea|form/i.test(m.target.tagName)))continue;const J={relatedTarget:j._element};"click"===m.type&&(J.clickEvent=m),j._completeHide(J)}}static dataApiKeydownHandler(m){const y=/input|textarea/i.test(m.target.tagName),S="Escape"===m.key,j=[Lu,kc].includes(m.key);if(!j&&!S||y&&!S)return;m.preventDefault();const A=this.matches(dn)?this:ut.prev(this,dn)[0]||ut.next(this,dn)[0]||ut.findOne(dn,m.delegateTarget.parentNode),Y=Xe.getOrCreateInstance(A);if(j)return m.stopPropagation(),Y.show(),void Y._selectMenuItem(m);Y._isShown()&&(m.stopPropagation(),Y.hide(),A.focus())}}nt.on(document,Va,dn,Xe.dataApiKeydownHandler),nt.on(document,Va,Mn,Xe.dataApiKeydownHandler),nt.on(document,Mi,Xe.clearMenus),nt.on(document,"keyup.bs.dropdown.data-api",Xe.clearMenus),nt.on(document,Mi,dn,function(x){x.preventDefault(),Xe.getOrCreateInstance(this).toggle()}),Gt(Xe);const xr="mousedown.bs.backdrop",Ya={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ms={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Qr extends ws{constructor(m){super(),this._config=this._getConfig(m),this._isAppended=!1,this._element=null}static get Default(){return Ya}static get DefaultType(){return Ms}static get NAME(){return"backdrop"}show(m){if(!this._config.isVisible)return void le(m);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{le(m)})}hide(m){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),le(m)})):le(m)}dispose(){this._isAppended&&(nt.off(this._element,xr),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const m=document.createElement("div");m.className=this._config.className,this._config.isAnimated&&m.classList.add("fade"),this._element=m}return this._element}_configAfterMerge(m){return m.rootElement=Ho(m.rootElement),m}_append(){if(this._isAppended)return;const m=this._getElement();this._config.rootElement.append(m),nt.on(m,xr,()=>{le(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(m){qo(m,this._getElement(),this._config.isAnimated)}}const Ee=".bs.focustrap",Er="backward",T={autofocus:!0,trapElement:null},Pu={autofocus:"boolean",trapElement:"element"};class Xa extends ws{constructor(m){super(),this._config=this._getConfig(m),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return T}static get DefaultType(){return Pu}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),nt.off(document,Ee),nt.on(document,"focusin.bs.focustrap",m=>this._handleFocusin(m)),nt.on(document,"keydown.tab.bs.focustrap",m=>this._handleKeydown(m)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,nt.off(document,Ee))}_handleFocusin(m){const{trapElement:y}=this._config;if(m.target===document||m.target===y||y.contains(m.target))return;const S=ut.focusableChildren(y);0===S.length?y.focus():this._lastTabNavDirection===Er?S[S.length-1].focus():S[0].focus()}_handleKeydown(m){"Tab"===m.key&&(this._lastTabNavDirection=m.shiftKey?Er:"forward")}}const In=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ga=".sticky-top",Ht="padding-right",uo="margin-right";class Fi{constructor(){this._element=document.body}getWidth(){const m=document.documentElement.clientWidth;return Math.abs(window.innerWidth-m)}hide(){const m=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ht,y=>y+m),this._setElementAttributes(In,Ht,y=>y+m),this._setElementAttributes(Ga,uo,y=>y-m)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ht),this._resetElementAttributes(In,Ht),this._resetElementAttributes(Ga,uo)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(m,y,S){const j=this.getWidth();this._applyManipulationCallback(m,A=>{if(A!==this._element&&window.innerWidth>A.clientWidth+j)return;this._saveInitialAttribute(A,y);const Y=window.getComputedStyle(A).getPropertyValue(y);A.style.setProperty(y,`${S(Number.parseFloat(Y))}px`)})}_saveInitialAttribute(m,y){const S=m.style.getPropertyValue(y);S&&Vn.setDataAttribute(m,y,S)}_resetElementAttributes(m,y){this._applyManipulationCallback(m,S=>{const j=Vn.getDataAttribute(S,y);null!==j?(Vn.removeDataAttribute(S,y),S.style.setProperty(y,j)):S.style.removeProperty(y)})}_applyManipulationCallback(m,y){if(qn(m))y(m);else for(const S of ut.find(m,this._element))y(S)}}const mo=".bs.modal",Jr="hidden.bs.modal",xn="show.bs.modal",ji="modal-open",So="modal-static",Is={backdrop:!0,focus:!0,keyboard:!0},Tc={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Jo extends Wn{constructor(m,y){super(m,y),this._dialog=ut.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Fi,this._addEventListeners()}static get Default(){return Is}static get DefaultType(){return Tc}static get NAME(){return"modal"}toggle(m){return this._isShown?this.hide():this.show(m)}show(m){this._isShown||this._isTransitioning||nt.trigger(this._element,xn,{relatedTarget:m}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ji),this._adjustDialog(),this._backdrop.show(()=>this._showElement(m)))}hide(){this._isShown&&!this._isTransitioning&&(nt.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){nt.off(window,mo),nt.off(this._dialog,mo),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Qr({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Xa({trapElement:this._element})}_showElement(m){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const y=ut.findOne(".modal-body",this._dialog);y&&(y.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,nt.trigger(this._element,"shown.bs.modal",{relatedTarget:m})},this._dialog,this._isAnimated())}_addEventListeners(){nt.on(this._element,"keydown.dismiss.bs.modal",m=>{"Escape"===m.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),nt.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),nt.on(this._element,"mousedown.dismiss.bs.modal",m=>{nt.one(this._element,"click.dismiss.bs.modal",y=>{this._element===m.target&&this._element===y.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ji),this._resetAdjustments(),this._scrollBar.reset(),nt.trigger(this._element,Jr)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(nt.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const m=this._element.scrollHeight>document.documentElement.clientHeight,y=this._element.style.overflowY;"hidden"===y||this._element.classList.contains(So)||(m||(this._element.style.overflowY="hidden"),this._element.classList.add(So),this._queueCallback(()=>{this._element.classList.remove(So),this._queueCallback(()=>{this._element.style.overflowY=y},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const m=this._element.scrollHeight>document.documentElement.clientHeight,y=this._scrollBar.getWidth(),S=y>0;if(S&&!m){const j=yn()?"paddingLeft":"paddingRight";this._element.style[j]=`${y}px`}if(!S&&m){const j=yn()?"paddingRight":"paddingLeft";this._element.style[j]=`${y}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(m,y){return this.each(function(){const S=Jo.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===S[m])throw new TypeError(`No method named "${m}"`);S[m](y)}})}}nt.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(x){const m=ut.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&x.preventDefault(),nt.one(m,xn,S=>{S.defaultPrevented||nt.one(m,Jr,()=>{gr(this)&&this.focus()})});const y=ut.findOne(".modal.show");y&&Jo.getInstance(y).hide(),Jo.getOrCreateInstance(m).toggle(this)}),ce(Jo),Gt(Jo);const kr="showing",Ui=".offcanvas.show",Hi="hidePrevented.bs.offcanvas",$i="hidden.bs.offcanvas",Rc={backdrop:!0,keyboard:!0,scroll:!1},Mu={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ge extends Wn{constructor(m,y){super(m,y),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Rc}static get DefaultType(){return Mu}static get NAME(){return"offcanvas"}toggle(m){return this._isShown?this.hide():this.show(m)}show(m){this._isShown||nt.trigger(this._element,"show.bs.offcanvas",{relatedTarget:m}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Fi).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(kr),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(kr),nt.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:m})},this._element,!0))}hide(){this._isShown&&(nt.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Fi).reset(),nt.trigger(this._element,$i)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const m=Boolean(this._config.backdrop);return new Qr({className:"offcanvas-backdrop",isVisible:m,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:m?()=>{"static"!==this._config.backdrop?this.hide():nt.trigger(this._element,Hi)}:null})}_initializeFocusTrap(){return new Xa({trapElement:this._element})}_addEventListeners(){nt.on(this._element,"keydown.dismiss.bs.offcanvas",m=>{"Escape"===m.key&&(this._config.keyboard?this.hide():nt.trigger(this._element,Hi))})}static jQueryInterface(m){return this.each(function(){const y=Ge.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m](this)}})}}nt.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(x){const m=ut.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&x.preventDefault(),io(this))return;nt.one(m,$i,()=>{gr(this)&&this.focus()});const y=ut.findOne(Ui);y&&y!==m&&Ge.getInstance(y).hide(),Ge.getOrCreateInstance(m).toggle(this)}),nt.on(window,"load.bs.offcanvas.data-api",()=>{for(const x of ut.find(Ui))Ge.getOrCreateInstance(x).show()}),nt.on(window,"resize.bs.offcanvas",()=>{for(const x of ut.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(x).position&&Ge.getOrCreateInstance(x).hide()}),ce(Ge),Gt(Ge);const Ja=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Iu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Dc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Fu=(x,m)=>{const y=x.nodeName.toLowerCase();return m.includes(y)?!Ja.has(y)||Boolean(Iu.test(x.nodeValue)||Dc.test(x.nodeValue)):m.filter(S=>S instanceof RegExp).some(S=>S.test(y))},Sr={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Bc={allowList:Sr,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},No={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Nr={entry:"(string|element|function|null)",selector:"(string|element)"};class Fs extends ws{constructor(m){super(),this._config=this._getConfig(m)}static get Default(){return Bc}static get DefaultType(){return No}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(m=>this._resolvePossibleFunction(m)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(m){return this._checkContent(m),this._config.content={...this._config.content,...m},this}toHtml(){const m=document.createElement("div");m.innerHTML=this._maybeSanitize(this._config.template);for(const[j,A]of Object.entries(this._config.content))this._setContent(m,A,j);const y=m.children[0],S=this._resolvePossibleFunction(this._config.extraClass);return S&&y.classList.add(...S.split(" ")),y}_typeCheckConfig(m){super._typeCheckConfig(m),this._checkContent(m.content)}_checkContent(m){for(const[y,S]of Object.entries(m))super._typeCheckConfig({selector:y,entry:S},Nr)}_setContent(m,y,S){const j=ut.findOne(S,m);j&&((y=this._resolvePossibleFunction(y))?qn(y)?this._putElementInTemplate(Ho(y),j):this._config.html?j.innerHTML=this._maybeSanitize(y):j.textContent=y:j.remove())}_maybeSanitize(m){return this._config.sanitize?function(y,S,j){if(!y.length)return y;if(j&&"function"==typeof j)return j(y);const A=(new window.DOMParser).parseFromString(y,"text/html"),Y=[].concat(...A.body.querySelectorAll("*"));for(const J of Y){const mt=J.nodeName.toLowerCase();if(!Object.keys(S).includes(mt)){J.remove();continue}const wt=[].concat(...J.attributes),yt=[].concat(S["*"]||[],S[mt]||[]);for(const pt of wt)Fu(pt,yt)||J.removeAttribute(pt.nodeName)}return A.body.innerHTML}(m,this._config.allowList,this._config.sanitizeFn):m}_resolvePossibleFunction(m){return le(m,[this])}_putElementInTemplate(m,y){if(this._config.html)return y.innerHTML="",void y.append(m);y.textContent=m.textContent}}const js=new Set(["sanitize","allowList","sanitizeFn"]),Ao="fade",Oo="show",Zr="hide.bs.modal",zs="hover",qi={AUTO:"auto",TOP:"top",RIGHT:yn()?"left":"right",BOTTOM:"bottom",LEFT:yn()?"right":"left"},fo={allowList:Sr,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Pc={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class go extends Wn{constructor(m,y){if(void 0===Ye)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(m,y),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return fo}static get DefaultType(){return Pc}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),nt.off(this._element.closest(".modal"),Zr,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const m=nt.trigger(this._element,this.constructor.eventName("show")),y=(xi(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(m.defaultPrevented||!y)return;this._disposePopper();const S=this._getTipElement();this._element.setAttribute("aria-describedby",S.getAttribute("id"));const{container:j}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(j.append(S),nt.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(S),S.classList.add(Oo),"ontouchstart"in document.documentElement)for(const A of[].concat(...document.body.children))nt.on(A,"mouseover",Cs);this._queueCallback(()=>{nt.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!nt.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Oo),"ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))nt.off(m,"mouseover",Cs);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),nt.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(m){const y=this._getTemplateFactory(m).toHtml();if(!y)return null;y.classList.remove(Ao,Oo),y.classList.add(`bs-${this.constructor.NAME}-auto`);const S=(j=>{do{j+=Math.floor(1e6*Math.random())}while(document.getElementById(j));return j})(this.constructor.NAME).toString();return y.setAttribute("id",S),this._isAnimated()&&y.classList.add(Ao),y}setContent(m){this._newContent=m,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(m){return this._templateFactory?this._templateFactory.changeContent(m):this._templateFactory=new Fs({...this._config,content:m,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(m){return this.constructor.getOrCreateInstance(m.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ao)}_isShown(){return this.tip&&this.tip.classList.contains(Oo)}_createPopper(m){const y=le(this._config.placement,[this,m,this._element]),S=qi[y.toUpperCase()];return Ls(this._element,m,this._getPopperConfig(S))}_getOffset(){const{offset:m}=this._config;return"string"==typeof m?m.split(",").map(y=>Number.parseInt(y,10)):"function"==typeof m?y=>m(y,this._element):m}_resolvePossibleFunction(m){return le(m,[this._element])}_getPopperConfig(m){const y={placement:m,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:S=>{this._getTipElement().setAttribute("data-popper-placement",S.state.placement)}}]};return{...y,...le(this._config.popperConfig,[y])}}_setListeners(){const m=this._config.trigger.split(" ");for(const y of m)if("click"===y)nt.on(this._element,this.constructor.eventName("click"),this._config.selector,S=>{this._initializeOnDelegatedTarget(S).toggle()});else if("manual"!==y){const S=this.constructor.eventName(y===zs?"mouseenter":"focusin"),j=this.constructor.eventName(y===zs?"mouseleave":"focusout");nt.on(this._element,S,this._config.selector,A=>{const Y=this._initializeOnDelegatedTarget(A);Y._activeTrigger["focusin"===A.type?"focus":zs]=!0,Y._enter()}),nt.on(this._element,j,this._config.selector,A=>{const Y=this._initializeOnDelegatedTarget(A);Y._activeTrigger["focusout"===A.type?"focus":zs]=Y._element.contains(A.relatedTarget),Y._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},nt.on(this._element.closest(".modal"),Zr,this._hideModalHandler)}_fixTitle(){const m=this._element.getAttribute("title");m&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",m),this._element.setAttribute("data-bs-original-title",m),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(m,y){clearTimeout(this._timeout),this._timeout=setTimeout(m,y)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(m){const y=Vn.getDataAttributes(this._element);for(const S of Object.keys(y))js.has(S)&&delete y[S];return m={...y,..."object"==typeof m&&m?m:{}},m=this._mergeConfigObj(m),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}_configAfterMerge(m){return m.container=!1===m.container?document.body:Ho(m.container),"number"==typeof m.delay&&(m.delay={show:m.delay,hide:m.delay}),"number"==typeof m.title&&(m.title=m.title.toString()),"number"==typeof m.content&&(m.content=m.content.toString()),m}_getDelegateConfig(){const m={};for(const[y,S]of Object.entries(this._config))this.constructor.Default[y]!==S&&(m[y]=S);return m.selector=!1,m.trigger="manual",m}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(m){return this.each(function(){const y=go.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m])throw new TypeError(`No method named "${m}"`);y[m]()}})}}Gt(go);const Mc={...go.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ic={...go.DefaultType,content:"(null|string|element|function)"};class qe extends go{static get Default(){return Mc}static get DefaultType(){return Ic}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(m){return this.each(function(){const y=qe.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m])throw new TypeError(`No method named "${m}"`);y[m]()}})}}Gt(qe);const To="click.bs.scrollspy",ts="active",Fc={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ar={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class po extends Wn{constructor(m,y){super(m,y),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Fc}static get DefaultType(){return Ar}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const m of this._observableSections.values())this._observer.observe(m)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(m){return m.target=Ho(m.target)||document.body,m.rootMargin=m.offset?`${m.offset}px 0px -30%`:m.rootMargin,"string"==typeof m.threshold&&(m.threshold=m.threshold.split(",").map(y=>Number.parseFloat(y))),m}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(nt.off(this._config.target,To),nt.on(this._config.target,To,"[href]",m=>{const y=this._observableSections.get(m.target.hash);if(y){m.preventDefault();const S=this._rootElement||window,j=y.offsetTop-this._element.offsetTop;if(S.scrollTo)return void S.scrollTo({top:j,behavior:"smooth"});S.scrollTop=j}}))}_getNewObserver(){return new IntersectionObserver(y=>this._observerCallback(y),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(m){const y=Y=>this._targetLinks.get(`#${Y.target.id}`),S=Y=>{this._previousScrollData.visibleEntryTop=Y.target.offsetTop,this._process(y(Y))},j=(this._rootElement||document.documentElement).scrollTop,A=j>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=j;for(const Y of m){if(!Y.isIntersecting){this._activeTarget=null,this._clearActiveClass(y(Y));continue}const J=Y.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(A&&J){if(S(Y),!j)return}else A||J||S(Y)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const m=ut.find("[href]",this._config.target);for(const y of m){if(!y.hash||io(y))continue;const S=ut.findOne(y.hash,this._element);gr(S)&&(this._targetLinks.set(y.hash,y),this._observableSections.set(y.hash,S))}}_process(m){this._activeTarget!==m&&(this._clearActiveClass(this._config.target),this._activeTarget=m,m.classList.add(ts),this._activateParents(m),nt.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:m}))}_activateParents(m){if(m.classList.contains("dropdown-item"))ut.findOne(".dropdown-toggle",m.closest(".dropdown")).classList.add(ts);else for(const y of ut.parents(m,".nav, .list-group"))for(const S of ut.prev(y,".nav-link, .nav-item > .nav-link, .list-group-item"))S.classList.add(ts)}_clearActiveClass(m){m.classList.remove(ts);const y=ut.find("[href].active",m);for(const S of y)S.classList.remove(ts)}static jQueryInterface(m){return this.each(function(){const y=po.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m]()}})}}nt.on(window,"load.bs.scrollspy.data-api",()=>{for(const x of ut.find('[data-bs-spy="scroll"]'))po.getOrCreateInstance(x)}),Gt(po);const ie="ArrowLeft",ho="ArrowRight",tl="ArrowUp",el="ArrowDown",Or="active",nl="show",ol='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Zo=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${ol}`;class bo extends Wn{constructor(m){super(m),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),nt.on(this._element,"keydown.bs.tab",y=>this._keydown(y)))}static get NAME(){return"tab"}show(){const m=this._element;if(this._elemIsActive(m))return;const y=this._getActiveElem(),S=y?nt.trigger(y,"hide.bs.tab",{relatedTarget:m}):null;nt.trigger(m,"show.bs.tab",{relatedTarget:y}).defaultPrevented||S&&S.defaultPrevented||(this._deactivate(y,m),this._activate(m,y))}_activate(m,y){m&&(m.classList.add(Or),this._activate(ut.getElementFromSelector(m)),this._queueCallback(()=>{"tab"===m.getAttribute("role")?(m.removeAttribute("tabindex"),m.setAttribute("aria-selected",!0),this._toggleDropDown(m,!0),nt.trigger(m,"shown.bs.tab",{relatedTarget:y})):m.classList.add(nl)},m,m.classList.contains("fade")))}_deactivate(m,y){m&&(m.classList.remove(Or),m.blur(),this._deactivate(ut.getElementFromSelector(m)),this._queueCallback(()=>{"tab"===m.getAttribute("role")?(m.setAttribute("aria-selected",!1),m.setAttribute("tabindex","-1"),this._toggleDropDown(m,!1),nt.trigger(m,"hidden.bs.tab",{relatedTarget:y})):m.classList.remove(nl)},m,m.classList.contains("fade")))}_keydown(m){if(![ie,ho,tl,el].includes(m.key))return;m.stopPropagation(),m.preventDefault();const y=[ho,el].includes(m.key),S=we(this._getChildren().filter(j=>!io(j)),m.target,y,!0);S&&(S.focus({preventScroll:!0}),bo.getOrCreateInstance(S).show())}_getChildren(){return ut.find(Zo,this._parent)}_getActiveElem(){return this._getChildren().find(m=>this._elemIsActive(m))||null}_setInitialAttributes(m,y){this._setAttributeIfNotExists(m,"role","tablist");for(const S of y)this._setInitialAttributesOnChild(S)}_setInitialAttributesOnChild(m){m=this._getInnerElement(m);const y=this._elemIsActive(m),S=this._getOuterElement(m);m.setAttribute("aria-selected",y),S!==m&&this._setAttributeIfNotExists(S,"role","presentation"),y||m.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(m,"role","tab"),this._setInitialAttributesOnTargetPanel(m)}_setInitialAttributesOnTargetPanel(m){const y=ut.getElementFromSelector(m);y&&(this._setAttributeIfNotExists(y,"role","tabpanel"),m.id&&this._setAttributeIfNotExists(y,"aria-labelledby",`${m.id}`))}_toggleDropDown(m,y){const S=this._getOuterElement(m);if(!S.classList.contains("dropdown"))return;const j=(A,Y)=>{const J=ut.findOne(A,S);J&&J.classList.toggle(Y,y)};j(".dropdown-toggle",Or),j(".dropdown-menu",nl),S.setAttribute("aria-expanded",y)}_setAttributeIfNotExists(m,y,S){m.hasAttribute(y)||m.setAttribute(y,S)}_elemIsActive(m){return m.classList.contains(Or)}_getInnerElement(m){return m.matches(Zo)?m:ut.findOne(Zo,m)}_getOuterElement(m){return m.closest(".nav-item, .list-group-item")||m}static jQueryInterface(m){return this.each(function(){const y=bo.getOrCreateInstance(this);if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m]()}})}}nt.on(document,"click.bs.tab",ol,function(x){["A","AREA"].includes(this.tagName)&&x.preventDefault(),io(this)||bo.getOrCreateInstance(this).show()}),nt.on(window,"load.bs.tab",()=>{for(const x of ut.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))bo.getOrCreateInstance(x)}),Gt(bo);const es="show",Us="showing",zc={animation:"boolean",autohide:"boolean",delay:"number"},Uc={animation:!0,autohide:!0,delay:5e3};class ns extends Wn{constructor(m,y){super(m,y),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Uc}static get DefaultType(){return zc}static get NAME(){return"toast"}show(){nt.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(es,Us),this._queueCallback(()=>{this._element.classList.remove(Us),nt.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(nt.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Us),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(Us,es),nt.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(es),super.dispose()}isShown(){return this._element.classList.contains(es)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(m,y){switch(m.type){case"mouseover":case"mouseout":this._hasMouseInteraction=y;break;case"focusin":case"focusout":this._hasKeyboardInteraction=y}if(y)return void this._clearTimeout();const S=m.relatedTarget;this._element===S||this._element.contains(S)||this._maybeScheduleHide()}_setListeners(){nt.on(this._element,"mouseover.bs.toast",m=>this._onInteraction(m,!0)),nt.on(this._element,"mouseout.bs.toast",m=>this._onInteraction(m,!1)),nt.on(this._element,"focusin.bs.toast",m=>this._onInteraction(m,!0)),nt.on(this._element,"focusout.bs.toast",m=>this._onInteraction(m,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(m){return this.each(function(){const y=ns.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m])throw new TypeError(`No method named "${m}"`);y[m](this)}})}}return ce(ns),Gt(ns),{Alert:jt,Button:Ur,Carousel:Tn,Collapse:qr,Dropdown:Xe,Modal:Jo,Offcanvas:Ge,Popover:qe,ScrollSpy:po,Tab:bo,Toast:ns,Tooltip:go}}),function(){"use strict";var On=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},$n=function(t){return{eq:t}},Ta=$n(function(t,e){return t===e}),Ra=function(t){return $n(function(e,n){if(e.length!==n.length)return!1;for(var o=e.length,r=0;r<o;r++)if(!t.eq(e[r],n[r]))return!1;return!0})},Da=function(t){return $n(function(e,n){var l,d,u,o=Object.keys(e),r=Object.keys(n);if(!(l=Ta,d=Ra(l),u=function(d){return Array.prototype.slice.call(d).sort(void 0)},$n(function(f,h){return d.eq(u(f),u(h))})).eq(o,r))return!1;for(var s=o.length,i=0;i<s;i++){var a=o[i];if(!t.eq(e[a],n[a]))return!1}return!0})},qn=$n(function(t,e){if(t===e)return!0;var n=On(t);return n===On(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?Ra(qn).eq(t,e):"object"===n&&Da(qn).eq(t,e))});const Ho=Object.getPrototypeOf,gr=(t,e,n)=>{var o;return!!n(t,e.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===e.name},io=t=>e=>(n=>{const o=typeof n;return null===n?"null":"object"===o&&Array.isArray(n)?"array":"object"===o&&gr(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(e)===t,xi=t=>e=>typeof e===t,Cs=t=>e=>t===e,$o=(t,e)=>Ae(t)&&gr(t,e,(n,o)=>Ho(n)===o),bt=io("string"),Ae=io("object"),yn=t=>$o(t,Object),Gt=io("array"),le=Cs(null),qo=xi("boolean"),we=Cs(void 0),ve=t=>null==t,et=t=>!ve(t),Vt=xi("function"),_n=xi("number"),pr=(t,e)=>{if(Gt(t)){for(let n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},Bt=()=>{},hr=(t,e)=>(...n)=>t(e.apply(null,n)),Ba=(t,e)=>n=>t(e(n)),ot=t=>()=>t,He=t=>t,mc=(t,e)=>t===e;function dt(t,...e){return(...n)=>{const o=e.concat(n);return t.apply(null,o)}}const zr=t=>e=>!t(e),fc=t=>()=>{throw new Error(t)},Ei=t=>t(),nt=t=>{t()},ne=ot(!1),ge=ot(!0);class w{constructor(e,n){this.tag=e,this.value=n}static some(e){return new w(!0,e)}static none(){return w.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?w.some(e(this.value)):w.none()}bind(e){return this.tag?e(this.value):w.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:w.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return et(e)?w.some(e):w.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}w.singletonNone=new w(!1);const Vn=Array.prototype.slice,ws=Array.prototype.indexOf,Wn=Array.prototype.push,ki=(t,e)=>ws.call(t,e),ut=(t,e)=>ki(t,e)>-1,ce=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},jt=(t,e)=>{const n=t.length,o=new Array(n);for(let r=0;r<n;r++)o[r]=e(t[r],r);return o},X=(t,e)=>{for(let n=0,o=t.length;n<o;n++)e(t[n],n)},Ur=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},xs=(t,e)=>{const n=[],o=[];for(let r=0,s=t.length;r<s;r++){const i=t[r];(e(i,r)?n:o).push(i)}return{pass:n,fail:o}},Et=(t,e)=>{const n=[];for(let o=0,r=t.length;o<r;o++){const s=t[o];e(s,o)&&n.push(s)}return n},Vo=(t,e,n)=>(Ur(t,(o,r)=>{n=e(n,o,r)}),n),Me=(t,e,n)=>(X(t,(o,r)=>{n=e(n,o,r)}),n),br=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++){const s=t[o];if(e(s,o))return w.some(s);if(n(s,o))break}return w.none()},de=(t,e)=>br(t,e,ne),Wo=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return w.some(n);return w.none()},Si=t=>{const e=[];for(let n=0,o=t.length;n<o;++n){if(!Gt(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);Wn.apply(e,t[n])}return e},Kn=(t,e)=>Si(jt(t,e)),Yn=(t,e)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},Es=t=>{const e=Vn.call(t,0);return e.reverse(),e},Ni=(t,e)=>Et(t,n=>!ut(e,n)),La=(t,e)=>{const n={};for(let o=0,r=t.length;o<r;o++){const s=t[o];n[String(s)]=e(s,o)}return n},Tn=(t,e)=>{const n=Vn.call(t,0);return n.sort(e),n},Hr=(t,e)=>e>=0&&e<t.length?w.some(t[e]):w.none(),Ie=t=>Hr(t,0),ao=t=>Hr(t,t.length-1),Fe=Vt(Array.from)?Array.from:t=>Vn.call(t),$r=(t,e)=>{for(let n=0;n<t.length;n++){const o=e(t[n],n);if(o.isSome())return o}return w.none()},an=Object.keys,qr=Object.hasOwnProperty,Mt=(t,e)=>{const n=an(t);for(let o=0,r=n.length;o<r;o++){const s=n[o];e(t[s],s)}},Ke=(t,e)=>Cn(t,(n,o)=>({k:o,v:e(n,o)})),Cn=(t,e)=>{const n={};return Mt(t,(o,r)=>{const s=e(o,r);n[s.k]=s.v}),n},$e=t=>(e,n)=>{t[n]=e},ks=(t,e,n,o)=>{Mt(t,(r,s)=>{(e(r,s)?n:o)(r,s)})},lo=(t,e)=>{const n={};return ks(t,e,$e(n),Bt),n},wo=(t,e)=>{const n=[];return Mt(t,(o,r)=>{n.push(e(o,r))}),n},Ko=t=>wo(t,He),Zt=(t,e)=>Ot(t,e)?w.from(t[e]):w.none(),Ot=(t,e)=>qr.call(t,e),Xn=(t,e)=>Ot(t,e)&&null!=t[e],Pa=t=>{const e={};return X(t,n=>{e[n]={}}),an(e)},Ai=t=>void 0!==t.length,Ss=Array.isArray,Ns=(t,e,n)=>{if(!t)return!1;if(n=n||t,Ai(t)){for(let o=0,r=t.length;o<r;o++)if(!1===e.call(n,t[o],o,t))return!1}else for(const o in t)if(Ot(t,o)&&!1===e.call(n,t[o],o,t))return!1;return!0},Oi=(t,e)=>{const n=[];return Ns(t,(o,r)=>{n.push(e(o,r,t))}),n},Vr=(t,e)=>{const n=[];return Ns(t,(o,r)=>{e&&!e(o,r,t)||n.push(o)}),n},As=(t,e,n,o)=>{let r=we(n)?t[0]:n;for(let s=0;s<t.length;s++)r=e.call(o,r,t[s],s);return r},Ma=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t))return o;return-1},Yo=t=>t[t.length-1],Xo=t=>{let e,n=!1;return(...o)=>(n||(n=!0,e=t.apply(null,o)),e)},Ia=()=>Ti(0,0),Ti=(t,e)=>({major:t,minor:e}),Wr={nu:Ti,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?Ia():((o,r)=>{const s=((a,l)=>{for(let c=0;c<a.length;c++){const d=a[c];if(d.test(l))return d}})(o,r);if(!s)return{major:0,minor:0};const i=a=>Number(r.replace(s,"$"+a));return Ti(i(1),i(2))})(t,n)},unknown:Ia},Gn=(t,e)=>{const n=String(e).toLowerCase();return de(t,o=>o.search(n))},ln=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,Go=(t,e)=>xe(t,e)?t.substring(e.length):t,se=(t,e,n=0,o)=>{const r=t.indexOf(e,n);return-1!==r&&(!!we(o)||r+e.length<=o)},xe=(t,e)=>ln(t,e,0),Os=(t,e)=>ln(t,e,t.length-e.length),Rn=t=>e=>e.replace(t,""),Dn=Rn(/^\s+|\s+$/g),Ri=Rn(/^\s+/g),vr=Rn(/\s+$/g),Bn=t=>t.length>0,Kr=t=>!Bn(t),xo=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?w.none():w.some(n)},Ts=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,co=t=>e=>se(e,t),Eo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>se(t,"edge/")&&se(t,"chrome")&&se(t,"safari")&&se(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ts],search:t=>se(t,"chrome")&&!se(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>se(t,"msie")||se(t,"trident")},{name:"Opera",versionRegexes:[Ts,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:co("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:co("firefox")},{name:"Safari",versionRegexes:[Ts,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(se(t,"safari")||se(t,"mobile/"))&&se(t,"applewebkit")}],Ru=[{name:"Windows",search:co("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>se(t,"iphone")||se(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:co("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:co("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:co("linux"),versionRegexes:[]},{name:"Solaris",search:co("sunos"),versionRegexes:[]},{name:"FreeBSD",search:co("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:co("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ko={browsers:ot(Eo),oses:ot(Ru)},Fa="Chromium",Di="Firefox",ja=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isEdge:o("Edge"),isChromium:o(Fa),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(Di),isSafari:o("Safari")}},gc=()=>ja({current:void 0,version:Wr.unknown()}),pc=ja,yr=(ot("Edge"),ot(Fa),ot("IE"),ot("Opera"),ot(Di),ot("Safari"),"Windows"),hc="Android",Ds="Solaris",Li="FreeBSD",bc="ChromeOS",Bs=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isWindows:o(yr),isiOS:o("iOS"),isAndroid:o(hc),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(Ds),isFreeBSD:o(Li),isChromeOS:o(bc)}},Du=()=>Bs({current:void 0,version:Wr.unknown()}),vc=Bs,Ua=(ot(yr),ot("iOS"),ot(hc),ot("Linux"),ot("macOS"),ot(Ds),ot(Li),ot(bc),t=>window.matchMedia(t).matches);let Ha=Xo(()=>((t,e,n)=>{const o=ko.browsers(),r=ko.oses(),s=e.bind(l=>{return c=o,$r(l.brands,u=>{const f=u.brand.toLowerCase();return de(c,h=>{var g;return f===(null===(g=h.brand)||void 0===g?void 0:g.toLowerCase())}).map(h=>({current:h.name,version:Wr.nu(parseInt(u.version,10),0)}))});var c}).orThunk(()=>{return Gn(o,c=t).map(d=>{const u=Wr.detect(d.versionRegexes,c);return{current:d.name,version:u}});var c}).fold(gc,pc),i=(l=r,c=t,Gn(l,c).map(d=>{const u=Wr.detect(d.versionRegexes,c);return{current:d.name,version:u}})).fold(Du,vc),a=((l,c,d,u)=>{const f=l.isiOS()&&!0===/ipad/i.test(d),h=l.isiOS()&&!f,g=l.isiOS()||l.isAndroid(),b=g||u("(pointer:coarse)"),p=f||!h&&g&&u("(min-device-width:768px)"),v=h||g&&!p,_=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(d),C=!v&&!p&&!_;return{isiPad:ot(f),isiPhone:ot(h),isTablet:ot(p),isPhone:ot(v),isTouch:ot(b),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:ot(_),isDesktop:ot(C)}})(i,s,t,n);var l,c;return{browser:s,os:i,deviceType:a}})(navigator.userAgent,w.from(navigator.userAgentData),Ua));const Ln=()=>Ha(),yc=navigator.userAgent,_r=Ln(),Pn=_r.browser,Qn=_r.os,Qo=_r.deviceType,Gr=-1!==yc.indexOf("Windows Phone"),zt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Pn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Pn.isIE(),windowsPhone:Gr,browser:{current:Pn.current,version:Pn.version,isChromium:Pn.isChromium,isEdge:Pn.isEdge,isFirefox:Pn.isFirefox,isIE:Pn.isIE,isOpera:Pn.isOpera,isSafari:Pn.isSafari},os:{current:Qn.current,version:Qn.version,isAndroid:Qn.isAndroid,isChromeOS:Qn.isChromeOS,isFreeBSD:Qn.isFreeBSD,isiOS:Qn.isiOS,isLinux:Qn.isLinux,isMacOS:Qn.isMacOS,isSolaris:Qn.isSolaris,isWindows:Qn.isWindows},deviceType:{isDesktop:Qo.isDesktop,isiPad:Qo.isiPad,isiPhone:Qo.isiPhone,isPhone:Qo.isPhone,isTablet:Qo.isTablet,isTouch:Qo.isTouch,isWebView:Qo.isWebView}},_c=/^\s*|\s*$/g,$a=t=>ve(t)?"":(""+t).replace(_c,""),qa=function(t,e,n,o){o=o||this,t&&(n&&(t=t[n]),Ns(t,(r,s)=>!1!==e.call(o,r,s,n)&&(qa(r,e,n,o),!0)))},Q={trim:$a,isArray:Ss,is:(t,e)=>e?!("array"!==e||!Ss(t))||typeof t===e:void 0!==t,toArray:t=>{if(Ss(t))return t;{const e=[];for(let n=0,o=t.length;n<o;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const o=bt(t)?t.split(e||","):t||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:Ns,map:Oi,grep:Vr,inArray:(t,e)=>{if(t)for(let n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},hasOwn:Ot,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(Ot(o,r)){const s=o[r];void 0!==s&&(t[r]=s)}}return t},walk:qa,resolve:(t,e=window)=>{const n=t.split(".");for(let o=0,r=n.length;o<r&&(e=e[n[o]]);o++);return e},explode:(t,e)=>Gt(t)?t:""===t?[]:Oi(t.split(e||","),$a),_addCacheSuffix:t=>{const e=zt.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},Cr=(t,e,n=mc)=>t.exists(o=>n(o,e)),je=(t,e,n)=>t.isSome()&&e.isSome()?w.some(n(t.getOrDie(),e.getOrDie())):w.none(),wr=(t,e)=>t?w.some(e):w.none(),Bu=typeof window<"u"?window:Function("return this;")(),Cc=(t,e)=>((n,o)=>{let r=o??Bu;for(let s=0;s<n.length&&null!=r;++s)r=r[n[s]];return r})(t.split("."),e),wc=Object.getPrototypeOf,Yt=t=>t.dom.nodeName.toLowerCase(),Ec=t=>t.dom.nodeType,Pi=t=>e=>Ec(e)===t,Ls=t=>Ye(t)&&(t=>{const e=Cc("ownerDocument.defaultView",t);return Ae(t)&&((n=e,((o,r)=>{const s=Cc("HTMLElement",r);if(null==s)throw new Error("HTMLElement not available on this browser");return s})(0,n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(wc(t).constructor.name));var n})(t.dom),Ye=Pi(1),cn=Pi(3),Lu=Pi(9),kc=Pi(11),Mi=t=>e=>Ye(e)&&Yt(e)===t,Va=(t,e,n)=>{if(!(bt(n)||qo(n)||_n(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},pe=(t,e,n)=>{Va(t.dom,e,n)},dn=(t,e)=>{const n=t.dom;Mt(e,(o,r)=>{Va(n,r,o)})},wn=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},Mn=(t,e)=>w.from(wn(t,e)),Ii=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Oe=(t,e)=>{t.dom.removeAttribute(e)},Sc=t=>Me(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),Wa=(t,e)=>{const n=wn(t,e);return void 0===n||""===n?[]:n.split(" ")},Ps=t=>void 0!==t.dom.classList,Nc=t=>Wa(t,"class"),Ac=(t,e)=>((n,o,r)=>{const s=Wa(n,o).concat([r]);return pe(n,o,s.join(" ")),!0})(t,"class",e),Oc=(t,e)=>((n,o,r)=>{const s=Et(Wa(n,o),i=>i!==r);return s.length>0?pe(n,o,s.join(" ")):Oe(n,o),!1})(t,"class",e),Xe=(t,e)=>{Ps(t)?t.dom.classList.add(e):Ac(t,e)},Ka=t=>{0===(Ps(t)?t.dom.classList:Nc(t)).length&&Oe(t,"class")},xr=(t,e)=>{Ps(t)?t.dom.classList.remove(e):Oc(t,e),Ka(t)},Ya=(t,e)=>Ps(t)&&t.dom.classList.contains(e),Ms=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},Qr=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,t),new Error(o)}return Ms(n.childNodes[0])},Ee=(t,e)=>{const n=(e||document).createElement(t);return Ms(n)},Er=(t,e)=>{const n=(e||document).createTextNode(t);return Ms(n)},T=Ms,Xa=(t,e)=>{const n=[],o=s=>(n.push(s),e(s));let r=e(t);do{r=r.bind(o)}while(r.isSome());return n},In=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},Ga=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,Ht=(t,e)=>t.dom===e.dom,uo=(t,e)=>{const n=t.dom,o=e.dom;return n!==o&&n.contains(o)},Fi=t=>T(t.dom.ownerDocument),mo=t=>Lu(t)?t:Fi(t),Jr=t=>T(mo(t).dom.defaultView),xn=t=>w.from(t.dom.parentNode).map(T),ji=t=>w.from(t.dom.parentElement).map(T),Qa=(t,e)=>{const n=Vt(e)?e:ne;let o=t.dom;const r=[];for(;null!=o.parentNode;){const s=o.parentNode,i=T(s);if(r.push(i),!0===n(i))break;o=s}return r},So=t=>w.from(t.dom.previousSibling).map(T),Is=t=>w.from(t.dom.nextSibling).map(T),Tc=t=>Es(Xa(t,So)),Jo=t=>Xa(t,Is),Se=t=>jt(t.dom.childNodes,T),kr=(t,e)=>w.from(t.dom.childNodes[e]).map(T),zi=t=>kr(t,0),Ui=t=>kr(t,t.dom.childNodes.length-1),Hi=t=>t.dom.childNodes.length,$i=t=>kc(t)&&et(t.dom.host),Rc=Vt(Element.prototype.attachShadow)&&Vt(Node.prototype.getRootNode),Mu=ot(Rc),Ge=Rc?t=>T(t.dom.getRootNode()):mo,Ja=t=>$i(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return T(n)})(mo(t)),Iu=t=>T(t.dom.host),Dc=t=>{if(Mu()&&et(t.target)){const e=T(t.target);if(Ye(e)&&Fu(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Ie(n)}}return w.from(t.target)},Fu=t=>et(t.dom.shadowRoot),Sr=t=>{const e=cn(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(o=>{const r=Ge(o);return $i(r)?w.some(r):w.none()})(T(e)).fold(()=>n.body.contains(e),Ba(Sr,Iu))};var Bc=(t,e,n,o,r)=>t(n,o)?w.some(n):Vt(r)&&r(n)?w.none():e(n,o,r);const No=(t,e,n)=>{let o=t.dom;const r=Vt(n)?n:ne;for(;o.parentNode;){o=o.parentNode;const s=T(o);if(e(s))return w.some(s);if(r(s))break}return w.none()},Nr=(t,e,n)=>Bc((o,r)=>r(o),No,t,e,n),Fs=(t,e,n)=>No(t,o=>In(o,e),n),js=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return Ga(r)?w.none():w.from(r.querySelector(n)).map(T)})(e,t),Ao=(t,e,n)=>Bc((o,r)=>In(o,r),Fs,t,e,n),Oo=(t,e=!1)=>{return Sr(t)?t.dom.isContentEditable:(n=t,Ao(n,"[contenteditable]")).fold(ot(e),o=>"true"===Lc(o));var n},Lc=t=>t.dom.contentEditable,Zr=t=>void 0!==t.style&&Vt(t.style.getPropertyValue),zs=(t,e,n)=>{if(!bt(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Zr(t)&&t.style.setProperty(e,n)},Za=(t,e,n)=>{zs(t.dom,e,n)},qi=(t,e)=>{const n=t.dom;Mt(e,(o,r)=>{zs(n,r,o)})},fo=(t,e)=>{const n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||Sr(t)?o:Pc(n,e)},Pc=(t,e)=>Zr(t)?t.style.getPropertyValue(e):"",go=(t,e)=>{const o=Pc(t.dom,e);return w.from(o).filter(r=>r.length>0)},Mc=t=>{const e={},n=t.dom;if(Zr(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);e[r]=n.style[r]}return e},Ic=(t,e)=>{var n,o;o=e,Zr(n=t.dom)&&n.style.removeProperty(o),Cr(Mn(t,"style").map(Dn),"")&&Oe(t,"style")},qe=(t,e)=>{xn(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},To=(t,e)=>{Is(t).fold(()=>{xn(t).each(n=>{fe(n,e)})},n=>{qe(n,e)})},ts=(t,e)=>{zi(t).fold(()=>{fe(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},fe=(t,e)=>{t.dom.appendChild(e.dom)},Fc=(t,e)=>{qe(t,e),fe(e,t)},Ar=(t,e)=>{X(e,n=>{fe(t,n)})},po=t=>{t.dom.textContent="",X(Se(t),e=>{ie(e)})},ie=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},ho=t=>{const e=Se(t);var n,o;e.length>0&&(n=t,X(o=e,(r,s)=>{To(0===s?n:o[s-1],r)})),ie(t)},tl=t=>jt(t,T),el=t=>t.dom.innerHTML,Or=(t,e)=>{const n=Fi(t).dom,o=T(n.createDocumentFragment()),r=((s,i)=>{const a=(i||document).createElement("div");return a.innerHTML=s,Se(T(a))})(e,n);Ar(o,r),po(t),fe(t,o)},nl=(t,e,n,o)=>{t.dom.removeEventListener(e,n,o)},ol=(t,e)=>({left:t,top:e,translate:(n,o)=>ol(t+n,e+o)}),Zo=ol,bo=(t,e)=>void 0!==t?t:void 0!==e?e:0,Vi=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?Zo(n.offsetLeft,n.offsetTop):Sr(t)?(o=>{const r=o.getBoundingClientRect();return Zo(r.left,r.top)})(e):Zo(0,0)},es=t=>{const e=void 0!==t?t.dom:document;return Zo(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},Us=(t,e)=>{Ln().browser.isSafari()&&Vt(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},zc=(t,e,n,o)=>({x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}),Uc=t=>{const e=void 0===t?window:t,o=es(T(e.document));return(r=>{const s=void 0===r?window:r;return Ln().browser.isFirefox()?w.none():w.from(s.visualViewport)})(e).fold(()=>{const r=e.document.documentElement;return zc(o.left,o.top,r.clientWidth,r.clientHeight)},r=>zc(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},ns=(t,e)=>{let n=[];return X(Se(t),o=>{e(o)&&(n=n.concat([o])),n=n.concat(ns(o,e))}),n},x=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return Ga(r)?[]:jt(r.querySelectorAll(n),T)})(e,t),m=(t,e,n)=>Fs(t,e,n).isSome();class y{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,o,r){if(e){if(!r&&e[n])return e[n];if(e!==this.rootNode){let s=e[o];if(s)return s;for(let i=e.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(s=i[o],s)return s}}}findPreviousNode(e,n){if(e){const o=e.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n)for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return o}const r=e.parentNode;if(r&&r!==this.rootNode)return r}}}const S=t=>e=>!!e&&e.nodeType===t,j=t=>!!t&&!Object.getPrototypeOf(t),A=S(1),Y=t=>{const e=t.toLowerCase();return n=>et(n)&&n.nodeName.toLowerCase()===e},J=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return ut(e,o)}return!1}},mt=(t,e)=>{const n=e.toLowerCase().split(" ");return o=>{if(A(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const i=r.getComputedStyle(o,null);if((i?i.getPropertyValue(t):null)===n[s])return!0}}return!1}},wt=t=>e=>A(e)&&e.hasAttribute(t),yt=t=>A(t)&&t.hasAttribute("data-mce-bogus"),pt=t=>A(t)&&"TABLE"===t.tagName,Ut=t=>e=>!(!A(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),Lt=J(["textarea","input"]),U=S(3),Pt=S(4),Ft=S(7),Kt=S(8),oe=S(9),qt=S(11),Dt=Y("br"),$t=Y("img"),It=Ut("true"),At=Ut("false"),te=J(["td","th"]),ae=J(["td","th","caption"]),re=J(["video","audio","object","embed"]),En=Y("li"),Fn=Y("details"),Ze=Y("summary"),Qt="\xa0",he=t=>"\ufeff"===t,jn=((t,e)=>{const n=o=>t(o)?w.from(o.dom.nodeValue):w.none();return{get:o=>{if(!t(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!t(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(cn),kn=t=>jn.get(t),Tr=t=>jn.getOption(t),ze=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),Xt=t=>{let e;return n=>(e=e||La(t,ge),Ot(e,Yt(n)))},ue=Xt(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),tn=t=>Ye(t)&&!ue(t),un=t=>Ye(t)&&"br"===Yt(t),Hs=Xt(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Wi=Xt(["ul","ol","dl"]),os=Xt(["li","dd","dt"]),Ki=Xt(["thead","tbody","tfoot"]),$s=Xt(["td","th"]),Yi=Xt(["pre","script","textarea","style"]),rl=Xt(ze),ju=t=>rl(t)||tn(t),qs=()=>{const t=Ee("br");return pe(t,"data-mce-bogus","1"),t},tr=t=>{po(t),fe(t,qs())},Hc=t=>{Ui(t).each(e=>{So(e).each(n=>{ue(t)&&un(e)&&ue(n)&&ie(e)})})},Te="\ufeff",Xi=he,Ro=t=>t.replace(/\uFEFF/g,""),Rr=A,Do=U,Dr=t=>(Do(t)&&(t=t.parentNode),Rr(t)&&t.hasAttribute("data-mce-caret")),Bo=t=>Do(t)&&Xi(t.data),en=t=>Dr(t)||Bo(t),sl=t=>t.firstChild!==t.lastChild||!Dt(t.firstChild),Gi=t=>{const e=t.container();return!!U(e)&&(e.data.charAt(t.offset())===Te||t.isAtStart()&&Bo(e.previousSibling))},Qi=t=>{const e=t.container();return!!U(e)&&(e.data.charAt(t.offset()-1)===Te||t.isAtEnd()&&Bo(e.nextSibling))},Vs=t=>Do(t)&&t.data[0]===Te,Ji=t=>Do(t)&&t.data[t.data.length-1]===Te,il=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];yt(r)&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Zi=t=>Dr(t.startContainer),al=It,Jx=At,Zx=Dt,tE=U,eE=J(["script","style","textarea"]),Op=J(["img","input","textarea","hr","iframe","video","audio","object","embed"]),nE=J(["table"]),oE=en,vo=t=>!oE(t)&&(tE(t)?!eE(t.parentNode):Op(t)||Zx(t)||nE(t)||zu(t)),zu=t=>{return!(A(e=t)&&"true"===e.getAttribute("unselectable"))&&Jx(t);var e},Tp=(t,e)=>vo(t)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(zu(r))return!1;if(al(r))return!0}return!0})(t,e),rE=/^[ \t\r\n]*$/,Ws=t=>rE.test(t),sE=t=>{for(const e of t)if(!he(e))return!1;return!0},Rp=t=>"\n"===t||"\r"===t,Dp=(t,e=4,n=!0,o=!0)=>{const r=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,r);var l;return Me(s,(a,l)=>{return-1!==" \f\t\v".indexOf(l)||l===Qt?a.pcIsSpace||""===a.str&&n||a.str.length===s.length-1&&o||(d=a.str.length+1)<(c=s).length&&d>=0&&Rp(c[d])?{pcIsSpace:!1,str:a.str+Qt}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:Rp(l),str:a.str+l};var c,d},{pcIsSpace:!1,str:""}).str},$c=(t,e)=>{return vo(t)&&(o=e,!(U(n=t)&&Ws(n.data)&&!((r,s)=>{const i=T(s),a=T(r);return m(a,"pre,code",dt(Ht,i))})(n,o)))||(n=>A(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||iE(t);var n,o},iE=wt("data-mce-bookmark"),aE=wt("data-mce-bogus"),lE=t=>A(t)&&"all"===t.getAttribute("data-mce-bogus"),_e=(t,e=!0)=>((n,o)=>{let r=0;if($c(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const i=new y(s,n);do{if(o){if(lE(s)){s=i.next(!0);continue}if(aE(s)){s=i.next();continue}}if(Dt(s))r++,s=i.next();else{if($c(s,n))return!1;s=i.next()}}while(s);return r<=1}})(t.dom,e),ll="data-mce-block",Uu=t=>{return(e=t,Et(an(e),n=>!/[A-Z]/.test(n))).join(",");var e},Bp=(t,e)=>et(e.querySelector(t))?(e.setAttribute(ll,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(ll),!1),Lp=(t,e)=>{const n=Uu(t.getTransparentElements()),o=Uu(t.getBlockElements());return Et(e.querySelectorAll(n),r=>Bp(o,r))},Pp=(t,e)=>{var n;const o=e?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(_e(T(r)))return void(null===(n=r.parentNode)||void 0===n||n.removeChild(r))},Hu=(t,e)=>{const n=Lp(t,e);var o,r,s;((t,e,n)=>{const o=t.getBlockElements(),r=T(e),s=a=>Yt(a)in o,i=a=>Ht(a,r);X(tl(n),a=>{No(a,s,i).each(l=>{const c=Et(Se(a),f=>s(f)&&!t.isValidChild(Yt(l),Yt(f)));if(c.length>0){const d=ji(l);X(c,u=>{No(u,s,i).each(f=>{((h,g)=>{const b=document.createRange(),p=h.parentNode;if(p){b.setStartBefore(h),b.setEndBefore(g);const v=b.extractContents();Pp(v,!0),b.setStartAfter(g),b.setEndAfter(h);const _=b.extractContents();Pp(_,!1),_e(T(v))||p.insertBefore(v,h),_e(T(g))||p.insertBefore(g,h),_e(T(_))||p.insertBefore(_,h),p.removeChild(h)}})(f.dom,u.dom)})}),d.each(u=>Lp(t,u.dom))}})})})(t,e,n),o=t,r=e,s=n,X([...s,...Ks(o,r)?[r]:[]],i=>X(x(T(i),i.nodeName.toLowerCase()),a=>{uE(o,a.dom)&&ho(a)}))},dE=(t,e)=>{if(qu(t,e)){const n=Uu(t.getBlockElements());Bp(n,e)}},$u=t=>t.hasAttribute(ll),qc=(t,e)=>Ot(t.getTransparentElements(),e),qu=(t,e)=>A(e)&&qc(t,e.nodeName),Ks=(t,e)=>qu(t,e)&&$u(e),uE=(t,e)=>qu(t,e)&&!$u(e),Mp=(t,e)=>1===e.type&&qc(t,e.name)&&bt(e.attr(ll)),mE=Ln().browser,Ip=t=>de(t,Ye),Fp=(t,e)=>t.children&&ut(t.children,e),jp=(t,e={})=>{let n=0;const o={},r=T(t),s=mo(r),i=l=>new Promise((c,d)=>{let u;const f=Q._addCacheSuffix(l),h=Zt(o,f).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));o[f]=h,h.count++;const g=(C,E)=>{X(C,nt),h.status=E,h.passed=[],h.failed=[],u&&(u.onload=null,u.onerror=null,u=null)},b=()=>g(h.passed,2),p=()=>g(h.failed,3);if(c&&h.passed.push(c),d&&h.failed.push(d),1===h.status)return;if(2===h.status)return void b();if(3===h.status)return void p();h.status=1;const v=Ee("link",s.dom);var _;dn(v,{rel:"stylesheet",type:"text/css",id:h.id}),e.contentCssCors&&pe(v,"crossOrigin","anonymous"),e.referrerPolicy&&pe(v,"referrerpolicy",e.referrerPolicy),u=v.dom,u.onload=b,u.onerror=p,_=v,fe(Ja(r),_),pe(v,"href",f)}),a=l=>{const c=Q._addCacheSuffix(l);Zt(o,c).each(d=>{0==--d.count&&(delete o[c],(u=>{const f=Ja(r);js(f,"#"+u).each(ie)})(d.id))})};return{load:i,loadAll:l=>Promise.allSettled(jt(l,c=>i(c).then(ot(c)))).then(c=>{const d=xs(c,u=>"fulfilled"===u.status);return d.fail.length>0?Promise.reject(jt(d.fail,u=>u.reason)):jt(d.pass,u=>u.value)}),unload:a,unloadAll:l=>{X(l,c=>{a(c)})},_setReferrerPolicy:l=>{e.referrerPolicy=l},_setContentCssCors:l=>{e.contentCssCors=l}}},zp=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const o=Ge(e).dom;return w.from(t.get(o)).getOrThunk(()=>{const r=jp(o,n);return t.set(o,r),r})}}})(),Up=(t,e)=>et(t)&&($c(t,e)||tn(T(t))),Hp=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Vu=(t,e,n)=>{var o;const r=n||e;if(A(e)&&Hp(e))return e;const s=e.childNodes;for(let i=s.length-1;i>=0;i--)Vu(t,s[i],r);if(A(e)){const i=e.childNodes;1===i.length&&Hp(i[0])&&(null===(o=e.parentNode)||void 0===o||o.insertBefore(i[0],e))}return qt(i=e)||oe(i)||$c(e,r)||(i=>!!A(i)&&i.childNodes.length>0)(e)||((i,a)=>U(i)&&i.data.length>0&&((l,c)=>{const d=new y(l,c).prev(!1),u=new y(l,c).next(!1),f=we(d)||Up(d,c),h=we(u)||Up(u,c);return f&&h})(i,a))(e,r)||t.remove(e),e;var i},fE=Q.makeMap,Vc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Wc=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gE=/[<>&\"\']/g,pE=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,hE={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Ys={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},bE={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},$p=(t,e)=>{const n={};if(t){const o=t.split(",");e=e||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],e));if(!Ys[s]){const i="&"+o[r+1]+";";n[s]=i,n[i]=s}}return n}},Wu=$p("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),qp=(t,e)=>t.replace(e?Vc:Wc,n=>Ys[n]||n),Vp=(t,e)=>t.replace(e?Vc:Wc,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Ys[n]||"&#"+n.charCodeAt(0)+";"),Ku=(t,e,n)=>{const o=n||Wu;return t.replace(e?Vc:Wc,r=>Ys[r]||o[r]||r)},rs={encodeRaw:qp,encodeAllRaw:t=>(""+t).replace(gE,e=>Ys[e]||e),encodeNumeric:Vp,encodeNamed:Ku,getEncodeFunc:(t,e)=>{const n=$p(e)||Wu,o=fE(t.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?Vc:Wc,i=>void 0!==Ys[i]?Ys[i]:void 0!==n[i]?n[i]:i.length>1?"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";":"&#"+i.charCodeAt(0)+";"):o.named?e?(r,s)=>Ku(r,s,n):Ku:o.numeric?Vp:qp},decode:t=>t.replace(pE,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):hE[n]||String.fromCharCode(n):bE[e]||Wu[e]||(o=>{const r=Ee("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(e))},Kc={},Yc={},vE={},ta=Q.makeMap,Qe=Q.each,Yu=Q.extend,Wp=Q.explode,yE=Q.inArray,We=(t,e)=>(t=Q.trim(t))?t.split(e||" "):[],Kp=(t,e={})=>{const n=ta(t," ",ta(t.toUpperCase()," "));return Yu(n,e)},Yp=t=>Kp("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Xu=(t,e)=>{if(t){const n={};return bt(t)&&(t={"*":t}),Qe(t,(o,r)=>{n[r]=n[r.toUpperCase()]="map"===e?ta(o,/[, ]/):Wp(o,/[, ]/)}),n}},ss=(t={})=>{var e;const n={},o={};let r=[];const s={},i={},a=(W,Z,ft)=>{const at=t[W];if(at)return ta(at,/[, ]/,ta(at.toUpperCase(),/[, ]/));{let Ct=Yc[W];return Ct||(Ct=Kp(Z,ft),Yc[W]=Ct),Ct}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",c=(W=>{const Z={};let ft,at,Ct,xt;const st=(Ce,me="",bn="")=>{const vn=We(bn),zo=We(Ce);let Co=zo.length;for(;Co--;){const Ue=We([ft,me].join(" "));Z[zo[Co]]={attributes:La(Ue,()=>({})),attributesOrder:Ue,children:La(vn,ot(vE))}}},Rt=(Ce,me)=>{const bn=We(Ce),vn=We(me);let zo=bn.length;for(;zo--;){const Co=Z[bn[zo]];for(let Ue=0,An=vn.length;Ue<An;Ue++)Co.attributes[vn[Ue]]={},Co.attributesOrder.push(vn[Ue])}};if(Kc[W])return Kc[W];if(ft="id accesskey class dir lang style tabindex title role",at="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",Ct="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==W&&(ft+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",at+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",Ct+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==W){ft+=" xml:lang";const Ce="acronym applet basefont big font strike tt";Ct=[Ct,Ce].join(" "),Qe(We(Ce),bn=>{st(bn,"",Ct)});const me="center dir isindex noframes";at=[at,me].join(" "),xt=[at,Ct].join(" "),Qe(We(me),bn=>{st(bn,"",xt)})}return xt=xt||[at,Ct].join(" "),st("html","manifest","head body"),st("head","","base command link meta noscript script style title"),st("title hr noscript br"),st("base","href target"),st("link","href rel media hreflang type sizes hreflang"),st("meta","name http-equiv content charset"),st("style","media type scoped"),st("script","src async defer type charset"),st("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",xt),st("dd div","",xt),st("address dt caption","","html4"===W?Ct:xt),st("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",Ct),st("blockquote","cite",xt),st("ol","reversed start type","li"),st("ul","","li"),st("li","value",xt),st("dl","","dt dd"),st("a","href target rel media hreflang type","html4"===W?Ct:xt),st("q","cite",Ct),st("ins del","cite datetime",xt),st("img","src sizes srcset alt usemap ismap width height"),st("iframe","src name width height",xt),st("embed","src type width height"),st("object","data type typemustmatch name usemap form width height",[xt,"param"].join(" ")),st("param","name value"),st("map","name",[xt,"area"].join(" ")),st("area","alt coords shape href target rel media hreflang type"),st("table","border","caption colgroup thead tfoot tbody tr"+("html4"===W?" col":"")),st("colgroup","span","col"),st("col","span"),st("tbody thead tfoot","","tr"),st("tr","","td th"),st("td","colspan rowspan headers",xt),st("th","colspan rowspan headers scope abbr",xt),st("form","accept-charset action autocomplete enctype method name novalidate target",xt),st("fieldset","disabled form name",[xt,"legend"].join(" ")),st("label","form for",Ct),st("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),st("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===W?xt:Ct),st("select","disabled form multiple name required size","option optgroup"),st("optgroup","disabled label","option"),st("option","disabled label selected value"),st("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),st("menu","type label",[xt,"li"].join(" ")),st("noscript","",xt),"html4"!==W&&(st("wbr"),st("ruby","",[Ct,"rt rp"].join(" ")),st("figcaption","",xt),st("mark rt rp summary bdi","",Ct),st("canvas","width height",xt),st("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[xt,"track source"].join(" ")),st("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[xt,"track source"].join(" ")),st("picture","","img source"),st("source","src srcset type media sizes"),st("track","kind src srclang label default"),st("datalist","",[Ct,"option"].join(" ")),st("article section nav aside main header footer","",xt),st("hgroup","","h1 h2 h3 h4 h5 h6"),st("figure","",[xt,"figcaption"].join(" ")),st("time","datetime",Ct),st("dialog","open",xt),st("command","type label icon disabled checked radiogroup command"),st("output","for form name",Ct),st("progress","value max",Ct),st("meter","value min max low high optimum",Ct),st("details","open",[xt,"summary"].join(" ")),st("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==W&&(Rt("script","language xml:space"),Rt("style","xml:space"),Rt("object","declare classid code codebase codetype archive standby align border hspace vspace"),Rt("embed","align name hspace vspace"),Rt("param","valuetype type"),Rt("a","charset name rev shape coords"),Rt("br","clear"),Rt("applet","codebase archive code object alt name width height align hspace vspace"),Rt("img","name longdesc align border hspace vspace"),Rt("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Rt("font basefont","size color face"),Rt("input","usemap align"),Rt("select"),Rt("textarea"),Rt("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Rt("ul","type compact"),Rt("li","type"),Rt("ol dl menu dir","compact"),Rt("pre","width xml:space"),Rt("hr","align noshade size width"),Rt("isindex","prompt"),Rt("table","summary width frame rules cellspacing cellpadding align bgcolor"),Rt("col","width align char charoff valign"),Rt("colgroup","width align char charoff valign"),Rt("thead","align char charoff valign"),Rt("tr","align char charoff valign bgcolor"),Rt("th","axis align char charoff valign nowrap bgcolor width height"),Rt("form","accept"),Rt("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Rt("tfoot","align char charoff valign"),Rt("tbody","align char charoff valign"),Rt("area","nohref"),Rt("body","background bgcolor text link vlink alink")),"html4"!==W&&(Rt("input button select textarea","autofocus"),Rt("input textarea","placeholder"),Rt("a","download"),Rt("link script img","crossorigin"),Rt("img","loading"),Rt("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==W&&X([Z.video,Z.audio],Ce=>{delete Ce.children.audio,delete Ce.children.video}),Qe(We("a form meter progress dfn"),Ce=>{Z[Ce]&&delete Z[Ce].children[Ce]}),delete Z.caption.children.table,delete Z.script,Kc[W]=Z,Z})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const d=Xu(t.valid_styles),u=Xu(t.invalid_styles,"map"),f=Xu(t.valid_classes,"map"),h=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",_=a("non_empty_elements",v+" pre",b),C=a("move_caret_before_on_enter_elements",v+" table",b),E=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),k=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",E),N=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),O=a("transparent_elements","a ins del canvas map");Qe("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),W=>{i[W]=new RegExp("</"+W+"[^>]*>","gi")});const M=W=>new RegExp("^"+W.replace(/([?+*])/g,".$1")+"$"),$=W=>{const Z=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,ft=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,at=/[*?+]/;if(W){const Ct=We(W,",");let xt,st;n["@"]&&(xt=n["@"].attributes,st=n["@"].attributesOrder);for(let Rt=0,Ce=Ct.length;Rt<Ce;Rt++){let me=Z.exec(Ct[Rt]);if(me){const bn=me[1],vn=me[2],zo=me[3],Co=me[5],Ue={},An=[],be={attributes:Ue,attributesOrder:An};if("#"===bn&&(be.paddEmpty=!0),"-"===bn&&(be.removeEmpty=!0),"!"===me[4]&&(be.removeEmptyAttrs=!0),xt&&(Mt(xt,(mr,ys)=>{Ue[ys]=mr}),st&&An.push(...st)),Co){const mr=We(Co,"|");for(let ys=0,Au=mr.length;ys<Au;ys++)if(me=ft.exec(mr[ys]),me){const fr={},dc=me[1],Un=me[2].replace(/[\\:]:/g,":"),_s=me[3],Hn=me[4];if("!"===dc&&(be.attributesRequired=be.attributesRequired||[],be.attributesRequired.push(Un),fr.required=!0),"-"===dc){delete Ue[Un],An.splice(yE(An,Un),1);continue}if(_s&&("="===_s&&(be.attributesDefault=be.attributesDefault||[],be.attributesDefault.push({name:Un,value:Hn}),fr.defaultValue=Hn),"~"===_s&&(be.attributesForced=be.attributesForced||[],be.attributesForced.push({name:Un,value:Hn}),fr.forcedValue=Hn),"<"===_s&&(fr.validValues=ta(Hn,"?"))),at.test(Un)){const Ci=fr;be.attributePatterns=be.attributePatterns||[],Ci.pattern=M(Un),be.attributePatterns.push(Ci)}else Ue[Un]||An.push(Un),Ue[Un]=fr}}if(xt||"@"!==vn||(xt=Ue,st=An),zo&&(be.outputName=vn,n[zo]=be),at.test(vn)){const mr=be;mr.pattern=M(vn),r.push(mr)}else n[vn]=be}}}},z=W=>{r=[],X(an(n),Z=>{delete n[Z]}),$(W),Qe(c,(Z,ft)=>{o[ft]=Z.children})},R=W=>{const Z=/^(~)?(.+)$/;W&&(delete Yc.text_block_elements,delete Yc.block_elements,Qe(We(W,","),ft=>{const at=Z.exec(ft);if(at){const Ct="~"===at[1],xt=Ct?"span":"div",st=at[2];if(o[st]=o[xt],s[st]=xt,_[st.toUpperCase()]={},_[st]={},Ct||(k[st.toUpperCase()]={},k[st]={}),!n[st]){let Rt=n[xt];Rt=Yu({},Rt),delete Rt.removeEmptyAttrs,delete Rt.removeEmpty,n[st]=Rt}Qe(o,(Rt,Ce)=>{Rt[xt]&&(o[Ce]=Rt=Yu({},o[Ce]),Rt[st]=Rt[xt])})}}))},P=W=>{const Z=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Kc[l],W&&Qe(We(W,","),ft=>{const at=Z.exec(ft);if(at){const Ct=at[1];let xt;xt=Ct?o[at[2]]:o[at[2]]={"#comment":{}},xt=o[at[2]],Qe(We(at[3],"|"),st=>{"-"===Ct?delete xt[st]:xt[st]={}})}})},B=W=>{const Z=n[W];if(Z)return Z;let ft=r.length;for(;ft--;){const at=r[ft];if(at.pattern.test(W))return at}};t.valid_elements?z(t.valid_elements):(Qe(c,(W,Z)=>{n[Z]={attributes:W.attributes,attributesOrder:W.attributesOrder},o[Z]=W.children}),Qe(We("strong/b em/i"),W=>{const Z=We(W,"/");n[Z[1]].outputName=Z[0]}),Qe(N,(W,Z)=>{n[Z]&&(t.padd_empty_block_inline_children&&(n[Z].paddInEmptyBlock=!0),n[Z].removeEmpty=!0)}),Qe(We("ol ul blockquote a table tbody"),W=>{n[W]&&(n[W].removeEmpty=!0)}),Qe(We("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),W=>{n[W]&&(n[W].paddEmpty=!0)}),Qe(We("span"),W=>{n[W].removeEmptyAttrs=!0})),R(t.custom_elements),P(t.valid_children),$(t.extended_valid_elements),P("+ol[ul|ol],+ul[ul|ol]"),Qe({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(W,Z)=>{n[Z]&&(n[Z].parentsRequired=We(W))}),t.invalid_elements&&Qe(Wp(t.invalid_elements),W=>{n[W]&&delete n[W]}),B("span")||$("span[!data-mce-type|*]");const I=ot(d),tt=ot(u),G=ot(f),ht=ot(p),rt=ot(k),kt=ot(E),Nt=ot(N),it=ot(Object.seal(b)),gt=ot(g),_t=ot(_),D=ot(C),L=ot(h),q=ot(O),K=ot(Object.seal(i)),V=ot(s);return{type:l,children:o,elements:n,getValidStyles:I,getValidClasses:G,getBlockElements:rt,getInvalidStyles:tt,getVoidElements:it,getTextBlockElements:kt,getTextInlineElements:Nt,getBoolAttrs:ht,getElementRule:B,getSelfClosingElements:gt,getNonEmptyElements:_t,getMoveCaretBeforeOnEnterElements:D,getWhitespaceElements:L,getTransparentElements:q,getSpecialElements:K,isValidChild:(W,Z)=>{const ft=o[W.toLowerCase()];return!(!ft||!ft[Z.toLowerCase()])},isValid:(W,Z)=>{const ft=B(W);if(ft){if(!Z)return!0;{if(ft.attributes[Z])return!0;const at=ft.attributePatterns;if(at){let Ct=at.length;for(;Ct--;)if(at[Ct].pattern.test(Z))return!0}}}return!1},getCustomElements:V,addValidElements:$,setValidElements:z,addCustomElements:R,addValidChildren:P}},Gu=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let i,a;e&&(i=e.getValidStyles(),a=e.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let u=0;u<c.length;u++)s[c[u]]="\ufeff"+u,s["\ufeff"+u]=c[u];const d={parse:u=>{const f={};let h=!1;const g=t.url_converter,b=t.url_converter_scope||d,p=(z,R,P)=>{const B=f[z+"-top"+R];if(!B)return;const I=f[z+"-right"+R];if(!I)return;const tt=f[z+"-bottom"+R];if(!tt)return;const G=f[z+"-left"+R];if(!G)return;const ht=[B,I,tt,G];let rt=ht.length-1;for(;rt--&&ht[rt]===ht[rt+1];);rt>-1&&P||(f[z+R]=-1===rt?ht[0]:ht.join(" "),delete f[z+"-top"+R],delete f[z+"-right"+R],delete f[z+"-bottom"+R],delete f[z+"-left"+R])},v=z=>{const R=f[z];if(!R)return;const P=R.split(" ");let B=P.length;for(;B--;)if(P[B]!==P[0])return!1;return f[z]=P[0],!0},_=z=>(h=!0,s[z]),C=(z,R)=>(h&&(z=z.replace(/\uFEFF[0-9]/g,P=>s[P])),R||(z=z.replace(/\\([\'\";:])/g,"$1")),z),E=z=>String.fromCharCode(parseInt(z.slice(1),16)),k=z=>z.replace(/\\[0-9a-f]+/gi,E),N=(z,R,P,B,I,tt)=>{if(I=I||tt)return"'"+(I=C(I)).replace(/\'/g,"\\'")+"'";if(R=C(R||P||B||""),!t.allow_script_urls){const G=R.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(G)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(G))return""}return g&&(R=g.call(b,R,"style")),"url('"+R.replace(/\'/g,"\\'")+"')"};if(u){let z;for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,_).replace(/\"[^\"]+\"|\'[^\']+\'/g,R=>R.replace(/[;:]/g,_));z=o.exec(u);){o.lastIndex=z.index+z[0].length;let R=z[1].replace(r,"").toLowerCase(),P=z[2].replace(r,"");if(R&&P){if(R=k(R),P=k(P),-1!==R.indexOf("\ufeff")||-1!==R.indexOf('"')||!t.allow_script_urls&&("behavior"===R||/expression\s*\(|\/\*|\*\//.test(P)))continue;"font-weight"===R&&"700"===P?P="bold":"color"!==R&&"background-color"!==R||(P=P.toLowerCase()),P=P.replace(n,N),f[R]=h?C(P,!0):P}}p("border","",!0),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),M="border-style",$="border-color",v(O="border-width")&&v(M)&&v($)&&(f.border=f[O]+" "+f[M]+" "+f[$],delete f[O],delete f[M],delete f[$]),"medium none"===f.border&&delete f.border,"none"===f["border-image"]&&delete f["border-image"]}var O,M,$;return f},serialize:(u,f)=>{let h="";const g=(b,p)=>{const v=p[b];if(v)for(let _=0,C=v.length;_<C;_++){const E=v[_],k=u[E];k&&(h+=(h.length>0?" ":"")+E+": "+k+";")}};return f&&i?(g("*",i),g(f,i)):Mt(u,(b,p)=>{b&&((v,_)=>{if(!a||!_)return!0;let C=a["*"];return!(C&&C[v]||(C=a[_],C&&C[v]))})(p,f)&&(h+=(h.length>0?" ":"")+p+": "+b+";")}),h}};return d},_E={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Xp=(t,e)=>{const n=e??{};for(const o in t)Ot(_E,o)||(n[o]=t[o]);return et(t.composedPath)&&(n.composedPath=()=>t.composedPath()),n},Qu=(t,e,n,o)=>{var r;const s=Xp(e,o);return s.type=t,ve(s.target)&&(s.target=null!==(r=s.srcElement)&&void 0!==r?r:n),(ve((i=e).preventDefault)||(a=i)instanceof Event||Vt(a.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=ge,Vt(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=ge,Vt(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=ge,s.stopPropagation()},(i=>i.isDefaultPrevented===ge||i.isDefaultPrevented===ne)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?ge:ne,s.isPropagationStopped=!0===s.cancelBubble?ge:ne,s.isImmediatePropagationStopped=ne)),s;var i,a},CE=/^(?:mouse|contextmenu)|click/,Ju=(t,e,n,o)=>{t.addEventListener(e,n,o||!1)},Xc=(t,e,n,o)=>{t.removeEventListener(e,n,o||!1)},cl=(t,e)=>{const n=Qu(t.type,t,document,e);if(et(o=t)&&CE.test(o.type)&&we(t.pageX)&&!we(t.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,i=n;i.pageX=t.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),i.pageY=t.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}var o;return n},wE=(t,e,n)=>{const o=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const s=()=>{Xc(t,"DOMContentLoaded",s),Xc(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():Ju(t,"DOMContentLoaded",s),n.domLoaded||Ju(t,"load",s)};class Xs{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,o,r){const s=this;let i;const a=window,l=f=>{s.executeHandlers(cl(f||a.event),c)};if(!e||U(e)||Kt(e))return o;let c;e[s.expando]?c=e[s.expando]:(c=s.count++,e[s.expando]=c,s.events[c]={}),r=r||e;const d=n.split(" ");let u=d.length;for(;u--;){let f=d[u],h=l,g=!1,b=!1;"DOMContentLoaded"===f&&(f="ready"),s.domLoaded&&"ready"===f&&"complete"===e.readyState?o.call(r,cl({type:f})):(s.hasFocusIn||"focusin"!==f&&"focusout"!==f||(g=!0,b="focusin"===f?"focus":"blur",h=p=>{const v=cl(p||a.event);v.type="focus"===v.type?"focusin":"focusout",s.executeHandlers(v,c)}),i=s.events[c][f],i?"ready"===f&&s.domLoaded?o(cl({type:f})):i.push({func:o,scope:r}):(s.events[c][f]=i=[{func:o,scope:r}],i.fakeName=b,i.capture=g,i.nativeHandler=h,"ready"===f?wE(e,h,s):Ju(e,b||f,h,g)))}return e=i=null,o}unbind(e,n,o){if(!e||U(e)||Kt(e))return this;const r=e[this.expando];if(r){let s=this.events[r];if(n){const i=n.split(" ");let a=i.length;for(;a--;){const l=i[a],c=s[l];if(c){if(o){let d=c.length;for(;d--;)if(c[d].func===o){const u=c.nativeHandler,f=c.fakeName,h=c.capture,g=c.slice(0,d).concat(c.slice(d+1));g.nativeHandler=u,g.fakeName=f,g.capture=h,s[l]=g}}o&&0!==c.length||(delete s[l],Xc(e,c.fakeName||l,c.nativeHandler,c.capture))}}}else Mt(s,(i,a)=>{Xc(e,i.fakeName||a,i.nativeHandler,i.capture)}),s={};for(const i in s)if(Ot(s,i))return this;delete this.events[r];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,o){return this.dispatch(e,n,o)}dispatch(e,n,o){if(!e||U(e)||Kt(e))return this;const r=cl({type:n,target:e},o);do{const s=e[this.expando];s&&this.executeHandlers(r,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){if(!e||U(e)||Kt(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let o=n.length;for(;o--;)(e=n[o])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const o=this.events[n],r=o&&o[e.type];if(r)for(let s=0,i=r.length;s<i;s++){const a=r[s];if(a&&!1===a.func.call(a.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Xs.Event=new Xs;const Zu=Q.each,xE=Q.grep,tm="data-mce-style",EE=Q.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),dl=(t,e,n)=>{ve(n)||""===n?Oe(t,e):pe(t,e,n)},Gp=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),ea=(t,e)=>{let n=0;if(t)for(let o=t.nodeType,r=t.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!e||!U(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},Qp=(t,e)=>{const n=wn(e,"style"),o=t.serialize(t.parse(n),Yt(e));dl(e,tm,o)},Jp=(t,e,n)=>{const o=Gp(e);var r,s;ve(n)||""===n?Ic(t,o):Za(t,o,(s=o,_n(r=n)?Ot(EE,s)?r+"":r+"px":r))},Jt=(t,e={})=>{const n={},o=window,r={};let s=0;const i=zp.forElement(T(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),a=[],l=e.schema?e.schema:ss({}),c=Gu({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),d=e.ownEvents?new Xs:Xs.Event,u=l.getBlockElements(),f=D=>D&&t&&bt(D)?t.getElementById(D):D,h=D=>{const L=f(D);return et(L)?T(L):null},g=(D,L,q="")=>{let K;const V=h(D);if(et(V)&&Ye(V)){const W=_t[L];K=W&&W.get?W.get(V.dom,L):wn(V,L)}return et(K)?K:q},b=D=>{const L=f(D);return ve(L)?[]:L.attributes},p=(D,L,q)=>{M(D,K=>{if(A(K)){const V=T(K),W=""===q?null:q,Z=wn(V,L),ft=_t[L];ft&&ft.set?ft.set(V.dom,W,L):dl(V,L,W),Z!==W&&e.onSetAttrib&&e.onSetAttrib({attrElm:V.dom,attrName:L,attrValue:W})}})},v=()=>e.root_element||t.body,_=(D,L)=>((q,K,V)=>{let W=0,Z=0;const ft=q.ownerDocument;if(V=V||q,K){if(V===q&&K.getBoundingClientRect&&"static"===fo(T(q),"position")){const Ct=K.getBoundingClientRect();return W=Ct.left+(ft.documentElement.scrollLeft||q.scrollLeft)-ft.documentElement.clientLeft,Z=Ct.top+(ft.documentElement.scrollTop||q.scrollTop)-ft.documentElement.clientTop,{x:W,y:Z}}let at=K;for(;at&&at!==V&&at.nodeType&&!Fp(at,V);)W+=at.offsetLeft||0,Z+=at.offsetTop||0,at=at.offsetParent;for(at=K.parentNode;at&&at!==V&&at.nodeType&&!Fp(at,V);)W-=at.scrollLeft||0,Z-=at.scrollTop||0,at=at.parentNode;Z+=(Ct=T(K),mE.isFirefox()&&"table"===Yt(Ct)?Ip(Se(Ct)).filter(xt=>"caption"===Yt(xt)).bind(xt=>Ip(Jo(xt)).map(st=>st.dom.offsetTop<=xt.dom.offsetTop?-xt.dom.offsetHeight:0)).getOr(0):0)}var Ct;return{x:W,y:Z}})(t.body,f(D),L),C=(D,L,q)=>{const K=f(D);if(!ve(K)&&A(K))return q?fo(T(K),Gp(L)):("float"===(L=L.replace(/-(\D)/g,(V,W)=>W.toUpperCase()))&&(L="cssFloat"),K.style?K.style[L]:void 0)},E=D=>{const L=f(D);if(!L)return{w:0,h:0};let q=C(L,"width"),K=C(L,"height");return q&&-1!==q.indexOf("px")||(q="0"),K&&-1!==K.indexOf("px")||(K="0"),{w:parseInt(q,10)||L.offsetWidth||L.clientWidth,h:parseInt(K,10)||L.offsetHeight||L.clientHeight}},k=(D,L)=>{if(!D)return!1;const q=Gt(D)?D:[D];return ce(q,K=>In(T(K),L))},N=(D,L,q,K)=>{const V=[];let W=f(D);K=void 0===K;const Z=q||("BODY"!==v().nodeName?v().parentNode:null);if(bt(L))if("*"===L)L=A;else{const ft=L;L=at=>k(at,ft)}for(;W&&!(W===Z||ve(W.nodeType)||oe(W)||qt(W));){if(!L||L(W)){if(!K)return[W];V.push(W)}W=W.parentNode}return K?V:null},O=(D,L,q)=>{let K=L;if(D){bt(L)&&(K=V=>k(V,L));for(let V=D[q];V;V=V[q])if(Vt(K)&&K(V))return V}return null},M=function(D,L,q){const K=q??this;if(Gt(D)){const V=[];return Zu(D,(W,Z)=>{const ft=f(W);ft&&V.push(L.call(K,ft,Z))}),V}{const V=f(D);return!!V&&L.call(K,V)}},$=(D,L)=>{M(D,q=>{Mt(L,(K,V)=>{p(q,V,K)})})},z=(D,L)=>{M(D,q=>{const K=T(q);Or(K,L)})},R=(D,L,q,K,V)=>M(D,W=>{const Z=bt(L)?t.createElement(L):L;return et(q)&&$(Z,q),K&&(!bt(K)&&K.nodeType?Z.appendChild(K):bt(K)&&z(Z,K)),V?Z:W.appendChild(Z)}),P=(D,L,q)=>R(t.createElement(D),D,L,q,!0),B=rs.encodeAllRaw,I=(D,L)=>M(D,q=>{const K=T(q);return L&&X(Se(K),V=>{cn(V)&&0===V.dom.length?ie(V):qe(K,V)}),ie(K),K.dom}),tt=(D,L,q)=>{M(D,K=>{if(A(K)){const V=T(K),W=L.split(" ");X(W,Z=>{var ft,at,xt,st;et(q)?(q?Xe:xr)(V,Z):(at=Z,Ps(ft=V)?ft.dom.classList.toggle(at):(st=at,ut(Nc(xt=ft),st)?Oc(xt,st):Ac(xt,st)),Ka(ft))})}})},G=(D,L,q)=>M(L,K=>{var V;const W=Gt(L)?D.cloneNode(!0):D;return q&&Zu(xE(K.childNodes),Z=>{W.appendChild(Z)}),null===(V=K.parentNode)||void 0===V||V.replaceChild(W,K),K}),ht=D=>{if(A(D)){const L="a"===D.nodeName.toLowerCase()&&!g(D,"href")&&g(D,"id");if(g(D,"name")||g(D,"data-mce-bookmark")||L)return!0}return!1},rt=()=>t.createRange(),kt=(D,L,q,K)=>{if(Gt(D)){let V=D.length;const W=[];for(;V--;)W[V]=kt(D[V],L,q,K);return W}return!e.collect||D!==t&&D!==o||a.push([D,L,q,K]),d.bind(D,L,q,K||gt)},Nt=(D,L,q)=>{if(Gt(D)){let K=D.length;const V=[];for(;K--;)V[K]=Nt(D[K],L,q);return V}if(a.length>0&&(D===t||D===o)){let K=a.length;for(;K--;){const[V,W,Z]=a[K];D!==V||L&&L!==W||q&&q!==Z||d.unbind(V,W,Z)}}return d.unbind(D,L,q)},it=D=>{if(D&&A(D)){const L=D.getAttribute("data-mce-contenteditable");return L&&"inherit"!==L?L:"inherit"!==D.contentEditable?D.contentEditable:null}return null},gt={doc:t,settings:e,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:i,boundEvents:a,styles:c,schema:l,events:d,isBlock:D=>bt(D)?Ot(u,D):A(D)&&(Ot(u,D.nodeName)||Ks(l,D)),root:null,clone:(D,L)=>D.cloneNode(L),getRoot:v,getViewPort:D=>{const L=Uc(D);return{x:L.x,y:L.y,w:L.width,h:L.height}},getRect:D=>{const L=f(D),q=_(L),K=E(L);return{x:q.x,y:q.y,w:K.w,h:K.h}},getSize:E,getParent:(D,L,q)=>{const K=N(D,L,q,!1);return K&&K.length>0?K[0]:null},getParents:N,get:f,getNext:(D,L)=>O(D,L,"nextSibling"),getPrev:(D,L)=>O(D,L,"previousSibling"),select:(D,L)=>{var q,K;const V=null!==(K=null!==(q=f(L))&&void 0!==q?q:e.root_element)&&void 0!==K?K:t;return Vt(V.querySelectorAll)?Fe(V.querySelectorAll(D)):[]},is:k,add:R,create:P,createHTML:(D,L,q="")=>{let K="<"+D;for(const V in L)Xn(L,V)&&(K+=" "+V+'="'+B(L[V])+'"');return Kr(q)&&Ot(l.getVoidElements(),D)?K+" />":K+">"+q+"</"+D+">"},createFragment:D=>{const L=t.createElement("div"),q=t.createDocumentFragment();let K;for(q.appendChild(L),D&&(L.innerHTML=D);K=L.firstChild;)q.appendChild(K);return q.removeChild(L),q},remove:I,setStyle:(D,L,q)=>{M(D,K=>{const V=T(K);Jp(V,L,q),e.update_styles&&Qp(c,V)})},getStyle:C,setStyles:(D,L)=>{M(D,q=>{const K=T(q);Mt(L,(V,W)=>{Jp(K,W,V)}),e.update_styles&&Qp(c,K)})},removeAllAttribs:D=>M(D,L=>{const q=L.attributes;for(let K=q.length-1;K>=0;K--)L.removeAttributeNode(q.item(K))}),setAttrib:p,setAttribs:$,getAttrib:g,getPos:_,parseStyle:D=>c.parse(D),serializeStyle:(D,L)=>c.serialize(D,L),addStyle:D=>{if(gt!==Jt.DOM&&t===document){if(n[D])return;n[D]=!0}let L=t.getElementById("mceDefaultStyles");if(!L){L=t.createElement("style"),L.id="mceDefaultStyles",L.type="text/css";const q=t.head;q.firstChild?q.insertBefore(L,q.firstChild):q.appendChild(L)}L.styleSheet?L.styleSheet.cssText+=D:L.appendChild(t.createTextNode(D))},loadCSS:D=>{D||(D=""),X(D.split(","),L=>{r[L]=!0,i.load(L).catch(Bt)})},addClass:(D,L)=>{tt(D,L,!0)},removeClass:(D,L)=>{tt(D,L,!1)},hasClass:(D,L)=>{const q=h(D),K=L.split(" ");return et(q)&&Yn(K,V=>Ya(q,V))},toggleClass:tt,show:D=>{M(D,L=>Ic(T(L),"display"))},hide:D=>{M(D,L=>Za(T(L),"display","none"))},isHidden:D=>{const L=h(D);return et(L)&&Cr(go(L,"display"),"none")},uniqueId:D=>(D||"mce_")+s++,setHTML:z,getOuterHTML:D=>{const L=h(D);return et(L)?A(L.dom)?L.dom.outerHTML:(q=>{const K=Ee("div"),V=T(q.dom.cloneNode(!0));return fe(K,V),el(K)})(L):""},setOuterHTML:(D,L)=>{M(D,q=>{A(q)&&(q.outerHTML=L)})},decode:rs.decode,encode:B,insertAfter:(D,L)=>{const q=f(L);return M(D,K=>{const V=q?.parentNode,W=q?.nextSibling;return V&&(W?V.insertBefore(K,W):V.appendChild(K)),K})},replace:G,rename:(D,L)=>{if(D.nodeName!==L.toUpperCase()){const q=P(L);return Zu(b(D),K=>{p(q,K.nodeName,g(D,K.nodeName))}),G(q,D,!0),q}return D},findCommonAncestor:(D,L)=>{let q=D;for(;q;){let K=L;for(;K&&q!==K;)K=K.parentNode;if(q===K)break;q=q.parentNode}return!q&&D.ownerDocument?D.ownerDocument.documentElement:q},run:M,getAttribs:b,isEmpty:(D,L,q)=>{let K=0;if(ht(D))return!1;const V=D.firstChild;if(V){const W=new y(V,D),Z=l?l.getWhitespaceElements():{},ft=L||(l?l.getNonEmptyElements():null);let at=V;do{if(A(at)){const Ct=at.getAttribute("data-mce-bogus");if(Ct){at=W.next("all"===Ct);continue}const xt=at.nodeName.toLowerCase();if(ft&&ft[xt]){if("br"===xt){K++,at=W.next();continue}return!1}if(ht(at))return!1}if(Kt(at)||U(at)&&!Ws(at.data)&&(!q?.includeZwsp||!sE(at.data))||U(at)&&at.parentNode&&Z[at.parentNode.nodeName]&&Ws(at.data))return!1;at=W.next()}while(at)}return K<=1},createRng:rt,nodeIndex:ea,split:(D,L,q)=>{let K,V,W=rt();if(D&&L&&D.parentNode&&L.parentNode){const Z=D.parentNode;return W.setStart(Z,ea(D)),W.setEnd(L.parentNode,ea(L)),K=W.extractContents(),W=rt(),W.setStart(L.parentNode,ea(L)+1),W.setEnd(Z,ea(D)+1),V=W.extractContents(),Z.insertBefore(Vu(gt,K),D),Z.insertBefore(q||L,D),Z.insertBefore(Vu(gt,V),D),I(D),q||L}},bind:kt,unbind:Nt,fire:(D,L,q)=>d.dispatch(D,L,q),dispatch:(D,L,q)=>d.dispatch(D,L,q),getContentEditable:it,getContentEditableParent:D=>{const L=v();let q=null;for(let K=D;K&&K!==L&&(q=it(K),null===q);K=K.parentNode);return q},isEditable:D=>{if(et(D)){const L=A(D)?D:D.parentElement;return et(L)&&Oo(T(L))}return!1},destroy:()=>{if(a.length>0){let D=a.length;for(;D--;){const[L,q,K]=a[D];d.unbind(L,q,K)}}Mt(r,(D,L)=>{i.unload(L),delete r[L]})},isChildOf:(D,L)=>D===L||L.contains(D),dumpRng:D=>"startContainer: "+D.startContainer.nodeName+", startOffset: "+D.startOffset+", endContainer: "+D.endContainer.nodeName+", endOffset: "+D.endOffset},_t=((D,L,q)=>{const K=L.keep_values,W={style:{set:(Z,ft)=>{const at=T(Z);K&&dl(at,tm,ft),Oe(at,"style"),bt(ft)&&qi(at,D.parse(ft))},get:Z=>{const ft=T(Z),at=wn(ft,tm)||wn(ft,"style");return D.serialize(D.parse(at),Yt(ft))}}};return K&&(W.href=W.src={set:(Z,ft,at)=>{const Ct=T(Z);Vt(L.url_converter)&&et(ft)&&(ft=L.url_converter.call(L.url_converter_scope||q(),String(ft),at,Z)),dl(Ct,"data-mce-"+at,ft),dl(Ct,at,ft)},get:(Z,ft)=>{const at=T(Z);return wn(at,"data-mce-"+ft)||wn(at,ft)}}),W})(c,e,ot(gt));return gt};Jt.DOM=Jt(document),Jt.nodeIndex=ea;const kE=Jt.DOM;class Br{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,o)=>{const r=kE;let s;const i=()=>{r.remove(a),s&&(s.onerror=s.onload=s=null)},a=r.uniqueId();s=document.createElement("script"),s.id=a,s.type="text/javascript",s.src=Q._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{i(),n()},s.onerror=()=>{i(),o("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:o,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,o=(l,c)=>{Zt(n.scriptLoadedCallbacks,c).each(d=>{X(d,u=>u[l](c))}),delete n.scriptLoadedCallbacks[c]},r=l=>{const c=Et(l,d=>"rejected"===d.status);return c.length>0?Promise.reject(Kn(c,({reason:d})=>Gt(d)?d:[d])):Promise.resolve()},s=l=>Promise.allSettled(jt(l,c=>2===n.states[c]?(o("resolve",c),Promise.resolve()):3===n.states[c]?(o("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,o("resolve",c);const d=n.queue;return d.length>0?(n.queue=[],s(d).then(r)):Promise.resolve()},()=>(n.states[c]=3,o("reject",c),Promise.reject(c)))))),i=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return w.from(d).each(nt),r(c)})),a=Pa(e);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{i(a).then(l,c)})}):i(a)}}Br.ScriptLoader=new Br;const Re=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},ul={},em=Re("en"),Zp=()=>Zt(ul,em.get()),Lo={getData:()=>Ke(ul,t=>({...t})),setCode:t=>{t&&em.set(t)},getCode:()=>em.get(),add:(t,e)=>{let n=ul[t];n||(ul[t]=n={}),Mt(e,(o,r)=>{n[r.toLowerCase()]=o})},translate:t=>{const e=Zp().getOr({}),n=a=>Vt(a)?Object.prototype.toString.call(a):o(a)?"":""+a,o=a=>""===a||null==a,r=a=>{const l=n(a);return Zt(e,l.toLowerCase()).map(n).getOr(l)},s=a=>a.replace(/{context:\w+}$/,"");if(o(t))return"";if(Ae(i=t)&&Ot(i,"raw"))return n(t.raw);var i,a;if(Gt(a=t)&&a.length>1){const a=t.slice(1);return s(r(t[0]).replace(/\{([0-9]+)\}/g,(l,c)=>Ot(a,c)?n(a[c]):l))}return s(r(t))},isRtl:()=>Zp().bind(t=>Zt(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>Ot(ul,t)},nn=()=>{const t=[],e={},n={},o=[],r=(l,c)=>{const d=Et(o,u=>u.name===l&&u.state===c);X(d,u=>u.resolve())},s=l=>Ot(e,l),i=(l,c)=>{const d=Lo.getCode();!d||c&&-1===(","+(c||"")+",").indexOf(","+d+",")||Br.ScriptLoader.add(e[l]+"/langs/"+d+".js")},a=(l,c="added")=>"added"===c&&Ot(n,l)||"loaded"===c&&s(l)?Promise.resolve():new Promise(d=>{o.push({name:l,state:c,resolve:d})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==nn.languageLoad&&(s(l)?i(l,c):a(l,"loaded").then(()=>i(l,c)))},add:(l,c)=>(t.push(c),n[l]={instance:c},r(l,"added"),c),remove:l=>{delete e[l],delete n[l]},createUrl:(l,c)=>bt(c)?bt(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(e[l])return Promise.resolve();let d=bt(c)?c:c.prefix+c.resource+c.suffix;0!==d.indexOf("/")&&-1===d.indexOf("://")&&(d=nn.baseURL+"/"+d),e[l]=d.substring(0,d.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():Br.ScriptLoader.add(d).then(u)},waitFor:a}};nn.languageLoad=!0,nn.baseURL="",nn.PluginManager=nn(),nn.ThemeManager=nn(),nn.ModelManager=nn();const SE=t=>{const e=Re(w.none()),n=()=>e.get().each(o=>clearInterval(o));return{clear:()=>{n(),e.set(w.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:o=>{n(),e.set(w.some(setInterval(o,t)))}}},is=()=>{const t=(e=>{const n=Re(w.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(w.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(w.some(r))}}})(Bt);return{...t,on:e=>t.get().each(e)}},Gc=(t,e)=>{let n=null;return{cancel:()=>{le(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{le(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},e))}}},nm=(t,e)=>{let n=null;const o=()=>{le(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,r)},e)}}},ml=ot("mce-annotation"),Gs=ot("data-mce-annotation"),na=ot("data-mce-annotation-uid"),fl=ot("data-mce-annotation-active"),gl=ot("data-mce-annotation-classes"),pl=ot("data-mce-annotation-attrs"),th=t=>e=>Ht(e,t),eh=(t,e)=>{const n=t.selection.getRng(),o=T(n.startContainer),r=T(t.getBody()),s=e.fold(()=>"."+ml(),a=>`[${Gs()}="${a}"]`),i=kr(o,n.startOffset).getOr(o);return Ao(i,s,th(r)).bind(a=>Mn(a,`${na()}`).bind(l=>Mn(a,`${Gs()}`).map(c=>{const d=oh(t,l);return{uid:l,name:c,elements:d}})))},nh=(t,e)=>Ii(t,"data-mce-bogus")||m(t,'[data-mce-bogus="all"]',th(e)),oh=(t,e)=>{const n=T(t.getBody()),o=x(n,`[${na()}="${e}"]`);return Et(o,r=>!nh(r,n))},rh=(t,e)=>{const n=T(t.getBody()),o=x(n,`[${Gs()}="${e}"]`),r={};return X(o,s=>{if(!nh(s,n)){const i=wn(s,na()),a=Zt(r,i).getOr([]);r[i]=a.concat([s])}}),r};let sh=0;const hl=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return sh++,t+"_"+n+sh+String(e)},ih=(t,e)=>T(t.dom.cloneNode(e)),Qs=t=>ih(t,!1),ah=t=>ih(t,!0),lh=(t,e)=>{const n=((r,s)=>{const i=Ee(s),a=Sc(r);return dn(i,a),i})(t,e);To(t,n);const o=Se(t);return Ar(n,o),ie(t),n},ch=(t,e,n=ne)=>{const o=new y(t,e),r=s=>{let i;do{i=o[s]()}while(i&&!U(i)&&!n(i));return w.from(i).filter(U)};return{current:()=>w.from(o.current()).filter(U),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},Js=(t,e)=>{const n=e||(r=>t.isBlock(r)||Dt(r)||At(r)),o=(r,s,i,a)=>{if(U(r)){const l=a(r,s,r.data);if(-1!==l)return w.some({container:r,offset:l})}return i().bind(l=>o(l.container,l.offset,i,a))};return{backwards:(r,s,i,a)=>{const l=ch(r,a??t.getRoot(),n);return o(r,s,()=>l.prev().map(c=>({container:c,offset:c.length})),i).getOrNull()},forwards:(r,s,i,a)=>{const l=ch(r,a??t.getRoot(),n);return o(r,s,()=>l.next().map(c=>({container:c,offset:0})),i).getOrNull()}}},oa=Math.round,Zs=t=>t?{left:oa(t.left),top:oa(t.top),bottom:oa(t.bottom),right:oa(t.right),width:oa(t.width),height:oa(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},dh=(t,e)=>(t=Zs(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),uh=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,bl=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&uh(e.top-t.bottom,t,e)},vl=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&uh(e.bottom-t.top,t,e),mh=(t,e,n)=>{const o=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-o)*(e-o)+(n-r)*(n-r))},Qc=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},as=(t,e)=>{if(A(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(i=n.length-1,Math.min(Math.max(e,0),i))]}var i;return t},NE=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),fh=t=>bt(t)&&t.charCodeAt(0)>=768&&NE.test(t),gh=A,AE=vo,ph=mt("display","block table"),OE=mt("float","left right"),yl=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(gh,AE,zr(OE)),TE=zr(mt("white-space","pre pre-line pre-wrap")),_l=U,om=Dt,hh=Jt.nodeIndex,Jc=(t,e)=>e<0&&A(t)&&t.hasChildNodes()?void 0:as(t,e),rm=t=>t?t.createRange():Jt.DOM.createRng(),sm=t=>bt(t)&&/[\r\n\t ]/.test(t),bh=t=>!!t.setStart&&!!t.setEnd,im=t=>{const e=t.startContainer,n=t.startOffset;if(sm(t.toString())&&TE(e.parentNode)&&U(e)){const o=e.data;if(sm(o[n-1])||sm(o[n+1]))return!0}return!1},vh=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,ls=t=>{var e;let n;const o=t.getClientRects();return n=Zs(o.length>0?o[0]:t.getBoundingClientRect()),!bh(t)&&om(t)&&vh(n)?(r=>{const s=r.ownerDocument,i=rm(s),a=s.createTextNode(Qt),l=r.parentNode;l.insertBefore(a,r),i.setStart(a,0),i.setEnd(a,1);const c=Zs(i.getBoundingClientRect());return l.removeChild(a),c})(t):vh(n)&&bh(t)&&null!==(e=(r=>{const i=r.endContainer,a=r.startOffset,l=r.endOffset;if(r.startContainer===i&&U(i)&&0===a&&1===l){const c=r.cloneRange();return c.setEndAfter(i),ls(c)}return null})(t))&&void 0!==e?e:n},ti=(t,e)=>{const n=dh(t,e);return n.width=1,n.right=n.left+1,n},H=(t,e,n)=>{const o=()=>(n||(n=(r=>{const s=[],i=d=>{var u,f;0!==d.height&&(s.length>0&&(u=d).left===(f=s[s.length-1]).left&&u.top===f.top&&u.bottom===f.bottom&&u.right===f.right||s.push(d))},a=(d,u)=>{const f=rm(d.ownerDocument);if(u<d.data.length){if(fh(d.data[u]))return;if(fh(d.data[u-1])&&(f.setStart(d,u),f.setEnd(d,u+1),!im(f)))return void i(ti(ls(f),!1))}u>0&&(f.setStart(d,u-1),f.setEnd(d,u),im(f)||i(ti(ls(f),!1))),u<d.data.length&&(f.setStart(d,u),f.setEnd(d,u+1),im(f)||i(ti(ls(f),!0)))},l=r.container(),c=r.offset();if(_l(l))return a(l,c),s;if(gh(l))if(r.isAtEnd()){const d=Jc(l,c);_l(d)&&a(d,d.data.length),yl(d)&&!om(d)&&i(ti(ls(d),!1))}else{const d=Jc(l,c);if(_l(d)&&a(d,0),yl(d)&&r.isAtEnd())return i(ti(ls(d),!1)),s;const u=Jc(r.container(),r.offset()-1);yl(u)&&!om(u)&&(ph(u)||ph(d)||!yl(d))&&i(ti(ls(u),!1)),yl(d)&&i(ti(ls(d),!0))}return s})(H(t,e))),n);return{container:ot(t),offset:ot(e),toRange:()=>{const r=rm(t.ownerDocument);return r.setStart(t,e),r.setEnd(t,e),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(_l(t),0===e),isAtEnd:()=>_l(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:r=>r&&t===r.container()&&e===r.offset(),getNode:r=>Jc(t,r?e-1:e)}};H.fromRangeStart=t=>H(t.startContainer,t.startOffset),H.fromRangeEnd=t=>H(t.endContainer,t.endOffset),H.after=t=>H(t.parentNode,hh(t)+1),H.before=t=>H(t.parentNode,hh(t)),H.isAbove=(t,e)=>je(Ie(e.getClientRects()),ao(t.getClientRects()),bl).getOr(!1),H.isBelow=(t,e)=>je(ao(e.getClientRects()),Ie(t.getClientRects()),vl).getOr(!1),H.isAtStart=t=>!!t&&t.isAtStart(),H.isAtEnd=t=>!!t&&t.isAtEnd(),H.isTextPosition=t=>!!t&&U(t.container()),H.isElementPosition=t=>!H.isTextPosition(t);const Zc=(t,e)=>{U(e)&&0===e.data.length&&t.remove(e)},am=(t,e,n)=>{var o,s;qt(n)?((o,r,s)=>{const i=w.from(s.firstChild),a=w.from(s.lastChild);r.insertNode(s),i.each(l=>Zc(o,l.previousSibling)),a.each(l=>Zc(o,l.nextSibling))})(t,e,n):(o=t,e.insertNode(s=n),Zc(o,s.previousSibling),Zc(o,s.nextSibling))},Po=U,yh=yt,_h=Jt.nodeIndex,Ch=t=>{const e=t.parentNode;return yh(e)?Ch(e):e},lm=t=>t?As(t.childNodes,(e,n)=>(yh(n)&&"BR"!==n.nodeName?e=e.concat(lm(n)):e.push(n),e),[]):[],wh=t=>e=>t===e,xh=t=>(Po(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,o;n=lm(Ch(e)),o=Ma(n,wh(e),e),n=n.slice(0,o+1);const r=As(n,(s,i,a)=>(Po(i)&&Po(n[a-1])&&s++,s),0);return n=Vr(n,J([e.nodeName])),o=Ma(n,wh(e),e),o-r})(t)+"]",Eh=(t,e)=>{let n,o=[],r=e.container(),s=e.offset();if(Po(r))n=((a,l)=>{let c=a;for(;(c=c.previousSibling)&&Po(c);)l+=c.data.length;return l})(r,s);else{const a=r.childNodes;s>=a.length?(n="after",s=a.length-1):n="before",r=a[s]}o.push(xh(r));let i=((a,l,c)=>{const d=[];for(let u=l.parentNode;u&&u!==a;u=u.parentNode)d.push(u);return d})(t,r);return i=Vr(i,zr(yt)),o=o.concat(Oi(i,a=>xh(a))),o.reverse().join("/")+","+n},kh=(t,e)=>{if(!e)return null;const n=e.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=As(o,(i,a)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return l?("text()"===l[1]&&(l[1]="#text"),((c,d,u)=>{let f=lm(c);return f=Vr(f,(h,g)=>!Po(h)||!Po(f[g-1])),f=Vr(f,J([d])),f[u]})(i,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!Po(s)&&s.parentNode){let i;return i="after"===r?_h(s)+1:_h(s),H(s.parentNode,i)}return((i,a)=>{let l=i,c=0;for(;Po(l);){const d=l.data.length;if(a>=c&&a<=c+d){i=l,a-=c;break}if(!Po(l.nextSibling)){i=l,a=d;break}c+=d,l=l.nextSibling}return Po(i)&&a>i.data.length&&(a=i.data.length),H(i,a)})(s,parseInt(r,10))},td=At,Sh=(t,e,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let i=r?o.startOffset:o.endOffset;const a=[],l=t.getRoot();if(U(s))a.push(n?((c,d,u)=>{let f=c(d.data.slice(0,u)).length;for(let h=d.previousSibling;h&&U(h);h=h.previousSibling)f+=c(h.data).length;return f})(e,s,i):i);else{let c=0;const d=s.childNodes;i>=d.length&&d.length&&(c=1,i=Math.max(0,d.length-1)),a.push(t.nodeIndex(d[i],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)a.push(t.nodeIndex(c,n));return a},cm=(t,e,n)=>{let o=0;return Q.each(t.select(e),r=>"all"===r.getAttribute("data-mce-bogus")?void 0:r!==n&&void o++),o},Nh=(t,e)=>{let n=e?t.startContainer:t.endContainer,o=e?t.startOffset:t.endOffset;if(A(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(e?o:o-1,r.length-1)],n&&(o=e?0:n.childNodes.length,e?t.setStart(n,o):t.setEnd(n,o))}},Ah=t=>(Nh(t,!0),Nh(t,!1),t),Oh=(t,e)=>{if(A(t)&&(t=as(t,e),td(t)))return t;if(en(t)){U(t)&&Dr(t)&&(t=t.parentNode);let n=t.previousSibling;if(td(n)||(n=t.nextSibling,td(n)))return n}},Th=(t,e,n)=>{const o=n.getNode(),r=n.getRng();if("IMG"===o.nodeName||td(o)){const i=o.nodeName;return{name:i,index:cm(n.dom,i,o)}}const s=Oh((i=r).startContainer,i.startOffset)||Oh(i.endContainer,i.endOffset);var i;if(s){const i=s.tagName;return{name:i,index:cm(n.dom,i,s)}}return((i,a,l,c)=>{const d=a.dom,u=Sh(d,i,l,c,!0),f=a.isForward(),h=Zi(c)?{isFakeCaret:!0}:{};return a.isCollapsed()?{start:u,forward:f,...h}:{start:u,end:Sh(d,i,l,c,!1),forward:f,...h}})(t,n,e,r)},Rh=(t,e,n)=>{const o={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},Dh=(t,e)=>{const n=t.dom;let o=t.getRng();const r=n.uniqueId(),s=t.isCollapsed(),i=t.getNode(),a=i.nodeName,l=t.isForward();if("IMG"===a)return{name:a,index:cm(n,a,i)};const c=Ah(o.cloneRange());if(!s){c.collapse(!1);const u=Rh(n,r+"_end",e);am(n,c,u)}o=Ah(o),o.collapse(!0);const d=Rh(n,r+"_start",e);return am(n,o,d),t.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},dm=dt(Th,He,!0),Bh=t=>{const e=s=>s(t),n=ot(t),o=()=>r,r={tag:!0,inner:t,fold:(s,i)=>i(t),isValue:ge,isError:ne,map:s=>mn.value(s(t)),mapError:o,bind:e,exists:e,forall:e,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(t)},toOptional:()=>w.some(t)};return r},Lh=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(o,r)=>o(t),isValue:ne,isError:ge,map:e,mapError:o=>mn.error(o(t)),bind:e,exists:ne,forall:ge,getOr:He,or:He,getOrThunk:Ei,orThunk:Ei,getOrDie:fc(String(t)),each:Bt,toOptional:w.none};return n},mn={value:Bh,error:Lh,fromOption:(t,e)=>t.fold(()=>Lh(e),Bh)},er=t=>{if(!Gt(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return X(t,(o,r)=>{const s=an(o);if(1!==s.length)throw new Error("one and only one name per case");const i=s[0],a=o[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!Gt(a))throw new Error("case arguments must be an array");e.push(i),n[i]=(...l)=>{const c=l.length;if(c!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+c);return{fold:(...d)=>{if(d.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+d.length);return d[r].apply(null,l)},match:d=>{const u=an(d);if(e.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+u.join(","));if(!Yn(e,f=>ut(u,f)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+e.join(", "));return d[i].apply(null,l)},log:d=>{console.log(d,{constructors:e,constructor:i,params:l})}}}}),n};er([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const RE=t=>"inline-command"===t.type||"inline-format"===t.type,DE=t=>"block-command"===t.type||"block-format"===t.type,BE=t=>{const e=o=>mn.error({message:o,pattern:t}),n=(o,r,s)=>{if(void 0!==t.format){let i;if(Gt(t.format)){if(!Yn(t.format,bt))return e(o+" pattern has non-string items in the `format` array");i=t.format}else{if(!bt(t.format))return e(o+" pattern has non-string `format` parameter");i=[t.format]}return mn.value(r(i))}return void 0!==t.cmd?bt(t.cmd)?mn.value(s(t.cmd,t.value)):e(o+" pattern has non-string `cmd` parameter"):e(o+" pattern is missing both `format` and `cmd` parameters")};if(!Ae(t))return e("Raw pattern is not an object");if(!bt(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!bt(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let o=t.start,r=t.end;return 0===r.length&&(r=o,o=""),n("Inline",s=>({type:"inline-format",start:o,end:r,format:s}),(s,i)=>({type:"inline-command",start:o,end:r,cmd:s,value:i}))}return void 0!==t.replacement?bt(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):mn.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",o=>({type:"block-format",start:t.start,format:o[0]}),(o,r)=>({type:"block-command",start:t.start,cmd:o,value:r}))},Ph=t=>Et(t,DE),Mh=t=>Et(t,RE),Ih=t=>{const e=(n=>{const o=[],r=[];return X(n,s=>{s.fold(i=>{o.push(i)},i=>{r.push(i)})}),{errors:o,values:r}})(jt(t,BE));return X(e.errors,n=>console.error(n.message,n.pattern)),e.values},um=Ln().deviceType,LE=um.isTouch(),PE=Jt.DOM,Fh=t=>$o(t,RegExp),lt=t=>e=>e.options.get(t),mm=t=>bt(t)||Ae(t),jh=(t,e="")=>n=>{const o=bt(n);if(o){if(-1!==n.indexOf("=")){const r=(s=>{const i=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Me(i,(a,l)=>{const c=l.split("="),d=c[0],u=c.length>1?c[1]:d;return a[Dn(d)]=Dn(u),a},{})})(n);return{value:Zt(r,t.id).getOr(e),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},ME=lt("iframe_attrs"),IE=lt("doctype"),zh=lt("document_base_url"),FE=lt("body_id"),jE=lt("body_class"),Uh=lt("content_security_policy"),zE=lt("br_in_pre"),fn=lt("forced_root_block"),Cl=lt("forced_root_block_attrs"),UE=lt("newline_behavior"),HE=lt("br_newline_selector"),$E=lt("no_newline_selector"),qE=lt("keep_styles"),VE=lt("end_container_on_empty_block"),Hh=lt("automatic_uploads"),$h=lt("images_reuse_filename"),WE=lt("images_replace_blob_uris"),qh=lt("icons"),KE=lt("icons_url"),YE=lt("images_upload_url"),XE=lt("images_upload_base_path"),GE=lt("images_upload_credentials"),QE=lt("images_upload_handler"),JE=lt("content_css_cors"),fm=lt("referrer_policy"),Vh=lt("language"),ZE=lt("language_url"),Wh=lt("indent_use_margin"),tk=lt("indentation"),ek=lt("content_css"),nk=lt("content_style"),Kh=lt("font_css"),ok=lt("directionality"),rk=lt("inline_boundaries_selector"),Yh=lt("object_resizing"),sk=lt("resize_img_proportional"),ik=lt("placeholder"),Xh=lt("event_root"),ak=lt("service_message"),ra=lt("theme"),lk=lt("theme_url"),gm=lt("model"),ck=lt("model_url"),wl=lt("inline_boundaries"),dk=lt("formats"),uk=lt("preview_styles"),mk=lt("format_empty_lines"),fk=lt("format_noneditable_selector"),gk=lt("custom_ui_selector"),pm=lt("inline"),pk=lt("hidden_input"),hk=lt("submit_patch"),bk=lt("add_form_submit_trigger"),vk=lt("add_unload_trigger"),yk=lt("custom_undo_redo_levels"),_k=lt("disable_nodechange"),Gh=lt("readonly"),Ck=lt("editable_root"),Qh=lt("content_css_cors"),ed=lt("plugins"),wk=lt("external_plugins"),xk=lt("block_unsupported_drop"),Ek=lt("visual"),kk=lt("visual_table_class"),Jh=lt("visual_anchor_class"),Sk=lt("iframe_aria_text"),Nk=lt("setup"),Ak=lt("init_instance_callback"),Ok=lt("urlconverter_callback"),Tk=lt("auto_focus"),Rk=lt("browser_spellcheck"),Dk=lt("protect"),Bk=lt("paste_block_drop"),nd=lt("paste_data_images"),Lk=lt("paste_preprocess"),Pk=lt("paste_postprocess"),Mk=lt("newdocument_content"),Ik=lt("paste_webkit_styles"),Fk=lt("paste_remove_styles_if_webkit"),jk=lt("paste_merge_formats"),zk=lt("smart_paste"),Uk=lt("paste_as_text"),Hk=lt("paste_tab_spaces"),$k=lt("allow_html_data_urls"),qk=lt("text_patterns"),Vk=lt("text_patterns_lookup"),Zh=lt("noneditable_class"),Wk=lt("editable_class"),Kk=lt("noneditable_regexp"),Yk=lt("preserve_cdata"),Xk=lt("highlight_on_focus"),hm=lt("xss_sanitization"),Gk=lt("init_content_sync"),tb=t=>Q.explode(t.options.get("images_file_types")),Qk=lt("table_tab_navigation"),Jk=lt("details_initial_state"),Zk=lt("details_serialized_state"),tS=A,eb=U,nb=t=>{const e=t.parentNode;e&&e.removeChild(t)},ob=t=>{const e=Ro(t);return{count:t.length-e.length,text:e}},rb=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(Te));)t.deleteData(e,1)},sb=(t,e)=>(ei(t),e),ei=t=>{tS(t)&&en(t)&&(sl(t)?t.removeAttribute("data-mce-caret"):nb(t)),eb(t)&&(rb(t),0===t.data.length&&nb(t))},nS=At,oS=re,rS=te,ib=(t,e,n)=>{const o=dh(e.getBoundingClientRect(),n);let r,s;if("BODY"===t.tagName){const a=t.ownerDocument.documentElement;r=t.scrollLeft||a.scrollLeft,s=t.scrollTop||a.scrollTop}else{const a=t.getBoundingClientRect();r=t.scrollLeft-a.left,s=t.scrollTop-a.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let i=e.offsetWidth-e.clientWidth;return i>0&&(n&&(i*=-1),o.left+=i,o.right+=i),o},ab=()=>zt.browser.isFirefox(),xl=t=>nS(t)||oS(t),El=t=>(xl(t)||pt(t)&&ab())&&ji(T(t)).exists(Oo),iS=It,bm=At,aS=re,lb=mt("display","block table table-cell table-caption list-item"),cb=en,db=Dr,lS=A,cS=U,dS=vo,sa=t=>t>0,ni=t=>t<0,od=(t,e)=>{let n;for(;n=t(e);)if(!db(n))return n;return null},kl=(t,e,n,o,r)=>{const s=new y(t,o),i=bm(t)||db(t);let a;if(ni(e)){if(i&&(a=od(s.prev.bind(s),!0),n(a)))return a;for(;a=od(s.prev.bind(s),r);)if(n(a))return a}if(sa(e)){if(i&&(a=od(s.next.bind(s),!0),n(a)))return a;for(;a=od(s.next.bind(s),r);)if(n(a))return a}return null},cs=(t,e)=>{for(;t&&t!==e;){if(lb(t))return t;t=t.parentNode}return null},nr=(t,e,n)=>cs(t.container(),n)===cs(e.container(),n),vm=(t,e)=>{if(!e)return w.none();const n=e.container(),o=e.offset();return lS(n)?w.from(n.childNodes[o+t]):w.none()},ub=(t,e)=>{var n;const o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),o},uS=(t,e,n)=>cs(e,t)===cs(n,t),mb=(t,e,n)=>{const o=t?"previousSibling":"nextSibling";let r=n;for(;r&&r!==e;){let s=r[o];if(s&&cb(s)&&(s=s[o]),bm(s)||aS(s)){if(uS(e,s,r))return s;break}if(dS(s))break;r=r.parentNode}return null},Sl=dt(ub,!0),Nl=dt(ub,!1),ym=(t,e,n)=>{let o;const r=dt(mb,!0,e),s=dt(mb,!1,e),i=n.startContainer,a=n.startOffset;if(Dr(i)){const l=cS(i)?i.parentNode:i,c=l.getAttribute("data-mce-caret");if("before"===c&&(o=l.nextSibling,El(o)))return Sl(o);if("after"===c&&(o=l.previousSibling,El(o)))return Nl(o)}if(!n.collapsed)return n;if(U(i)){if(cb(i)){if(1===t){if(o=s(i),o)return Sl(o);if(o=r(i),o)return Nl(o)}if(-1===t){if(o=r(i),o)return Nl(o);if(o=s(i),o)return Sl(o)}return n}if(Ji(i)&&a>=i.data.length-1)return 1===t&&(o=s(i),o)?Sl(o):n;if(Vs(i)&&a<=1)return-1===t&&(o=r(i),o)?Nl(o):n;if(a===i.data.length)return o=s(i),o?Sl(o):n;if(0===a)return o=r(i),o?Nl(o):n}return n},fb=(t,e)=>vm(t?0:-1,e).filter(bm),Al=(t,e,n)=>{const o=ym(t,e,n);return-1===t?H.fromRangeStart(o):H.fromRangeEnd(o)},rd=t=>w.from(t.getNode()).map(T),_m=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},sd=(t,e)=>{const n=nr(t,e);return!(n||!Dt(t.getNode()))||n};var De,t;(t=De||(De={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const mS=At,or=U,gb=A,Cm=Dt,ia=vo,pb=t=>{return Op(t)||!!zu(e=t)&&!Me(Fe(e.getElementsByTagName("*")),(n,o)=>n||al(o),!1);var e},id=Tp,hb=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,bb=(t,e)=>{if(sa(t)){if(ia(e.previousSibling)&&!or(e.previousSibling))return H.before(e);if(or(e))return H(e,0)}if(ni(t)){if(ia(e.nextSibling)&&!or(e.nextSibling))return H.after(e);if(or(e))return H(e,e.data.length)}return ni(t)?Cm(e)?H.before(e):H.after(e):H.before(e)},wm=(t,e,n)=>{let o,r,s,i;if(!gb(n)||!e)return null;if(e.isEqual(H.after(n))&&n.lastChild){if(i=H.after(n.lastChild),ni(t)&&ia(n.lastChild)&&gb(n.lastChild))return Cm(n.lastChild)?H.before(n.lastChild):i}else i=e;const a=i.container();let l=i.offset();if(or(a)){if(ni(t)&&l>0)return H(a,--l);if(sa(t)&&l<a.length)return H(a,++l);o=a}else{if(ni(t)&&l>0&&(r=hb(a,l-1),ia(r)))return!pb(r)&&(s=kl(r,t,id,r),s)?or(s)?H(s,s.data.length):H.after(s):or(r)?H(r,r.data.length):H.before(r);if(sa(t)&&l<a.childNodes.length&&(r=hb(a,l),ia(r)))return Cm(r)?((d,u)=>{const f=u.nextSibling;return f&&ia(f)?or(f)?H(f,0):H.before(f):wm(De.Forwards,H.after(u),d)})(n,r):!pb(r)&&(s=kl(r,t,id,r),s)?or(s)?H(s,0):H.before(s):or(r)?H(r,0):H.after(r);o=r||i.getNode()}if(o&&(sa(t)&&i.isAtEnd()||ni(t)&&i.isAtStart())&&(o=kl(o,t,ge,n,!0),id(o,n)))return bb(t,o);r=o&&kl(o,t,id,n);const c=Yo(Et(((d,u)=>{const f=[];let h=d;for(;h&&h!==u;)f.push(h),h=h.parentNode;return f})(a,n),mS));return!c||r&&c.contains(r)?r?bb(t,r):null:(i=sa(t)?H.after(c):H.before(c),i)},rr=t=>({next:e=>wm(De.Forwards,e,t),prev:e=>wm(De.Backwards,e,t)}),vb=t=>H.isTextPosition(t)?0===t.offset():vo(t.getNode()),yb=t=>{if(H.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return vo(t.getNode(!0))},_b=(t,e)=>!H.isTextPosition(t)&&!H.isTextPosition(e)&&t.getNode()===e.getNode(!0),Jn=(t,e,n)=>{const o=rr(e);return w.from(t?o.next(n):o.prev(n))},Ol=(t,e,n)=>Jn(t,e,n).bind(o=>{return nr(n,o,e)&&(s=n,i=o,t?!_b(s,i)&&(H.isTextPosition(a=s)||!Dt(a.getNode()))&&yb(s)&&vb(i):!_b(i,s)&&vb(s)&&yb(i))?Jn(t,e,o):w.some(o);var s,i,a}),Cb=(t,e,n,o)=>Ol(t,e,n).bind(r=>o(r)?Cb(t,e,r,o):w.some(r)),aa=(t,e)=>{const n=t?e.firstChild:e.lastChild;return U(n)?w.some(H(n,t?0:n.data.length)):n?vo(n)?w.some(t?H.before(n):Dt(o=n)?H.before(o):H.after(o)):((r,s,i)=>{const a=r?H.before(i):H.after(i);return Jn(r,s,a)})(t,e,n):w.none();var o},on=dt(Jn,!0),gn=dt(Jn,!1),rn=dt(aa,!0),yo=dt(aa,!1),xm="_mce_caret",_o=t=>A(t)&&t.id===xm,oi=(t,e)=>{let n=e;for(;n&&n!==t;){if(_o(n))return n;n=n.parentNode}return null},wb=t=>Ot(t,"name"),xb=t=>Q.isArray(t.start),ad=t=>!(!wb(t)&&qo(t.forward))||t.forward,Eb=(t,e)=>(A(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),fS=(t,e)=>yo(t).fold(ne,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),kb=(t,e,n)=>!(e.hasChildNodes()||!oi(t,e)||(((o,r)=>{var s;const i=(null!==(s=o.ownerDocument)&&void 0!==s?s:document).createTextNode(Te);o.appendChild(i),r.setStart(i,0),r.setEnd(i,0)})(e,n),0)),Sb=(t,e,n,o)=>{const r=n[e?"start":"end"],s=t.getRoot();if(r){let i=s,a=r[0];for(let l=r.length-1;i&&l>=1;l--){const c=i.childNodes;if(kb(s,i,o))return!0;if(r[l]>c.length-1)return!!kb(s,i,o)||fS(i,o);i=c[r[l]]}U(i)&&(a=Math.min(r[0],i.data.length)),A(i)&&(a=Math.min(r[0],i.childNodes.length)),e?o.setStart(i,a):o.setEnd(i,a)}return!0},Em=t=>U(t)&&t.data.length>0,Nb=(t,e,n)=>{const o=t.get(n.id+"_"+e),r=o?.parentNode,s=n.keep;if(o&&r){let i,a;if("start"===e?s?o.hasChildNodes()?(i=o.firstChild,a=1):Em(o.nextSibling)?(i=o.nextSibling,a=0):Em(o.previousSibling)?(i=o.previousSibling,a=o.previousSibling.data.length):(i=r,a=t.nodeIndex(o)+1):(i=r,a=t.nodeIndex(o)):s?o.hasChildNodes()?(i=o.firstChild,a=1):Em(o.previousSibling)?(i=o.previousSibling,a=o.previousSibling.data.length):(i=r,a=t.nodeIndex(o)):(i=r,a=t.nodeIndex(o)),!s){const l=o.previousSibling,c=o.nextSibling;let d;for(Q.each(Q.grep(o.childNodes),u=>{U(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});d=t.get(n.id+"_"+e);)t.remove(d,!0);if(U(c)&&U(l)&&!zt.browser.isOpera()){const u=l.data.length;l.appendData(c.data),t.remove(c),i=l,a=u}}return w.some(H(i,a))}return w.none()},gS=(t,e,n)=>((o,r,s=!1)=>{return 2===r?Th(Ro,s,o):3===r?(i=>{const a=i.getRng();return{start:Eh(i.dom.getRoot(),H.fromRangeStart(a)),end:Eh(i.dom.getRoot(),H.fromRangeEnd(a)),forward:i.isForward()}})(o):r?{rng:(i=o).getRng(),forward:i.isForward()}:Dh(o,!1);var i})(t,e,n),pS=(t,e)=>{((n,o)=>{const r=n.dom;if(o){if(xb(o))return((s,i)=>{const a=s.createRng();return Sb(s,!0,i,a)&&Sb(s,!1,i,a)?w.some({range:a,forward:ad(i)}):w.none()})(r,o);if(bt(o.start))return((s,i)=>{const a=w.from(kh(s.getRoot(),i.start)),l=w.from(kh(s.getRoot(),i.end));return je(a,l,(c,d)=>{const u=s.createRng();return u.setStart(c.container(),c.offset()),u.setEnd(d.container(),d.offset()),{range:u,forward:ad(i)}})})(r,o);if(Ot(o,"id"))return((s,i)=>{const a=Nb(s,"start",i),l=Nb(s,"end",i);return je(a,l.or(a),(c,d)=>{const u=s.createRng();return u.setStart(Eb(s,c.container()),c.offset()),u.setEnd(Eb(s,d.container()),d.offset()),{range:u,forward:ad(i)}})})(r,o);if(wb(o))return((s,i)=>w.from(s.select(i.name)[i.index]).map(a=>{const l=s.createRng();return l.selectNode(a),{range:l,forward:!0}}))(r,o);if((s=>Ot(s,"rng"))(o))return w.some({range:o.rng,forward:ad(o)})}return w.none()})(t,e).each(({range:n,forward:o})=>{t.setRng(n,o)})},Zn=t=>A(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),ld=t=>"\xa0"===t,la=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),km=t=>!la(t)&&!ld(t)&&!he(t),Sm=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},hS=t=>{return{value:(n=Sm(t.red)+Sm(t.green)+Sm(t.blue),Go(n,"#").toUpperCase())};var n},bS=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,vS=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Ob=(t,e,n,o)=>({red:t,green:e,blue:n,alpha:o}),Tb=(t,e,n,o)=>{const r=parseInt(t,10),s=parseInt(e,10),i=parseInt(n,10),a=parseFloat(o);return Ob(r,s,i,a)},cd=t=>(e=>{if("transparent"===e)return w.some(Ob(0,0,0,0));const n=bS.exec(e);if(null!==n)return w.some(Tb(n[1],n[2],n[3],"1"));const o=vS.exec(e);return null!==o?w.some(Tb(o[1],o[2],o[3],o[4])):w.none()})(t).map(hS).map(e=>"#"+e.value).getOr(t),Nm=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},Rb=(t,e)=>{const n=x(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:Et(Kn(t,s=>{const i=Qc(s);return i?[T(i)]:[]}),$s)},ca=t=>Rb(Nm(t.selection.getSel()),T(t.getBody())),Tl=(t,e)=>Fs(t,"table",e),Db=t=>zi(t).fold(ot([t]),e=>[t].concat(Db(e))),Am=t=>Ui(t).fold(ot([t]),e=>"br"===Yt(e)?So(e).map(n=>[t].concat(Am(n))).getOr([]):[t].concat(Am(e))),Om=(t,e)=>je((n=>{const o=n.startContainer,r=n.startOffset;return U(o)?0===r?w.some(T(o)):w.none():w.from(o.childNodes[r]).map(T)})(e),(n=>{const o=n.endContainer,r=n.endOffset;return U(o)?r===o.data.length?w.some(T(o)):w.none():w.from(o.childNodes[r-1]).map(T)})(e),(n,o)=>{const r=de(Db(t),dt(Ht,n)),s=de(Am(t),dt(Ht,o));return r.isSome()&&s.isSome()}).getOr(!1),Tm=(t,e,n,o)=>{const r=n,s=new y(n,r),i=lo(t.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!ut(["td","th","table"],c.toLowerCase()));let a=n;do{if(U(a)&&0!==Q.trim(a.data).length)return void(o?e.setStart(a,0):e.setEnd(a,a.data.length));if(i[a.nodeName])return void(o?e.setStartBefore(a):"BR"===a.nodeName?e.setEndBefore(a):e.setEndAfter(a))}while(a=o?s.next():s.prev());"BODY"===r.nodeName&&(o?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},dd=t=>{const e=t.selection.getSel();return et(e)&&e.rangeCount>0},Rm=(t,e)=>{const n=ca(t);n.length>0?X(n,o=>{const r=o.dom,s=t.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),e(s,!0)}):e(t.selection.getRng(),!1)},Bb=(t,e,n)=>{const o=Dh(t,e);n(o),t.moveToBookmark(o)},Rl=t=>_n(t?.nodeType),Dm=t=>A(t)&&!Zn(t)&&!_o(t)&&!yt(t),ri=t=>!0===t.isContentEditable,Lb=(t,e,n)=>{const{selection:o,dom:r}=t,s=o.getNode(),i=At(s);Bb(o,!0,()=>{e()}),i&&At(s)&&r.isChildOf(s,t.getBody())?t.selection.select(s):n(o.getStart())&&yS(r,o)},yS=(t,e)=>{var n,o;const r=e.getRng(),{startContainer:s,startOffset:i}=r;if(!((a,l)=>{if(Dm(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=a.getAttrib(l,"data-mce-selected"),d=parseInt(c,10);return!isNaN(d)&&d>0}return!1})(t,e.getNode())&&A(s)){const a=s.childNodes,l=t.getRoot();let c;if(i<a.length){const d=a[i];c=new y(d,null!==(n=t.getParent(d,t.isBlock))&&void 0!==n?n:l)}else{const d=a[a.length-1];c=new y(d,null!==(o=t.getParent(d,t.isBlock))&&void 0!==o?o:l),c.next(!0)}for(let d=c.current();d;d=c.next()){if("false"===t.getContentEditable(d))return;if(U(d)&&!Lm(d))return r.setStart(d,0),void e.setRng(r)}}},Pb=(t,e,n)=>{if(t){const o=e?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(A(t)||!Lm(t))return t}},Bm=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Ks(t,e),da=(t,e,n)=>t.schema.isValidChild(e,n),Lm=(t,e=!1)=>{if(et(t)&&U(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return Ws(n)}return!1},Mb=(t,e)=>{const n=t.dom;return Dm(e)&&"false"===n.getContentEditable(e)&&((o,r)=>{const s="[data-mce-cef-wrappable]",i=fk(o),a=Kr(i)?s:`${s},${i}`;return In(T(r),a)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},ds=(t,e)=>Vt(t)?t(e):(et(e)&&(t=t.replace(/%(\w+)/g,(n,o)=>e[o]||n)),t),Pm=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),Mm=(t,e)=>{if(ve(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=cd(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},ud=(t,e,n)=>{const o=t.getStyle(e,n);return Mm(o,n)},Ib=(t,e)=>{let n;return t.getParent(e,o=>!!A(o)&&(n=t.getStyle(o,"text-decoration"),!!n&&"none"!==n)),n},md=(t,e,n)=>t.getParents(e,n,t.getRoot()),Im=(t,e,n)=>{const o=t.formatter.get(e);return et(o)&&ce(o,n)},sr=t=>Xn(t,"block"),to=t=>Xn(t,"selector"),Ne=t=>Xn(t,"inline"),Fm=t=>to(t)&&!1!==t.expand&&!Ne(t),ua=Zn,Fb=md,jb=Lm,_S=Bm,zb=(t,e)=>{let n=e;for(;n;){if(A(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},Ub=(t,e,n,o)=>{const r=e.data;if(t){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},CS=(t,e,n)=>Ub(t,e,n,o=>ld(o)||la(o)),wS=(t,e,n)=>Ub(t,e,n,km),Hb=(t,e,n,o,r,s)=>{let i;const a=t.getParent(n,t.isBlock)||e,l=(c,d,u)=>{const f=Js(t);return w.from((r?f.backwards:f.forwards)(c,d,(g,b)=>ua(g.parentNode)?-1:(i=g,u(r,g,b)),a))};return l(n,o,CS).bind(c=>s?l(c.container,c.offset+(r?-1:0),wS):w.some(c)).orThunk(()=>i?w.some({container:i,offset:r?0:i.length}):w.none())},$b=(t,e,n,o,r)=>{const s=o[r];U(o)&&Kr(o.data)&&s&&(o=s);const i=Fb(t,o);for(let a=0;a<i.length;a++)for(let l=0;l<e.length;l++){const c=e[l];if((!et(c.collapsed)||c.collapsed===n.collapsed)&&to(c)&&t.is(i[a],c.selector))return i[a]}return o},qb=(t,e,n,o)=>{var r;let s=n;const i=t.getRoot(),a=e[0];if(sr(a)&&(s=a.wrapper?null:t.getParent(n,a.block,i)),!s){const l=null!==(r=t.getParent(n,"LI,TD,TH"))&&void 0!==r?r:i;s=t.getParent(U(n)?n.parentNode:n,c=>c!==i&&_S(t.schema,c),l)}if(s&&sr(a)&&a.wrapper&&(s=Fb(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!t.isBlock(s[o])&&(s=s[o],!Pm(s,"br")););return s||n},Vb=(t,e,n,o)=>{const r=n.parentNode;return!et(n[o])&&(!(r!==e&&!ve(r)&&!t.isBlock(r))||Vb(t,e,r,o))},fd=(t,e,n,o,r)=>{let s=n;const i=r?"previousSibling":"nextSibling",a=t.getRoot();if(U(n)&&!jb(n)&&(r?o>0:o<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let c=s[i];c;c=c[i]){const d=U(c)&&!Vb(t,a,c,i);if(!ua(c)&&(!Dt(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!jb(c,d))return s}if(s===a||s.parentNode===a){n=s;break}s=s.parentNode}var l;return n},Wb=t=>ua(t.parentNode)||ua(t),si=(t,e,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:i,endOffset:a}=e;const l=n[0];return A(r)&&r.hasChildNodes()&&(r=as(r,s),U(r)&&(s=0)),A(i)&&i.hasChildNodes()&&(i=as(i,e.collapsed?a:a-1),U(i)&&(a=i.data.length)),r=zb(t,r),i=zb(t,i),Wb(r)&&(r=ua(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,U(r)&&(s=e.collapsed?r.length:0)),Wb(i)&&(i=ua(i)?i:i.parentNode,i=e.collapsed?i.nextSibling||i:i.previousSibling||i,U(i)&&(a=e.collapsed?0:i.length)),e.collapsed&&(Hb(t,t.getRoot(),r,s,!0,o).each(({container:c,offset:d})=>{r=c,s=d}),Hb(t,t.getRoot(),i,a,!1,o).each(({container:c,offset:d})=>{i=c,a=d})),(Ne(l)||l.block_expand)&&(Ne(l)&&U(r)&&0!==s||(r=fd(t,n,r,s,!0)),Ne(l)&&U(i)&&a!==i.data.length||(i=fd(t,n,i,a,!1))),Fm(l)&&(r=$b(t,n,e,r,"previousSibling"),i=$b(t,n,e,i,"nextSibling")),(sr(l)||to(l))&&(r=qb(t,n,r,"previousSibling"),i=qb(t,n,i,"nextSibling"),sr(l)&&(t.isBlock(r)||(r=fd(t,n,r,s,!0)),t.isBlock(i)||(i=fd(t,n,i,a,!1)))),A(r)&&r.parentNode&&(s=t.nodeIndex(r),r=r.parentNode),A(i)&&i.parentNode&&(a=t.nodeIndex(i)+1,i=i.parentNode),{startContainer:r,startOffset:s,endContainer:i,endOffset:a}},Dl=(t,e,n)=>{var o;const r=e.startOffset,s=as(e.startContainer,r),i=e.endOffset,a=as(e.endContainer,i-1),l=p=>{const v=p[0];U(v)&&v===s&&r>=v.data.length&&p.splice(0,1);const _=p[p.length-1];return 0===i&&p.length>0&&_===a&&U(_)&&p.splice(p.length-1,1),p},c=(p,v,_)=>{const C=[];for(;p&&p!==_;p=p[v])C.push(p);return C},d=(p,v)=>t.getParent(p,_=>_.parentNode===v,v),u=(p,v,_)=>{const C=_?"nextSibling":"previousSibling";for(let E=p,k=E.parentNode;E&&E!==v;E=k){k=E.parentNode;const N=c(E===p?E:E[C],C);N.length&&(_||N.reverse(),n(l(N)))}};if(s===a)return n(l([s]));const f=null!==(o=t.findCommonAncestor(s,a))&&void 0!==o?o:t.getRoot();if(t.isChildOf(s,a))return u(s,f,!0);if(t.isChildOf(a,s))return u(a,f);const h=d(s,f)||s,g=d(a,f)||a;u(s,h,!0);const b=c(h===s?h:h.nextSibling,"nextSibling",g===a?g.nextSibling:g);b.length&&n(l(b)),u(a,g)},xS=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Kb=(t,e,n,o,r,s)=>{const{uid:i=e,...a}=n;Xe(t,ml()),pe(t,`${na()}`,i),pe(t,`${Gs()}`,o);const{attributes:l={},classes:c=[]}=r(i,a);if(dn(t,l),d=t,X(c,f=>{Xe(d,f)}),s){c.length>0&&pe(t,`${gl()}`,c.join(","));const d=an(l);d.length>0&&pe(t,`${pl()}`,d.join(","))}var d},Yb=(t,e,n,o,r)=>{const s=Ee("span",t);return Kb(s,e,n,o,r,!1),s},Xb=t=>{const e=(()=>{const s={};return{register:(i,a)=>{s[i]={name:i,settings:a}},lookup:i=>Zt(s,i).map(a=>a.settings),getNames:()=>an(s)}})();((s,i)=>{const a=Gs(),l=d=>w.from(d.attr(a)).bind(i.lookup),c=d=>{var u,f;d.attr(na(),null),d.attr(Gs(),null),d.attr(fl(),null);const h=w.from(d.attr(pl())).map(v=>v.split(",")).getOr([]),g=w.from(d.attr(gl())).map(v=>v.split(",")).getOr([]);X(h,v=>d.attr(v,null));const b=null!==(f=null===(u=d.attr("class"))||void 0===u?void 0:u.split(" "))&&void 0!==f?f:[],p=Ni(b,[ml()].concat(g));d.attr("class",p.length>0?p.join(" "):null),d.attr(gl(),null),d.attr(pl(),null)};s.serializer.addTempAttr(fl()),s.serializer.addAttributeFilter(a,d=>{for(const u of d)l(u).each(f=>{!1===f.persistent&&("span"===u.name?u.unwrap():c(u))})})})(t,e);const n=((s,i)=>{const a=Re({}),l=()=>({listeners:[],previous:is()}),c=(h,g)=>{d(h,b=>(g(b),b))},d=(h,g)=>{const b=a.get(),p=g(Zt(b,h).getOrThunk(l));b[h]=p,a.set(b)},u=(h,g)=>{X(oh(s,h),b=>{g?pe(b,fl(),"true"):Oe(b,fl())})},f=nm(()=>{const h=Tn(i.getNames());X(h,g=>{d(g,b=>{const p=b.previous.get();return eh(s,w.some(g)).fold(()=>{p.each(v=>{var _;c(_=g,C=>{X(C.listeners,E=>E(!1,_))}),b.previous.clear(),u(v,!1)})},({uid:v,name:_,elements:C})=>{var E,k,N;Cr(p,v)||(p.each(E=>u(E,!1)),k=v,N=C,c(E=_,O=>{X(O.listeners,M=>M(!0,E,{uid:k,nodes:jt(N,$=>$.dom)}))}),b.previous.set(v),u(v,!0))}),{previous:b.previous,listeners:b.listeners}})})},30);return s.on("remove",()=>{f.cancel()}),s.on("NodeChange",()=>{f.throttle()}),{addListener:(h,g)=>{d(h,b=>({previous:b.previous,listeners:b.listeners.concat([g])}))}}})(t,e),o=Mi("span"),r=s=>{X(s,i=>{o(i)?ho(i):(a=>{xr(a,ml()),Oe(a,`${na()}`),Oe(a,`${Gs()}`),Oe(a,`${fl()}`);const l=Mn(a,`${pl()}`).map(u=>u.split(",")).getOr([]),c=Mn(a,`${gl()}`).map(u=>u.split(",")).getOr([]);var d;X(l,u=>Oe(a,u)),d=a,X(c,u=>{xr(d,u)}),Oe(a,`${gl()}`),Oe(a,`${pl()}`)})(i)})};return{register:(s,i)=>{e.register(s,i)},annotate:(s,i)=>{e.lookup(s).each(a=>{var l,c,d,u;c=s,d=a,u=i,(l=t).undoManager.transact(()=>{const f=l.selection,h=f.getRng(),g=ca(l).length>0,b=hl("mce-annotation");if(h.collapsed&&!g&&((p,v)=>{const _=si(p.dom,v,[{inline:"span"}]);v.setStart(_.startContainer,_.startOffset),v.setEnd(_.endContainer,_.endOffset),p.selection.setRng(v)})(l,h),f.getRng().collapsed&&!g){const p=Yb(l.getDoc(),b,u,c,d.decorate);Or(p,Qt),f.getRng().insertNode(p.dom),f.select(p.dom)}else Bb(f,!1,()=>{Rm(l,p=>{((t,e,n,o,r,s)=>{const i=[],a=Yb(t.getDoc(),n,s,o,r),l=is(),c=()=>{l.clear()},d=f=>{X(f,u)},u=f=>{switch(h=t,g=f,b="span",p=Yt(f),xn(g).fold(()=>"skipping",v=>{return"br"===p||cn(_=g)&&kn(_)===Te?"valid":(_=>Ye(_)&&Ya(_,ml()))(g)?"existing":_o(g.dom)?"caret":ce(xS,_=>In(g,_))?"valid-block":da(h,b,p)&&da(h,Yt(v),b)?"valid":"invalid-child";var _})){case"invalid-child":{c();const h=Se(f);d(h),c();break}case"valid-block":c(),Kb(f,n,s,o,r,!0);break;case"valid":{const h=l.get().getOrThunk(()=>{const g=Qs(a);return i.push(g),l.set(g),g});Fc(f,h);break}}var h,g,b,p};Dl(t.dom,e,f=>{c(),(h=>{const g=jt(h,T);d(g)})(f)})})(l,p,b,c,d.decorate,u)})})})})},annotationChanged:(s,i)=>{n.addListener(s,i)},remove:s=>{eh(t,w.some(s)).each(({elements:i})=>{const a=t.selection.getBookmark();r(i),t.selection.moveToBookmark(a)})},removeAll:s=>{const i=t.selection.getBookmark();Mt(rh(t,s),(a,l)=>{r(a)}),t.selection.moveToBookmark(i)},getAll:s=>{const i=rh(t,s);return Ke(i,a=>jt(a,l=>l.dom))}}},Bl=t=>({getBookmark:dt(gS,t),moveToBookmark:dt(pS,t)});Bl.isBookmarkNode=Zn;const Gb=(t,e,n)=>!n.collapsed&&ce(n.getClientRects(),o=>{return i=e,(s=t)>=(r=o).left&&s<=r.right&&i>=r.top&&i<=r.bottom;var r,s,i}),Qb=(t,e,n)=>{t.dispatch(e,n)},Jb=(t,e,n,o)=>{t.dispatch("FormatApply",{format:e,node:n,vars:o})},Zb=(t,e,n,o)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:o})},tv=(t,e)=>t.dispatch("SetContent",e),ev=(t,e)=>t.dispatch("GetContent",e),nv=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),ct={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||ct.metaKeyPressed(t),metaKeyPressed:t=>zt.os.isMacOS()||zt.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},ii="data-mce-selected",ov=Math.abs,gd=Math.round,jm={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},rv=(t,e)=>{const n=e.dom,o=e.getDoc(),r=document,s=e.getBody();let i,a,l,c,d,u,f,h,g,b,p,v,_,C,E;const k=it=>et(it)&&($t(it)||n.is(it,"figure.image")),N=it=>re(it)||n.hasClass(it,"mce-preview-object"),O=it=>{const gt=it.target;((_t,D)=>{if("longpress"===(L=_t).type||0===L.type.indexOf("touch")){const L=_t.touches[0];return k(_t.target)&&!Gb(L.clientX,L.clientY,D)}var L;return k(_t.target)&&!Gb(_t.clientX,_t.clientY,D)})(it,e.selection.getRng())&&!it.isDefaultPrevented()&&e.selection.select(gt)},M=it=>n.hasClass(it,"mce-preview-object")&&et(it.firstElementChild)?[it,it.firstElementChild]:n.is(it,"figure.image")?[it.querySelector("img")]:[it],$=it=>{const gt=Yh(e);return!!gt&&"false"!==it.getAttribute("data-mce-resize")&&it!==e.getBody()&&(n.hasClass(it,"mce-preview-object")&&et(it.firstElementChild)?In(T(it.firstElementChild),gt):In(T(it),gt))},z=(it,gt,_t)=>{if(et(_t)){const D=M(it);X(D,L=>{L.style[gt]||!e.schema.isValid(L.nodeName.toLowerCase(),gt)?n.setStyle(L,gt,_t):n.setAttrib(L,gt,""+_t)})}},R=(it,gt,_t)=>{z(it,"width",gt),z(it,"height",_t)},P=it=>{let gt,_t,D,L,q;gt=it.screenX-u,_t=it.screenY-f,v=gt*c[2]+h,_=_t*c[3]+g,v=v<5?5:v,_=_<5?5:_,D=(k(i)||N(i))&&!1!==sk(e)?!ct.modifierPressed(it):ct.modifierPressed(it),D&&(ov(gt)>ov(_t)?(_=gd(v*b),v=gd(_/b)):(v=gd(_/b),_=gd(v*b))),R(a,v,_),L=c.startPos.x+gt,q=c.startPos.y+_t,L=L>0?L:0,q=q>0?q:0,n.setStyles(l,{left:L,top:q,display:"block"}),l.innerHTML=v+" &times; "+_,c[2]<0&&a.clientWidth<=v&&n.setStyle(a,"left",void 0+(h-v)),c[3]<0&&a.clientHeight<=_&&n.setStyle(a,"top",void 0+(g-_)),gt=s.scrollWidth-C,_t=s.scrollHeight-E,gt+_t!==0&&n.setStyles(l,{left:L-gt,top:q-_t}),p||(e.dispatch("ObjectResizeStart",{target:i,width:h,height:g,origin:"corner-"+c.name}),p=!0)},B=()=>{const it=p;p=!1,it&&(z(i,"width",v),z(i,"height",_)),n.unbind(o,"mousemove",P),n.unbind(o,"mouseup",B),r!==o&&(n.unbind(r,"mousemove",P),n.unbind(r,"mouseup",B)),n.remove(a),n.remove(l),n.remove(d),I(i),it&&(e.dispatch("ObjectResized",{target:i,width:v,height:_,origin:"corner-"+c.name}),n.setAttrib(i,"style",n.getAttrib(i,"style"))),e.nodeChanged()},I=it=>{kt();const gt=n.getPos(it,s),_t=gt.x,D=gt.y,L=it.getBoundingClientRect(),q=L.width||L.right-L.left,K=L.height||L.bottom-L.top;i!==it&&(G(),i=it,v=_=0);const V=e.dispatch("ObjectSelected",{target:it});$(it)&&!V.isDefaultPrevented()?Mt(jm,(W,Z)=>{let ft=n.get("mceResizeHandle"+Z);ft&&n.remove(ft),ft=n.add(s,"div",{id:"mceResizeHandle"+Z,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Z+"-resize; margin:0; padding:0"}),n.bind(ft,"mousedown",at=>{at.stopImmediatePropagation(),at.preventDefault(),(Ct=>{const xt=M(i)[0];var st;u=Ct.screenX,f=Ct.screenY,h=xt.clientWidth,g=xt.clientHeight,b=g/h,c=W,c.name=Z,c.startPos={x:q*W[0]+_t,y:K*W[1]+D},C=s.scrollWidth,E=s.scrollHeight,d=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=N(st=i)?n.create("img",{src:zt.transparentSrc}):st.cloneNode(!0),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:_t,top:D,margin:0}),R(a,q,K),a.removeAttribute(ii),s.appendChild(a),n.bind(o,"mousemove",P),n.bind(o,"mouseup",B),r!==o&&(n.bind(r,"mousemove",P),n.bind(r,"mouseup",B)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},h+" &times; "+g)})(at)}),W.elm=ft,n.setStyles(ft,{left:q*W[0]+_t-ft.offsetWidth/2,top:K*W[1]+D-ft.offsetHeight/2})}):G(!1)},tt=Gc(I,0),G=(it=!0)=>{tt.cancel(),kt(),i&&it&&i.removeAttribute(ii),Mt(jm,(gt,_t)=>{const D=n.get("mceResizeHandle"+_t);D&&(n.unbind(D),n.remove(D))})},ht=(it,gt)=>n.isChildOf(it,gt),rt=it=>{if(p||e.removed||e.composing)return;const gt="mousedown"===it.type?it.target:t.getNode(),_t=Ao(T(gt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(L=>L.dom).filter(L=>n.isEditable(L.parentElement)).getOrUndefined(),D=et(_t)?n.getAttrib(_t,ii,"1"):"1";if(X(n.select(`img[${ii}],hr[${ii}]`),L=>{L.removeAttribute(ii)}),et(_t)&&ht(_t,s)&&e.hasFocus()){Nt();const L=t.getStart(!0);if(ht(L,_t)&&ht(t.getEnd(!0),_t))return n.setAttrib(_t,ii,D),void tt.throttle(_t)}G()},kt=()=>{Mt(jm,it=>{it.elm&&(n.unbind(it.elm),delete it.elm)})},Nt=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{Nt(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",rt),e.on("keyup compositionend",it=>{i&&"TABLE"===i.nodeName&&rt(it)}),e.on("hide blur",G),e.on("contextmenu longpress",O,!0)}),e.on("remove",kt),{isResizable:$,showResizeRect:I,hideResizeRect:G,updateResizeRect:rt,destroy:()=>{tt.cancel(),i=a=d=null}}},sv=(t,e,n)=>{const o=t.document.createRange();var r,s;return r=o,e.fold(s=>{r.setStartBefore(s.dom)},(s,i)=>{r.setStart(s.dom,i)},s=>{r.setStartAfter(s.dom)}),s=o,n.fold(a=>{s.setEndBefore(a.dom)},(a,l)=>{s.setEnd(a.dom,l)},a=>{s.setEndAfter(a.dom)}),o},zm=(t,e,n,o,r)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(o.dom,r),s},Ll=er([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),iv=(t,e,n)=>e(T(n.startContainer),n.startOffset,T(n.endContainer),n.endOffset),av=(t,e,n,o)=>({start:t,soffset:e,finish:n,foffset:o}),kS=document.caretPositionFromPoint?(t,e,n)=>{var o,r;return w.from(null===(r=(o=t.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,e,n)).bind(s=>{if(null===s.offsetNode)return w.none();const i=t.dom.createRange();return i.setStart(s.offsetNode,s.offset),i.collapse(),w.some(i)})}:document.caretRangeFromPoint?(t,e,n)=>{var o,r;return w.from(null===(r=(o=t.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,e,n))}:w.none,Um=er([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Lr={before:Um.before,on:Um.on,after:Um.after,cata:(t,e,n,o)=>t.fold(e,n,o),getStart:t=>t.fold(He,He,He)},pd=er([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ma={domRange:pd.domRange,relative:pd.relative,exact:pd.exact,exactFromRange:t=>pd.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:o=>T(o.startContainer),relative:(o,r)=>Lr.getStart(o),exact:(o,r,s,i)=>o});return Jr(e)},range:av},hd=(t,e)=>{const n=Yt(t);return"input"===n?Lr.after(t):ut(["br","img"],n)?0===e?Lr.before(t):Lr.after(t):Lr.on(t,e)},SS=(t,e)=>{const n=t.fold(Lr.before,hd,Lr.after),o=e.fold(Lr.before,hd,Lr.after);return ma.relative(n,o)},lv=(t,e,n,o)=>{const r=hd(t,e),s=hd(n,o);return ma.relative(r,s)},Hm=(t,e)=>{const n=(e||document).createDocumentFragment();return X(t,o=>{n.appendChild(o.dom)}),T(n)},cv=(t,e,n)=>{return(o=Jr(T(n)).dom,r=t,s=e,((i,a,l)=>{const c=T(i.document);return kS(c,a,l).map(d=>av(T(d.startContainer),d.startOffset,T(d.endContainer),d.endOffset))})(o,r,s)).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined();var o,r,s},$m=(t,e)=>et(t)&&et(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,dv=(t,e,n)=>null!==((o,r,s)=>{let i=o;for(;i&&i!==r;){if(s(i))return i;i=i.parentNode}return null})(t,e,n),AS=(t,e,n)=>dv(t,e,o=>o.nodeName===n),OS=(t,e)=>en(t)&&!dv(t,e,_o),uv=(t,e,n)=>{const o=e.parentNode;if(o){const r=new y(e,t.getParent(o,t.isBlock)||t.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(Dt(s))return!0}return!1},qm=(t,e,n,o,r)=>{const s=t.getRoot(),i=t.schema.getNonEmptyElements(),a=r.parentNode;let l,c;if(!a)return w.none();const d=t.getParent(a,t.isBlock)||s;if(o&&Dt(r)&&e&&t.isEmpty(d))return w.some(H(a,t.nodeIndex(r)));const u=new y(r,d);for(;c=u[o?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||OS(c,s))return w.none();if(U(c)&&c.data.length>0)return AS(c,s,"A")?w.none():w.some(H(c,o?c.data.length:0));if(t.isBlock(c)||i[c.nodeName.toLowerCase()])return w.none();l=c}return Kt(l)?w.none():n&&l?w.some(H(l,0)):w.none()},mv=(t,e,n,o)=>{const r=t.getRoot();let s,i=!1,a=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const c=A(a)&&l===a.childNodes.length,d=t.schema.getNonEmptyElements();let u=n;if(en(a))return w.none();if(A(a)&&l>a.childNodes.length-1&&(u=!1),oe(a)&&(a=r,l=0),a===r){if(u&&(s=a.childNodes[l>0?l-1:0],s)&&(en(s)||d[s.nodeName]||pt(s)))return w.none();if(a.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,a.childNodes.length-1),a=a.childNodes[l],l=U(a)&&c?a.data.length:0,!e&&a===r.lastChild&&pt(a)||((f,h)=>{let g=h;for(;g&&g!==f;){if(At(g))return!0;g=g.parentNode}return!1})(r,a)||en(a))return w.none();if(a.hasChildNodes()&&!pt(a)){s=a;const f=new y(a,r);do{if(At(s)||en(s)){i=!1;break}if(U(s)&&s.data.length>0){l=u?0:s.data.length,a=s,i=!0;break}if(d[s.nodeName.toLowerCase()]&&!ae(s)){l=t.nodeIndex(s),a=s.parentNode,u||l++,i=!0;break}}while(s=u?f.next():f.prev())}}}return e&&(U(a)&&0===l&&qm(t,c,e,!0,a).each(f=>{a=f.container(),l=f.offset(),i=!0}),A(a)&&(s=a.childNodes[l],s||(s=a.childNodes[l-1]),!s||!Dt(s)||"A"===(null===(g=s.previousSibling)||void 0===g?void 0:g.nodeName)||uv(t,s,!1)||uv(t,s,!0)||qm(t,c,e,!0,s).each(f=>{a=f.container(),l=f.offset(),i=!0}))),u&&!e&&U(a)&&l===a.data.length&&qm(t,c,e,!1,a).each(f=>{a=f.container(),l=f.offset(),i=!0}),i&&a?w.some(H(a,l)):w.none();var g},bd=(t,e)=>{const n=e.collapsed,o=e.cloneRange(),r=H.fromRangeStart(e);return mv(t,n,!0,o).each(s=>{n&&H.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||mv(t,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),$m(e,o)?w.none():w.some(o)},vd=(t,e)=>t.splitText(e),yd=t=>{let e=t.startContainer,n=t.startOffset,o=t.endContainer,r=t.endOffset;if(e===o&&U(e)){if(n>0&&n<e.data.length)if(o=vd(e,n),e=o.previousSibling,r>n){r-=n;const s=vd(o,r).previousSibling;e=o=s,r=s.data.length,n=0}else r=0}else if(U(e)&&n>0&&n<e.data.length&&(e=vd(e,n),n=0),U(o)&&r>0&&r<o.data.length){const s=vd(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:e,startOffset:n,endContainer:o,endOffset:r}},ai=t=>({walk:(e,n)=>Dl(t,e,n),split:yd,expand:(e,n={type:"word"})=>{if("word"===n.type){const o=si(t,e,[{inline:"span"}]),r=t.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return e},normalize:e=>bd(t,e).fold(ne,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});ai.compareRanges=$m,ai.getCaretRangeFromPoint=cv,ai.getSelectedNode=Qc,ai.getNode=as;const TS=((t,e)=>{const n=r=>{const s=(i=>{const a=i.dom;return Sr(i)?a.getBoundingClientRect().height:a.offsetHeight})(r);if(s<=0||null===s){const i=fo(r,t);return parseFloat(i)||0}return s},o=(r,s)=>Me(s,(i,a)=>{const l=fo(r,a),c=void 0===l?0:parseInt(l,10);return isNaN(c)?i:i+c},0);return{set:(r,s)=>{if(!_n(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const i=r.dom;Zr(i)&&(i.style[t]=s+"px")},get:n,getOuter:n,aggregate:o,max:(r,s,i)=>{const a=o(r,i);return s>a?s-a:0}}})("height"),fv=()=>T(document),gv=(t,e)=>t.view(e).fold(ot([]),n=>{const o=t.owner(n),r=gv(t,o);return[n].concat(r)});var RS=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?w.none():w.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(T)},owner:t=>mo(t)});const Vm=t=>"textarea"===Yt(t),pv=(t,e)=>{const n=(r=>{const s=r.dom.ownerDocument,i=s.body,a=s.defaultView,l=s.documentElement;if(i===r.dom)return Zo(i.offsetLeft,i.offsetTop);const c=bo(a?.pageYOffset,l.scrollTop),d=bo(a?.pageXOffset,l.scrollLeft),u=bo(l.clientTop,i.clientTop),f=bo(l.clientLeft,i.clientLeft);return Vi(r).translate(d-f,c-u)})(t),o=TS.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:e}},hv=(t,e,n,o)=>{BS(t,(r,s)=>DS(t,e,n,o),n)},bv=(t,e,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(e,es(e).top,o,r),t.dispatch("AfterScrollIntoView",s))},DS=(t,e,n,o)=>{T(t.getBody());const s=T(t.getDoc()),i=((a,l)=>{const c=((u,f)=>{const h=Se(u);if(0===h.length||Vm(u))return{element:u,offset:f};if(f<h.length&&!Vm(h[f]))return{element:h[f],offset:0};{const g=h[h.length-1];return Vm(g)?{element:u,offset:f}:"img"===Yt(g)?{element:g,offset:1}:cn(g)?{element:g,offset:kn(g).length}:{element:g,offset:Se(g).length}}})(a,l),d=Qr('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return qe(c.element,d),pv(d,()=>ie(d))})(T(n.startContainer),n.startOffset);bv(t,s,e,i,o),i.cleanup()},vv=(t,e,n,o)=>{const r=T(t.getDoc());bv(t,r,n,pv(T(e),Bt),o)},BS=(t,e,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,i=n.endOffset;e(T(o),T(s));const a=t.dom.createRng();a.setStart(o,r),a.setEnd(s,i),t.selection.setRng(n)},Wm=(t,e)=>t.element.dom.scrollIntoView({block:e?"start":"end"}),yv=(t,e,n,o)=>{const r=e+t,s=n.pos.top,i=n.bottom,a=i-s>=e;s<t?Wm(n,!1!==o):s>r?Wm(n,a?!1!==o:!0===o):i>r&&!a&&Wm(n,!0===o)},_v=(t,e,n,o)=>{const r=Jr(t).dom.innerHeight;yv(e,r,n,o)},Cv=(t,e,n,o)=>{const r=Jr(t).dom.innerHeight;yv(e,r,n,o);const s=(a=>{const l=fv(),c=es(l),d=((h,g)=>{const b=g.owner(h);return gv(g,b)})(a,RS),u=Vi(a),f=Vo(d,(h,g)=>{const b=Vi(g);return{left:h.left+b.left,top:h.top+b.top}},{left:0,top:0});return Zo(f.left+u.left+c.left,f.top+u.top+c.top)})(n.element),i=Uc(window);s.top<i.y?Us(n.element,!1!==o):s.top>i.bottom&&Us(n.element,!0===o)},LS=(t,e,n)=>hv(t,_v,e,n),PS=(t,e,n)=>vv(t,e,_v,n),MS=(t,e,n)=>hv(t,Cv,e,n),IS=(t,e,n)=>vv(t,e,Cv,n),Pl=(t,e,n)=>{(t.inline?LS:MS)(t,e,n)},wv=t=>t.dom.focus(),xv=t=>{const e=Ge(t).dom;return t.dom===e.activeElement},Km=(t=fv())=>w.from(t.dom.activeElement).map(T),Ev=(t,e)=>{const n=cn(e)?kn(e).length:Se(e).length+1;return t>n?n:t<0?0:t},FS=t=>ma.range(t.start,Ev(t.soffset,t.start),t.finish,Ev(t.foffset,t.finish)),kv=(t,e)=>!j(e.dom)&&(uo(t,e)||Ht(t,e)),Sv=t=>e=>kv(t,e.start)&&kv(t,e.finish),jS=t=>ma.range(T(t.startContainer),t.startOffset,T(t.endContainer),t.endOffset),zS=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),w.some(e)}catch{return w.none()}},Ym=t=>{const e=t.inline||zt.browser.isFirefox()?(n=T(t.getBody()),(o=>{const r=o.getSelection();return(r&&0!==r.rangeCount?w.from(r.getRangeAt(0)):w.none()).map(jS)})(Jr(n).dom).filter(Sv(n))):w.none();var n;t.bookmark=e.isSome()?e:t.bookmark},Xm=t=>(t.bookmark?t.bookmark:w.none()).bind(e=>{return n=T(t.getBody()),w.from(e).filter(Sv(n)).map(FS);var n}).bind(zS),Nv={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},eo={setEditorTimeout:(t,e,n)=>{return _n(r=n)||(r=0),setTimeout(()=>{t.removed||e()},r);var r},setEditorInterval:(t,e,n)=>{const o=(_n(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(o):e()},s));var s;return o}};let fa;const Gm=Jt.DOM,Qm=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},_d=(t,e)=>{const n=gk(t);return null!==Gm.getParent(e,r=>{return A(s=r)&&Nv.isEditorUIElement(s)||!!n&&t.dom.is(r,n);var s})},Jm=t=>{try{const e=Ge(T(t.getElement()));return Km(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},US=(t,e)=>{const n=e.editor;(r=>{const s=Gc(()=>{Ym(r)},0);r.on("init",()=>{var i,c;r.inline&&((i,a)=>{const l=()=>{a.throttle()};Jt.DOM.bind(document,"mouseup",l),i.on("remove",()=>{Jt.DOM.unbind(document,"mouseup",l)})})(r,s),c=s,(i=r).on("mouseup touchend",d=>{c.throttle()}),i.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||Ym(i)})}),r.on("remove",()=>{s.cancel()})})(n);const o=(r,s)=>{Xk(r)&&!0!==r.inline&&s(T(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=t.focusedEditor;Qm(Jm(n))&&o(n,Xe),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{eo.setEditorTimeout(n,()=>{const r=t.focusedEditor;Qm(Jm(n))&&r===n||o(n,xr),_d(n,Jm(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),fa||(fa=r=>{const s=t.activeEditor;s&&Dc(r).each(i=>{i.ownerDocument===document&&(i===document.body||_d(s,i)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Gm.bind(document,"focusin",fa))},HS=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&fa&&(Gm.unbind(document,"focusin",fa),fa=null)},Av=(t,e)=>{var n,o,r;(n=T(t.getBody()),o=e,(r=o,r.collapsed?w.from(as(r.startContainer,r.startOffset)).map(T):w.none()).bind(r=>Ki(r)?w.some(r):uo(n,r)?w.none():w.some(n))).bind(n=>rn(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},Zm=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},li=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(o=T(n),xv(o)||(r=o,Km(Ge(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(t):et((e=t).iframeElement)&&xv(T(e.iframeElement));var e},tf=t=>t.editorManager.setActive(t),Ov=(t,e,n,o,r)=>{const i=n?e.startOffset:e.endOffset;return w.from(n?e.startContainer:e.endContainer).map(T).map(a=>o&&e.collapsed?a:kr(a,r(a,i)).getOr(a)).bind(a=>Ye(a)?w.some(a):xn(a).filter(Ye)).map(a=>a.dom).getOr(t)},Tv=(t,e,n=!1)=>Ov(t,e,!0,n,(o,r)=>Math.min(Hi(o),r)),Rv=(t,e,n=!1)=>Ov(t,e,!1,n,(o,r)=>r>0?r-1:r),Dv=(t,e)=>{const n=t;for(;t&&U(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},ef=(t,e)=>jt(e,n=>{const o=t.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),$S=["img","br"],Bv=t=>{return Tr(t).filter(n=>0!==n.trim().length||n.indexOf(Qt)>-1).isSome()||ut($S,Yt(t))||Ls(n=t)&&"false"===wn(n,"contenteditable");var n},Lv="[data-mce-autocompleter]",Pv=t=>js(t,Lv),VS={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Cd=(t,e,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[o])return t[o];if(t!==e){let s=t[r];if(s)return s;for(let i=t.parent;i&&i!==e;i=i.parent)if(s=i[r],s)return s}},WS=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!Ws(n))return!1;const o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},Mv=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class pn{static create(e,n){const o=new pn(e,VS[e]||1);return n&&Mt(n,(r,s)=>{o.attr(s,r)}),o}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const o=this;if(!bt(e))return et(e)&&Mt(e,(s,i)=>{o.attr(i,s)}),o;const r=o.attributes;if(r){if(void 0!==n){if(null===n){if(e in r.map){delete r.map[e];let s=r.length;for(;s--;)if(r[s].name===e)return r.splice(s,1),o}return o}if(e in r.map){let s=r.length;for(;s--;)if(r[s].name===e){r[s].value=n;break}}else r.push({name:e,value:n});return r.map[e]=n,o}return r.map[e]}}clone(){const e=this,n=new pn(e.name,e.type),o=e.attributes;if(o){const r=[];r.map={};for(let s=0,i=o.length;s<i;s++){const a=o[s];"id"!==a.name&&(r[r.length]={name:a.name,value:a.value},r.map[a.name]=a.value)}n.attributes=r}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const o=n.next;e.insert(n,e,!0),n=o}e.remove()}remove(){const e=this,n=e.parent,o=e.next,r=e.prev;return n&&(n.firstChild===e?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===e?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const o=n.lastChild;return o?(o.next=e,e.prev=o,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,o){e.parent&&e.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===r.lastChild?r.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=r,e}getAll(e){const n=this,o=[];for(let r=n.firstChild;r;r=Cd(r,n))r.name===e&&o.push(r);return o}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let r=e.firstChild;r;r=Cd(r,e))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},o){var r;const s=this;let i=s.firstChild;if(Mv(s))return!1;if(i)do{if(1===i.type){if(i.attr("data-mce-bogus"))continue;if(e[i.name]||Mv(i))return!1}if(8===i.type||3===i.type&&!WS(i)||3===i.type&&i.parent&&n[i.parent.name]&&Ws(null!==(r=i.value)&&void 0!==r?r:"")||o&&o(i))return!1}while(i=Cd(i,s));return!0}walk(e){return Cd(this,null,e)}}const Iv=(t,e,n=0)=>{const o=t.toLowerCase();if(-1!==o.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(o.substr(n))){const r=o.indexOf("[endif]",n);return o.indexOf(">",r)}if(e){const r=o.indexOf(">",n);return-1!==r?r:o.length}{const r=/--!?>/g;r.lastIndex=n;const s=r.exec(t);return s?s.index+s[0].length:o.length}},KS=(t,e,n)=>{const o=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,r=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,s=t.getVoidElements();let i=1,a=n;for(;0!==i;)for(o.lastIndex=a;;){const l=o.exec(e);if(null===l)return a;if("!"===l[1]){a=xe(l[2],"--")?Iv(e,!1,l.index+3):Iv(e,!0,l.index+1);break}{r.lastIndex=o.lastIndex;const c=r.exec(e);if(le(c)||c.index!==o.lastIndex)continue;"/"===l[1]?i-=1:Ot(s,l[2])||(i+=1),a=o.lastIndex+c[0].length;break}}return a},Fv=(t,e)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o=t.schema;let r=((a,l)=>{const c=new RegExp(["\\s?("+a.join("|")+')="[^"]+"'].join("|"),"gi");return l.replace(c,"")})(t.getTempAttrs(),e);const s=o.getVoidElements();let i;for(;i=n.exec(r);){const a=n.lastIndex,l=i[0].length;let c;c=s[i[1]]?a:KS(o,r,a),r=r.substring(0,a-l)+r.substring(c),n.lastIndex=a-l}return Ro(r)},YS=Fv,jv=t=>{const e=x(t,"[data-mce-bogus]");X(e,n=>{"all"===wn(n,"data-mce-bogus")?ie(n):un(n)?(qe(n,Er("\ufeff")),ie(n)):ho(n)})},zv=t=>{const e=x(t,"input");X(e,n=>{Oe(n,"name")})},Uv=Q.makeMap,Hv=t=>{const e=[],n=(t=t||{}).indent,o=Uv(t.indent_before||""),r=Uv(t.indent_after||""),s=rs.getEncodeFunc(t.entity_encoding||"raw",t.entities),i="xhtml"!==t.element_format;return{start:(a,l,c)=>{if(n&&o[a]&&e.length>0){const d=e[e.length-1];d.length>0&&"\n"!==d&&e.push("\n")}if(e.push("<",a),l)for(let d=0,u=l.length;d<u;d++){const f=l[d];e.push(" ",f.name,'="',s(f.value,!0),'"')}if(e[e.length]=!c||i?">":" />",c&&n&&r[a]&&e.length>0){const d=e[e.length-1];d.length>0&&"\n"!==d&&e.push("\n")}},end:a=>{let l;e.push("</",a,">"),n&&r[a]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(a,l)=>{a.length>0&&(e[e.length]=l?a:s(a))},cdata:a=>{e.push("<![CDATA[",a,"]]>")},comment:a=>{e.push("\x3c!--",a,"--\x3e")},pi:(a,l)=>{l?e.push("<?",a," ",s(l),"?>"):e.push("<?",a,"?>"),n&&e.push("\n")},doctype:a=>{e.push("<!DOCTYPE",a,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},us=(t={},e=ss())=>{const n=Hv(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{const r=t.validate,s={3:a=>{var l;n.text(null!==(l=a.value)&&void 0!==l?l:"",a.raw)},8:a=>{var l;n.comment(null!==(l=a.value)&&void 0!==l?l:"")},7:a=>{n.pi(a.name,a.value)},10:a=>{var l;n.doctype(null!==(l=a.value)&&void 0!==l?l:"")},4:a=>{var l;n.cdata(null!==(l=a.value)&&void 0!==l?l:"")},11:a=>{let l=a;if(l=l.firstChild)do{i(l)}while(l=l.next)}};n.reset();const i=a=>{var l;const c=s[a.type];if(c)c(a);else{const d=a.name,u=d in e.getVoidElements();let f=a.attributes;if(r&&f&&f.length>1){const h=[];h.map={};const g=e.getElementRule(a.name);if(g){for(let b=0,p=g.attributesOrder.length;b<p;b++){const v=g.attributesOrder[b];if(v in f.map){const _=f.map[v];h.map[v]=_,h.push({name:v,value:_})}}for(let b=0,p=f.length;b<p;b++){const v=f[b].name;if(!(v in h.map)){const _=f.map[v];h.map[v]=_,h.push({name:v,value:_})}}f=h}}if(n.start(d,f,u),!u){let h=a.firstChild;if(h){"pre"!==d&&"textarea"!==d||3!==h.type||"\n"!==(null===(l=h.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{i(h)}while(h=h.next)}n.end(d)}}};return 1!==o.type||t.inner?3===o.type?s[3](o):s[11](o):i(o),n.getContent()}}},$v=new Set;X(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{$v.add(t)});const qv=["font","text-decoration","text-emphasis"],nf=(t,e)=>an(t.parseStyle(t.getAttrib(e,"style"))),GS=(t,e,n)=>{const o=nf(t,e),r=nf(t,n),s=i=>{var a,l;const c=null!==(a=t.getStyle(e,i))&&void 0!==a?a:"",d=null!==(l=t.getStyle(n,i))&&void 0!==l?l:"";return Bn(c)&&Bn(d)&&c!==d};return ce(o,i=>{const a=l=>ce(l,c=>c===i);if(!a(r)&&a(qv)){const l=Et(r,c=>ce(qv,d=>xe(c,d)));return ce(l,s)}return s(i)})},Vv=(t,e,n)=>w.from(n.container()).filter(U).exists(o=>{const r=t?0:-1;return e(o.data.charAt(n.offset()+r))}),of=dt(Vv,!0,la),rf=dt(Vv,!1,la),QS=t=>{const e=t.container();return U(e)&&(0===e.data.length||Xi(e.data)&&Bl.isBookmarkNode(e.parentNode))},ms=(t,e)=>n=>vm(t?0:-1,n).filter(e).isSome(),Wv=t=>$t(t)&&"block"===fo(T(t),"display"),Kv=t=>{return At(t)&&!(A(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},JS=ms(!0,Wv),ZS=ms(!1,Wv),Ml=ms(!0,re),Il=ms(!1,re),Yv=ms(!0,pt),Xv=ms(!1,pt),fs=ms(!0,Kv),gs=ms(!1,Kv),Gv=(t,e)=>{return r=ne,uo(o=e,n=t)?Qa(n,s=>r(s)||Ht(s,o)).slice(0,-1):[];var n,o,r},Pr=(t,e)=>[t].concat(Gv(t,e)),sf=(t,e,n)=>Cb(t,e,n,QS),Qv=(t,e)=>de(Pr(T(e.container()),t),ue),Jv=(t,e,n)=>sf(t,e.dom,n).forall(o=>Qv(e,n).fold(()=>!nr(o,n,e.dom),r=>!nr(o,n,e.dom)&&uo(r,T(o.container())))),Zv=(t,e,n)=>Qv(e,n).fold(()=>sf(t,e.dom,n).forall(o=>!nr(o,n,e.dom)),o=>sf(t,o.dom,n).isNone()),af=dt(Zv,!1),t0=dt(Zv,!0),tN=dt(Jv,!1),eN=dt(Jv,!0),nN=t=>rd(t).exists(un),wd=(t,e,n)=>{const o=Et(Pr(T(n.container()),e),ue),r=Ie(o).getOr(e);return Jn(t,r.dom,n).filter(nN)},lf=(t,e)=>rd(e).exists(un)||wd(!0,t,e).isSome(),cf=(t,e)=>{return(n=e,w.from(n.getNode(!0)).map(T)).exists(un)||wd(!1,t,e).isSome();var n},oN=dt(wd,!1),rN=dt(wd,!0),e0=t=>H.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),n0=(t,e)=>{const n=Et(Pr(T(e.container()),t),ue);return Ie(n).getOr(t)},o0=(t,e)=>e0(e)?rf(e):rf(e)||gn(n0(t,e).dom,e).exists(rf),r0=(t,e)=>e0(e)?of(e):of(e)||on(n0(t,e).dom,e).exists(of),df=t=>rd(t).bind(e=>Nr(e,Ye)).exists(e=>{return n=fo(e,"white-space"),ut(["pre","pre-wrap"],n);var n}),s0=(t,e)=>n=>{return o=new y(n,t)[e](),et(o)&&At(o)&&lb(o);var o},i0=(t,e)=>{return!df(e)&&(gn((n=t).dom,o=e).isNone()||on(n.dom,o).isNone()||af(n,o)||t0(n,o)||cf(n,o)||lf(n,o)||o0(t,e)||r0(t,e));var n,o},Fl=(t,e)=>!df(e)&&(af(t,e)||tN(t,e)||cf(t,e)||o0(t,e)||((n,o)=>{const r=gn(n.dom,o).getOr(o),s=s0(n.dom,"prev");return o.isAtStart()&&(s(o.container())||s(r.container()))})(t,e)),jl=(t,e)=>!df(e)&&(t0(t,e)||eN(t,e)||lf(t,e)||r0(t,e)||((n,o)=>{const r=on(n.dom,o).getOr(o),s=s0(n.dom,"next");return o.isAtEnd()&&(s(o.container())||s(r.container()))})(t,e)),uf=(t,e)=>Fl(t,e)||jl(t,(n=>{const o=n.container(),r=n.offset();return U(o)&&r<o.data.length?H(o,r+1):n})(e)),a0=(t,e)=>ld(t.charAt(e)),l0=(t,e)=>la(t.charAt(e)),c0=(t,e,n)=>{const o=e.data,r=H(e,0);return n||!a0(o,0)||uf(t,r)?!!(n&&l0(o,0)&&Fl(t,r))&&(e.data=Qt+o.slice(1),!0):(e.data=" "+o.slice(1),!0)},d0=(t,e,n)=>{const o=e.data,r=H(e,o.length-1);return n||!a0(o,o.length-1)||uf(t,r)?!!(n&&l0(o,o.length-1)&&jl(t,r))&&(e.data=o.slice(0,-1)+Qt,!0):(e.data=o.slice(0,-1)+" ",!0)},u0=(t,e,n)=>{if(0===n)return;const o=T(t),r=No(o,ue).getOr(o),s=t.data.slice(e,e+n),i=e+n>=t.data.length&&jl(r,H(t,t.data.length)),a=0===e&&Fl(r,H(t,0));t.replaceData(e,n,Dp(s,4,a,i))},xd=(t,e)=>{const n=t.data.slice(e),o=n.length-Ri(n).length;u0(t,e,o)},mf=(t,e)=>{const n=t.data.slice(0,e),o=n.length-vr(n).length;u0(t,e-o,o)},ff=(t,e,n,o=!0)=>{const r=vr(t.data).length,s=o?t:e,i=o?e:t;return o?s.appendData(i.data):s.insertData(0,i.data),ie(T(i)),n&&xd(s,r),s},iN=(t,e)=>((n,o)=>{const r=n.container(),s=n.offset();return!H.isTextPosition(n)&&r===o.parentNode&&s>H.before(o).offset()})(e,t)?H(e.container(),e.offset()-1):e,m0=t=>{return vo(t.previousSibling)?w.some(U(e=t.previousSibling)?H(e,e.data.length):H.after(e)):t.previousSibling?yo(t.previousSibling):w.none();var e},f0=t=>{return vo(t.nextSibling)?w.some(U(e=t.nextSibling)?H(e,0):H.before(e)):t.nextSibling?rn(t.nextSibling):w.none();var e},g0=(t,e,n)=>{n.fold(()=>{t.focus()},o=>{t.selection.setRng(o.toRange(),e)})},lN=(t,e)=>e&&Ot(t.schema.getBlockElements(),Yt(e)),cN=t=>{if(_e(t)){const e=Qr('<br data-mce-bogus="1">');return po(t),fe(t,e),w.some(H.before(e.dom))}return w.none()},ci=(t,e,n,o=!0)=>{const r=((t,e,n)=>{return(o=t,r=e,s=n,o?(i=r,f0(a=s).orThunk(()=>m0(a)).orThunk(()=>{return on(l=i,H.after(c=a)).orThunk(()=>gn(l,H.before(c)));var l,c})):((i,a)=>m0(a).orThunk(()=>f0(a)).orThunk(()=>{return l=i,w.from((c=a).previousSibling?c.previousSibling:c.parentNode).bind(d=>gn(l,H.before(d))).orThunk(()=>on(l,H.after(c)));var l,c}))(r,s)).map(dt(iN,n));var o,r,s,i,a})(e,t.getBody(),n.dom),s=No(n,dt(lN,t),(i=t.getBody(),l=>l.dom===i));var i;const a=((l,c,d)=>{const u=So(l).filter(cn),f=Is(l).filter(cn);return ie(l),(h=u,g=f,b=c,p=(v,_,C)=>{const E=v.dom,k=_.dom,N=E.data.length;return ff(E,k,d),C.container()===k?H(E,N):C},h.isSome()&&g.isSome()&&b.isSome()?w.some(p(h.getOrDie(),g.getOrDie(),b.getOrDie())):w.none()).orThunk(()=>(d&&(u.each(v=>mf(v.dom,v.dom.length)),f.each(v=>xd(v.dom,0))),c));var h,g,b,p})(n,r,(c=n,Ot(t.schema.getTextInlineElements(),Yt(c))));var c;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(cN).fold(()=>{o&&g0(t,e,a)},l=>{o&&g0(t,e,w.some(l))})},dN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,di=(t,e)=>In(T(e),rk(t))&&!Ks(t.schema,e)&&t.dom.isEditable(e),p0=t=>{var e,n;return"rtl"===Jt.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",dN.test(n))},ps=(t,e,n)=>{const o=(r=t,s=e,Et(Jt.DOM.getParents(n.container(),"*",s),r));var r,s;return w.from(o[o.length-1])},no=(t,e)=>{const n=e.container(),o=e.offset();return t?Bo(n)?U(n.nextSibling)?H(n.nextSibling,0):H.after(n):Gi(e)?H(n,o+1):e:Bo(n)?U(n.previousSibling)?H(n.previousSibling,n.previousSibling.data.length):H.before(n):Qi(e)?H(n,o-1):e},h0=dt(no,!0),b0=dt(no,!1),v0=(t,e)=>{const n=o=>o.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},gf=t=>v0(t,"Delete"),uN=t=>Hs(t)||os(t),Ed=(t,e)=>{return uo(t,e)?Nr(e,uN,(n=t,o=>Cr(xn(o),n,Ht))):w.none();var n},pf=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},y0=(t,e,n)=>je(rn(n),yo(n),(o,r)=>{const s=no(!0,o),i=no(!1,r),a=no(!1,e);return t?on(n,a).exists(l=>l.isEqual(i)&&e.isEqual(s)):gn(n,a).exists(l=>l.isEqual(s)&&e.isEqual(i))}).getOr(!0),_0=t=>{var e;return(8===Ec(e=t)||"#comment"===Yt(e)?So(t):Ui(t)).bind(_0).orThunk(()=>w.some(t))},C0=(t,e,n,o=!0)=>{var r;e.deleteContents();const s=_0(n).getOr(n),i=T(null!==(r=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==r?r:n.dom);if(i.dom===t.getBody()?pf(t,o):_e(i)&&(tr(i),o&&t.selection.setCursorLocation(i.dom,0)),!Ht(n,i)){const l=Cr(xn(i),n)?[]:xn(a=i).map(Se).map(c=>Et(c,d=>!Ht(a,d))).getOr([]);X(l.concat(Se(n)),c=>{Ht(c,i)||uo(c,i)||!_e(c)||ie(c)})}var a},hf=t=>x(t,"td,th"),bf=(t,e)=>({start:t,end:e}),zl=er([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),kd=(t,e)=>Ao(T(t),"td,th",e),w0=t=>!Ht(t.start,t.end),x0=(t,e)=>Tl(t.start,e).bind(n=>Tl(t.end,e).bind(o=>wr(Ht(n,o),n))),vf=t=>e=>x0(e,t).map(n=>({rng:e,table:n,cells:hf(n)})),E0=(t,e,n,o)=>{if(n.collapsed||!t.forall(w0))return w.none();if(e.isSameTable){const r=t.bind(vf(o));return w.some({start:r,end:r})}{const r=kd(n.startContainer,o),s=kd(n.endContainer,o),i=r.bind((l=o,c=>Tl(c,l).bind(d=>ao(hf(d)).map(u=>bf(c,u))))).bind(vf(o)),a=s.bind((l=>c=>Tl(c,l).bind(d=>Ie(hf(d)).map(u=>bf(u,c))))(o)).bind(vf(o));return w.some({start:i,end:a})}var l},k0=(t,e)=>Wo(t,n=>Ht(n,e)),yf=t=>je(k0(t.cells,t.rng.start),k0(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),S0=(t,e)=>{const{startTable:n,endTable:o}=e,r=t.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},N0=t=>X(t,e=>{Oe(e,"contenteditable"),tr(e)}),_f=(t,e,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Cf(t,r,e,!1).each(s=>s())},A0=t=>{const e=ca(t),n=T(t.selection.getNode());te(n.dom)&&_e(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&ce(e,o=>Ht(o,n))&&pe(n,"data-mce-selected","1")},O0=(t,e,n)=>w.some(()=>{const o=t.selection.getRng(),r=n.bind(({rng:s,isStartInTable:i})=>{const a=w.from((c=t).dom.getParent(i?s.endContainer:s.startContainer,c.dom.isBlock)).map(T);var c;s.deleteContents(),((c,d,u)=>{u.each(f=>{d?ie(f):(tr(f),c.selection.setCursorLocation(f.dom,0))})})(t,i,a.filter(_e));const l=i?e[0]:e[e.length-1];return _f(t,l,o,i),_e(l)?w.none():w.some(i?e.slice(1):e.slice(0,-1))}).getOr(e);N0(r),A0(t)}),fN=(t,e,n,o)=>w.some(()=>{const r=t.selection.getRng(),s=e[0],i=n[n.length-1];_f(t,s,r,!0),_f(t,i,r,!1);const a=_e(s)?e:e.slice(1),l=_e(i)?n:n.slice(0,-1);N0(a.concat(l)),o.deleteContents(),A0(t)}),Cf=(t,e,n,o=!0)=>w.some(()=>{C0(t,e,n,o)}),gN=(t,e)=>w.some(()=>ci(t,!1,e)),T0=(t,e)=>de(Pr(e,t),$s),wf=(t,e)=>de(Pr(e,t),Mi("caption")),Sd=(t,e)=>w.some(()=>{tr(e),t.selection.setCursorLocation(e.dom,0)}),R0=(t,e)=>t?Yv(e):Xv(e),xf=(t,e)=>{const n=T(t.selection.getStart(!0)),o=ca(t);return t.selection.isCollapsed()&&0===o.length?((t,e,n)=>{const o=T(t.getBody());return wf(o,n).fold(()=>((r,s,i,a)=>{const l=H.fromRangeStart(r.selection.getRng());return T0(i,a).bind(c=>{return _e(c)?Sd(r,c):(u=i,h=c,g=l,Ol(s,r.getBody(),g).bind(b=>T0(u,T(b.getNode())).bind(p=>Ht(p,h)?w.none():w.some(Bt))));var u,h,g})})(t,e,o,n).orThunk(()=>wr(((r,s)=>{const i=H.fromRangeStart(r.selection.getRng());return R0(s,i)||Jn(s,r.getBody(),i).exists(a=>R0(s,a))})(t,e),Bt)),r=>((s,i,a,l)=>{const c=H.fromRangeStart(s.selection.getRng());return _e(l)?Sd(s,l):(u=a,h=l,g=c,Ol(f=i,(d=s).getBody(),g).fold(()=>w.some(Bt),b=>{return v=f,_=g,C=b,rn((p=h).dom).bind(E=>yo(p.dom).map(k=>v?_.isEqual(E)&&C.isEqual(k):_.isEqual(k)&&C.isEqual(E))).getOr(!0)?((p,v)=>Sd(p,v))(d,h):((p,v,_)=>wf(p,T(_.getNode())).fold(()=>w.some(Bt),C=>wr(!Ht(C,v),Bt)))(u,h,b);var p,v,_,C}));var d,u,f,h,g})(t,e,o,r))})(t,e,n):((r,s,i)=>{const a=T(r.getBody()),l=r.selection.getRng();return 0!==i.length?O0(r,i,w.none()):(c=r,u=l,wf(d=a,s).fold(()=>{return h=c,((t,e)=>{const n=(s=t,i=>Ht(s,i)),o=((s,i)=>{const a=kd(s.startContainer,i),l=kd(s.endContainer,i);return je(a,l,bf)})(e,n),r=((s,i)=>{const a=h=>Tl(T(h),i),l=a(s.startContainer),c=a(s.endContainer),d=l.isSome(),u=c.isSome(),f=je(l,c,Ht).getOr(!1);return{startTable:l,endTable:c,isStartInTable:d,isEndInTable:u,isSameTable:f,isMultiTable:!f&&d&&u}})(e,n);var s;return((s,i,a)=>s.exists(l=>{return d=a,!w0(c=l)&&x0(c,d).exists(u=>{const f=u.dom.rows;return 1===f.length&&1===f[0].cells.length})&&Om(l.start,i);var c,d}))(o,e,n)?o.map(s=>zl.singleCellTable(e,s.start)):r.isMultiTable?((s,i,a,l)=>E0(s,i,a,l).bind(({start:c,end:d})=>{const u=c.bind(yf).getOr([]),f=d.bind(yf).getOr([]);if(u.length>0&&f.length>0){const h=S0(a,i);return w.some(zl.multiTable(u,f,h))}return w.none()}))(o,r,e,n):((s,i,a,l)=>E0(s,i,a,l).bind(({start:c,end:d})=>c.or(d)).bind(c=>{const{isSameTable:d}=i,u=yf(c).getOr([]);if(d&&c.cells.length===u.length)return w.some(zl.fullTable(c.table));if(u.length>0){if(d)return w.some(zl.partialTable(u,w.none()));{const f=S0(a,i);return w.some(zl.partialTable(u,w.some({...i,rng:f})))}}return w.none()}))(o,r,e,n)})(d,u).bind(p=>p.fold(dt(Cf,h),dt(gN,h),dt(O0,h),dt(fN,h)));var h},h=>Sd(c,h)));var c,d,u})(t,n,o)},ui=(t,e)=>{let n=e;for(;n&&n!==t;){if(It(n)||At(n))return n;n=n.parentNode}return null},hN=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],bN=Q.each,Ef=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),o=r=>ce(hN,s=>xe(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const i=l=>{const c={};return bN(e.getAttribs(l),d=>{const u=d.nodeName.toLowerCase();"style"===u||o(u)||(c[u]=e.getAttrib(l,u))}),c},a=(l,c)=>{for(const d in l)if(Ot(l,d)){const u=c[d];if(we(u)||l[d]!==u)return!1;delete c[d]}for(const d in c)if(Ot(c,d))return!1;return!0};return!(A(r)&&A(s)&&(!a(i(r),i(s))||!a(e.parseStyle(e.getAttrib(r,"style")),e.parseStyle(e.getAttrib(s,"style"))))||Zn(r)||Zn(s))},isAttributeInternal:o}},D0=(t,e,n,o)=>{const r=n.name;for(let s=0,i=t.length;s<i;s++){const a=t[s];if(a.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:a,nodes:[n]}}}if(n.attributes)for(let s=0,i=e.length;s<i;s++){const a=e[s],l=a.name;if(l in n.attributes.map){const c=o.attributes[l];c?c.nodes.push(n):o.attributes[l]={filter:a,nodes:[n]}}}},B0=(t,e)=>{const n=(o,r)=>{Mt(o,s=>{const i=Fe(s.nodes);X(s.filter.callbacks,a=>{for(let l=i.length-1;l>=0;l--){const c=i[l];(r?void 0!==c.attr(s.filter.name):c.name===s.filter.name)&&!ve(c.parent)||i.splice(l,1)}i.length>0&&a(i,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},L0=(t,e,n,o={})=>{const r=((s,i,a)=>{const l={nodes:{},attributes:{}};return a.firstChild&&((c,d)=>{let u=c;for(;u=u.walk();)D0(s,i,u,l)})(a),l})(t,e,n);B0(r,o)},kf=(t,e,n)=>{if(t.insert&&e(n)){const o=new pn("br",1);o.attr("data-mce-bogus","1"),n.empty().append(o)}else n.empty().append(new pn("#text",3)).value=Qt},P0=(t,e)=>{const n=t?.firstChild;return et(n)&&n===t.lastChild&&n.name===e},Ul=(t,e,n,o)=>o.isEmpty(e,n,r=>!0===t.getElementRule(r.name)?.paddEmpty),vN=t=>{let e;for(let n=t;n;n=n.parent){const o=n.attr("contenteditable");if("false"===o)break;"true"===o&&(e=n)}return w.from(e)},Sf=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const o=t.children();for(const r of o)n&&!e.isValidChild(n.name,r.name)&&Sf(r,e,n);t.unwrap()}},Nf=(t,e,n,o=Bt)=>{const r=e.getTextBlockElements(),s=e.getNonEmptyElements(),i=e.getWhitespaceElements(),a=Q.makeMap("tr,td,th,tbody,thead,tfoot,table"),l=new Set,c=d=>d!==n&&!a[d.name];for(let d=0;d<t.length;d++){const u=t[d];let f,h,g;if(!u.parent||l.has(u))continue;if(r[u.name]&&"li"===u.parent.name){let p=u.next;for(;p&&r[p.name];)p.name="li",l.add(p),u.parent.insert(p,u.parent),p=p.next;u.unwrap();continue}const b=[u];for(f=u.parent;f&&!e.isValidChild(f.name,u.name)&&c(f);f=f.parent)b.push(f);if(f&&b.length>1)if(e.isValidChild(f.name,u.name)){b.reverse(),h=b[0].clone(),o(h);let p=h;for(let v=0;v<b.length-1;v++){e.isValidChild(p.name,b[v].name)&&v>0?(g=b[v].clone(),o(g),p.append(g)):g=p;for(let _=b[v].firstChild;_&&_!==b[v+1];){const C=_.next;g.append(_),_=C}p=g}Ul(e,s,i,h)?f.insert(u,b[0],!0):(f.insert(h,b[0],!0),f.insert(u,h)),f=b[0],(Ul(e,s,i,f)||P0(f,"br"))&&f.empty().remove()}else Sf(u,e);else if(u.parent){if("li"===u.name){let p=u.prev;if(p&&("ul"===p.name||"ol"===p.name)){p.append(u);continue}if(p=u.next,p&&("ul"===p.name||"ol"===p.name)&&p.firstChild){p.insert(u,p.firstChild,!0);continue}const v=new pn("ul",1);o(v),u.wrap(v);continue}if(e.isValidChild(u.parent.name,"div")&&e.isValidChild("div",u.name)){const p=new pn("div",1);o(p),u.wrap(p)}else Sf(u,e)}}},M0=(t,e,n=e.parent)=>!(!n||!t.children[e.name]||t.isValidChild(n.name,e.name))||!(!n||"a"!==e.name||!((o,r)=>{let s=o;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n)),Af=t=>t.collapsed?t:(e=>{const n=H.fromRangeStart(e),o=H.fromRangeEnd(e),r=e.commonAncestorContainer;return Jn(!1,r,o).map(s=>!nr(n,o,r)&&nr(n,s,r)?((i,a,l,c)=>{const d=document.createRange();return d.setStart(i,a),d.setEnd(l,c),d})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),Of=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},I0=(t,e)=>{const n=H.after(t),o=rr(e).prev(n);return o?o.toRange():null},wN=["pre"],Tf=te,xN=(t,e,n)=>{var o,r;const s=t.selection,i=t.dom,a=t.parser,l=n.merge,c=us({validate:!0},t.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,d);let u=s.getRng();const f=u.startContainer,h=t.getBody();var C,E;f===h&&s.isCollapsed()&&i.isBlock(h.firstChild)&&(C=t,et(E=h.firstChild)&&!C.schema.getVoidElements()[E.nodeName])&&i.isEmpty(h.firstChild)&&(u=i.createRng(),u.setStart(h.firstChild,0),u.setEnd(h.firstChild,0),s.setRng(u)),s.isCollapsed()||(C=>{const E=C.dom,k=Af(C.selection.getRng());C.selection.setRng(k);const N=E.getParent(k.startContainer,Tf);var O,M,$;O=E,M=k,et($=N)&&$===O.getParent(M.endContainer,Tf)&&Om(T($),M)?Cf(C,k,T(N)):k.startContainer===k.endContainer&&k.endOffset-k.startOffset==1&&U(k.startContainer.childNodes[k.startOffset])?k.deleteContents():C.getDoc().execCommand("Delete",!1)})(t);const g=s.getNode(),b={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},p=a.parse(e,b);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,o=e.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((r,s)=>{const i=r.getNonEmptyElements();return et(s)&&(s.isEmpty(i)||(l=s,r.getBlockElements()[l.name]&&et((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===Qt)(l.firstChild)));var l,c})(t,o)&&(o=o?.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)})(t.schema,p)&&((C,E)=>!!Of(C,E))(i,g))return u=((t,e,n,o)=>{const r=((u,f,h)=>{const g=f.serialize(h);return(b=>{var p,v;const _=b.firstChild,C=b.lastChild;return _&&"META"===_.nodeName&&(null===(p=_.parentNode)||void 0===p||p.removeChild(_)),C&&"mce_marker"===C.id&&(null===(v=C.parentNode)||void 0===v||v.removeChild(C)),b})(u.createFragment(g))})(e,t,o),s=Of(e,n.startContainer),i=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||et(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((o=e.firstChild).data===Qt||Dt(o)))?t.slice(0,-1):t;var o,e,n})(Et(null!==(l=r.firstChild?.childNodes)&&void 0!==l?l:[],u=>"LI"===u.nodeName));var l;const c=e.getRoot(),d=u=>{const f=H.fromRangeStart(n),h=rr(e.getRoot()),b=(1===u?h.prev(f):h.next(f))?.getNode();return!b||Of(e,b)!==s};return s?d(1)?((u,f,h)=>{const g=u.parentNode;return g&&Q.each(f,b=>{g.insertBefore(b,u)}),((b,p)=>{const v=H.before(b),_=rr(p).next(v);return _?_.toRange():null})(u,h)})(s,i,c):d(2)?(u=s,h=c,e.insertAfter((f=i).reverse(),u),I0(f[0],h)):((u,f,h,g)=>{const b=((v,_)=>{const C=_.cloneRange(),E=_.cloneRange();return C.setStartBefore(v),E.setEndAfter(v),[C.cloneContents(),E.cloneContents()]})(u,g),p=u.parentNode;return p&&(p.insertBefore(b[0],u),Q.each(f,v=>{p.insertBefore(v,u)}),p.insertBefore(b[1],u),p.removeChild(u)),I0(f[f.length-1],h)})(s,i,c,n):null;var u,f,h})(c,i,s.getRng(),p),u&&s.setRng(u),e;!0===n.paste&&((C,E,k,N)=>{var O;const M=E.firstChild,$=E.lastChild,z=M===("bookmark"===$.attr("data-mce-type")?$.prev:$),R=ut(wN,M.name);if(z&&R){const P="false"!==M.attr("contenteditable"),B=(null===(O=C.getParent(k,C.isBlock))||void 0===O?void 0:O.nodeName.toLowerCase())===M.name,I=w.from(ui(N,k)).forall(It);return P&&B&&I}return!1})(i,p,g,t.getBody())&&(null===(o=p.firstChild)||void 0===o||o.unwrap()),(C=>{let E=C;for(;E=E.walk();)1===E.type&&E.attr("data-mce-fragment","1")})(p);let v=p.lastChild;if(v&&"mce_marker"===v.attr("id")){const C=v;for(v=v.prev;v;v=v.walk(!0))if(3===v.type||!i.isBlock(v.name)){v.parent&&t.schema.isValidChild(v.parent.name,"span")&&v.parent.insert(C,v,"br"===v.name);break}}if(t._selectionOverrides.showBlockCaretContainer(g),b.invalid){t.selection.setContent(d);let C,E=s.getNode();const k=t.getBody();for(oe(E)?E=C=k:C=E;C&&C!==k;)E=C,C=C.parentNode;e=E===k?k.innerHTML:i.getOuterHTML(E);const N=a.parse(e),O=(P=>{for(let B=P;B;B=B.walk())if("mce_marker"===B.attr("id"))return w.some(B);return w.none()})(N),M=O.bind(vN).getOr(N);O.each(P=>P.replace(p));const $=p.children(),z=null!==(r=p.parent)&&void 0!==r?r:N;p.unwrap();const R=Et($,P=>M0(t.schema,P,z));Nf(R,t.schema,M),L0(a.getNodeFilters(),a.getAttributeFilters(),N),e=c.serialize(N),E===k?i.setHTML(k,e):i.setOuterHTML(E,e)}else e=c.serialize(p),((C,E,k)=>{var N;if("all"===k.getAttribute("data-mce-bogus"))null===(N=k.parentNode)||void 0===N||N.insertBefore(C.dom.createFragment(E),k);else{const O=k.firstChild,M=k.lastChild;!O||O===M&&"BR"===O.nodeName?C.dom.setHTML(k,E):C.selection.setContent(E,{no_events:!0})}})(t,e,g);var _;return((C,E)=>{const k=C.schema.getTextInlineElements(),N=C.dom;if(E){const O=C.getBody(),M=Ef(C);Q.each(N.select("*[data-mce-fragment]"),$=>{if(et(k[$.nodeName.toLowerCase()])&&Yn(nf(N,$),P=>!$v.has(P)))for(let z=$.parentElement;et(z)&&z!==O&&!GS(N,$,z);z=z.parentElement)if(M.compare(z,$)){N.remove($,!0);break}})}})(t,l),((C,E)=>{var k,N,O;let M;const $=C.dom,z=C.selection;if(!E)return;z.scrollIntoView(E);const R=ui(C.getBody(),E);if(R&&"false"===$.getContentEditable(R))return $.remove(E),void z.select(R);let P=$.createRng();const B=E.previousSibling;if(U(B)){P.setStart(B,null!==(N=null===(k=B.nodeValue)||void 0===k?void 0:k.length)&&void 0!==N?N:0);const tt=E.nextSibling;U(tt)&&(B.appendData(tt.data),null===(O=tt.parentNode)||void 0===O||O.removeChild(tt))}else P.setStartBefore(E),P.setEndBefore(E);const I=$.getParent(E,$.isBlock);$.remove(E),I&&$.isEmpty(I)&&(po(T(I)),P.setStart(I,0),P.setEnd(I,0),Tf(I)||I.getAttribute("data-mce-fragment")||!(M=(tt=>{let G=H.fromRangeStart(tt);return G=rr(C.getBody()).next(G),G?.toRange()})(P))?$.add(I,$.create("br",{"data-mce-bogus":"1"})):(P=M,$.remove(I))),z.setRng(P)})(t,i.get("mce_marker")),_=t.getBody(),Q.each(_.getElementsByTagName("*"),C=>{C.removeAttribute("data-mce-fragment")}),((C,E)=>{w.from(C.getParent(E,"td,th")).map(T).each(Hc)})(i,s.getStart()),(C=>{X(Fe(C.getBody().querySelectorAll("details")),E=>{const k=Et(Fe(E.children),N=>"SUMMARY"===N.nodeName);k.length>1&&X(k.slice(1),N=>{const O=T(N);xr(O,"mce-accordion-summary"),lh(O,"p")})})})(t),((C,E,k)=>{const N=Qa(T(k),O=>Ht(O,T(E)));Hr(N,N.length-2).filter(Ye).fold(()=>Hu(C,E),O=>Hu(C,O.dom))})(t.schema,t.getBody(),s.getStart()),e},Nd=t=>t instanceof pn,Rf=(t,e,n)=>{var o;t.dom.setHTML(t.getBody(),e),!0!==n&&li(o=t)&&rn(o.getBody()).each(r=>{const s=r.getNode(),i=pt(s)?rn(s).getOr(r):r;o.selection.setRng(i.toRange())})},F0=t=>Vt(t)?t:ne,Df=(t,e,n)=>{const o=e(t),r=F0(n);return o.orThunk(()=>r(t)?w.none():((s,i,a)=>{let l=s.dom;const c=F0(a);for(;l.parentNode;){l=l.parentNode;const d=T(l),u=i(d);if(u.isSome())return u;if(c(d))break}return w.none()})(t,e,r))},Bf=Pm,j0=(t,e,n)=>{const o=t.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(to(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},Lf=(t,e,n,o,r)=>{const s=t.dom.getRoot();if(e===s)return!1;const i=t.dom.getParent(e,a=>!!j0(t,a,n)||a.parentNode===s||!!ir(t,a,n,o,!0));return!!ir(t,i,n,o,r)},Ad=(t,e,n)=>!(!Ne(n)||!Bf(e,n.inline))||!(!sr(n)||!Bf(e,n.block))||!!to(n)&&A(e)&&t.is(e,n.selector),z0=(t,e,n,o,r,s)=>{const i=n[o],a="attributes"===o;if(Vt(n.onmatch))return n.onmatch(e,n,o);if(i)if(Ai(i)){for(let l=0;l<i.length;l++)if(a?t.getAttrib(e,i[l]):ud(t,e,i[l]))return!0}else for(const l in i)if(Ot(i,l)){const c=a?t.getAttrib(e,l):ud(t,e,l),d=ds(i[l],s),u=ve(c)||Kr(c);if(u&&ve(d))continue;if(r&&u&&!n.exact||(!r||n.exact)&&!Bf(c,Mm(d,l)))return!1}return!0},ir=(t,e,n,o,r)=>{const s=t.formatter.get(n),i=t.dom;if(s&&A(e))for(let a=0;a<s.length;a++){const l=s[a];if(Ad(t.dom,e,l)&&z0(i,e,l,"attributes",r,o)&&z0(i,e,l,"styles",r,o)){const c=l.classes;if(c)for(let d=0;d<c.length;d++)if(!t.dom.hasClass(e,ds(c[d],o)))return;return l}}},Pf=(t,e,n,o,r)=>{if(o)return Lf(t,o,e,n,r);if(o=t.selection.getNode(),Lf(t,o,e,n,r))return!0;const s=t.selection.getStart();return!(s===o||!Lf(t,s,e,n,r))},U0=t=>(e=>{const n=[];let o=e;for(;o;){if(U(o)&&"\ufeff"!==o.data||o.childNodes.length>1)return[];A(o)&&n.push(o),o=o.firstChild}return n})(t).length>0,H0=t=>{if(t){const e=new y(t,t);for(let n=e.current();n;n=e.next())if(U(n))return n}return null},Mf=t=>{const e=Ee("span");return dn(e,{id:xm,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&fe(e,Er("\ufeff")),e},If=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(U0(e))ci(t,!1,T(e),n);else{const s=r.getRng(),i=o.getParent(e,o.isBlock),a=s.startContainer,l=s.startOffset,c=s.endContainer,d=s.endOffset,u=(f=>{const h=H0(f);return h&&"\ufeff"===h.data.charAt(0)&&h.deleteData(0,1),h})(e);o.remove(e,!0),a===u&&l>0&&s.setStart(u,l-1),c===u&&d>0&&s.setEnd(u,d-1),i&&o.isEmpty(i)&&tr(T(i)),r.setRng(s)}},Ff=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(e)If(t,e,n);else if(!(e=oi(t.getBody(),r.getStart())))for(;e=o.get(xm);)If(t,e,n)},$0=(t,e)=>(t.appendChild(e),e),q0=(t,e)=>{var n;const o=Vo(t,(s,i)=>$0(s,i.cloneNode(!1)),e),r=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return $0(o,r.createTextNode("\ufeff"))},V0=t=>{const e=Mf(!1),n=q0(t,e.dom);return{caretContainer:e,caretPosition:H(n,0)}},W0=(t,e)=>{const{caretContainer:n,caretPosition:o}=V0(e);return qe(T(t),n),ie(T(t)),o},K0=(t,e)=>{const n=t.schema.getTextInlineElements();return Ot(n,Yt(e))&&!_o(e.dom)&&!yt(e.dom)},Y0=t=>_o(t.dom)&&U0(t.dom),Hl={},X0=J(["pre"]);((t,e)=>{Hl[t]||(Hl[t]=[]),Hl[t].push(n=>{if(!n.selection.getRng().collapsed){const o=n.selection.getSelectedBlocks(),r=Et(Et(o,X0),(s=o,i=>{const a=i.previousSibling;return X0(a)&&ut(s,a)}));X(r,s=>{((i,a)=>{const l=T(a),c=mo(l).dom;ie(l),Ar(T(i),[Ee("br",c),Ee("br",c),...Se(l)])})(s.previousSibling,s)})}var s})})("pre");const G0=["fontWeight","fontStyle","color","fontSize","fontFamily"],Q0=(t,e)=>{const n=t.get(e);return Gt(n)?de(n,o=>{return Ne(o)&&"span"===o.inline&&Ae((r=o).styles)&&ce(an(r.styles),s=>ut(G0,s));var r}):w.none()},J0=(t,e)=>gn(e,H.fromRangeStart(t)).isNone(),Z0=(t,e)=>!1===on(e,H.fromRangeEnd(t)).exists(n=>!Dt(n.getNode())||on(e,n).isSome()),ty=t=>e=>En(e)&&t.isEditable(e),ey=t=>Et(t.getSelectedBlocks(),ty(t.dom)),jf=Q.each,zf=t=>A(t)&&!Zn(t)&&!_o(t)&&!yt(t),ny=(t,e)=>{for(let n=t;n;n=n[e]){if(U(n)&&Bn(n.data))return t;if(A(n)&&!Zn(n))return n}return t},oy=(t,e,n)=>{const o=Ef(t),r=A(e)&&ri(e),s=A(n)&&ri(n);if(r&&s){const i=ny(e,"previousSibling"),a=ny(n,"nextSibling");if(o.compare(i,a)){for(let l=i.nextSibling;l&&l!==a;){const c=l;l=l.nextSibling,i.appendChild(c)}return t.dom.remove(a),Q.each(Q.grep(a.childNodes),l=>{i.appendChild(l)}),i}}return n},ry=(t,e,n,o)=>{var r;if(o&&!1!==e.merge_siblings){const s=null!==(r=oy(t,Pb(o),o))&&void 0!==r?r:o;oy(t,s,Pb(s,!0))}},Uf=(t,e,n)=>{jf(t.childNodes,o=>{zf(o)&&(e(o)&&n(o),o.hasChildNodes()&&Uf(o,e,n))})},sy=(t,e)=>n=>!(!n||!ud(t,n,e)),iy=(t,e,n)=>o=>{var r,s;t.setStyle(o,e,n),""===o.getAttribute("style")&&o.removeAttribute("style"),r=t,"SPAN"===(s=o).nodeName&&0===r.getAttribs(s).length&&r.remove(s,!0)},mi=er([{keep:[]},{rename:["name"]},{removed:[]}]),SN=/^(src|href|style)$/,Hf=Q.each,Od=Pm,ay=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),ly=(t,e,n)=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(A(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return U(o)&&n&&r>=o.data.length&&(o=new y(o,t.getBody()).next()||o),U(o)&&!n&&0===r&&(o=new y(o,t.getBody()).prev()||o),o},cy=(t,e)=>{const n=e?"firstChild":"lastChild",o=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&o?"TR"===t.nodeName&&o[n]||o:t},$f=(t,e,n,o)=>{var r;const s=t.create(n,o);return null===(r=e.parentNode)||void 0===r||r.insertBefore(s,e),s.appendChild(e),s},dy=(t,e,n,o,r)=>{const s=T(e),i=T(t.create(o,r)),a=n?Jo(s):Tc(s);return Ar(i,a),n?(qe(s,i),ts(i,s)):(To(s,i),fe(i,s)),i.dom},uy=(t,e,n)=>{const o=e.parentNode;let r;const s=t.dom,i=fn(t);var a;sr(n)&&o===s.getRoot()&&(n.list_block&&Od(e,n.list_block)||X(Fe(e.childNodes),a=>{da(t,i,a.nodeName.toLowerCase())?r?r.appendChild(a):(r=$f(s,a,i),s.setAttribs(r,Cl(t))):r=null})),to(a=n)&&Ne(a)&&Cr(Zt(a,"mixed"),!0)&&!Od(n.inline,e)||s.remove(e,!0)},my=(t,e,n)=>_n(t)?{name:e,value:null}:{name:t,value:ds(e,n)},fy=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},gy=(t,e,n,o,r)=>{let s=!1;Hf(n.styles,(i,a)=>{const{name:l,value:c}=my(a,i,o),d=Mm(c,l);(n.remove_similar||le(c)||!A(r)||Od(ud(t,r,l),d))&&t.setStyle(e,l,""),s=!0}),s&&fy(t,e)},py=(t,e,n,o,r)=>{const s=t.dom,i=Ef(t),a=t.schema;if(Ne(e)&&qc(a,e.inline)&&Ks(a,o)&&o.parentElement===t.getBody())return uy(t,o,e),mi.removed();if(!e.ceFalseOverride&&o&&"false"===s.getContentEditableParent(o)||o&&!Ad(s,o,e)&&(!e.links||"A"!==o.nodeName))return mi.keep();const l=o,c=e.preserve_attributes;if(Ne(e)&&"all"===e.remove&&Gt(c)){const d=Et(s.getAttribs(l),u=>ut(c,u.name.toLowerCase()));if(s.removeAllAttribs(l),X(d,u=>s.setAttrib(l,u.name,u.value)),d.length>0)return mi.rename("span")}if("all"!==e.remove){gy(s,l,e,n,r),Hf(e.attributes,(u,f)=>{const{name:h,value:g}=my(f,u,n);if(e.remove_similar||le(g)||!A(r)||Od(s.getAttrib(r,h),g)){if("class"===h){const b=s.getAttrib(l,h);if(b){let p="";if(X(b.split(/\s+/),v=>{/mce\-\w+/.test(v)&&(p+=(p?" ":"")+v)}),p)return void s.setAttrib(l,h,p)}}if(SN.test(h)&&l.removeAttribute("data-mce-"+h),"style"===h&&J(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(h),void s.setStyle(l,"list-style-type","none");"class"===h&&l.removeAttribute("className"),l.removeAttribute(h)}}),Hf(e.classes,u=>{u=ds(u,n),A(r)&&!s.hasClass(r,u)||s.removeClass(l,u)});const d=s.getAttribs(l);for(let u=0;u<d.length;u++)if(!i.isAttributeInternal(d[u].nodeName))return mi.keep()}return"none"!==e.remove?(uy(t,l,e),mi.removed()):mi.keep()},NN=(t,e,n,o)=>py(t,e,n,o,o).fold(ot(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),ot(null)),hy=(t,e,n,o,r)=>{(o||t.selection.isEditable())&&((s,i,a,l,c)=>{const d=s.formatter.get(i),u=d[0],f=s.dom,h=s.selection,g=C=>{const E=((k,N,O,M,$)=>{let z;return N.parentNode&&X(md(k.dom,N.parentNode).reverse(),R=>{if(!z&&A(R)&&"_start"!==R.id&&"_end"!==R.id){const P=ir(k,R,O,M,$);P&&!1!==P.split&&(z=R)}}),z})(s,C,i,a,c);return((k,N,O,M,$,z,R,P)=>{var B,I;let tt,G;const ht=k.dom;if(O){const rt=O.parentNode;for(let kt=M.parentNode;kt&&kt!==rt;kt=kt.parentNode){let Nt=ht.clone(kt,!1);for(let it=0;it<N.length&&(Nt=NN(k,N[it],P,Nt),null!==Nt);it++);Nt&&(tt&&Nt.appendChild(tt),G||(G=Nt),tt=Nt)}R.mixed&&ht.isBlock(O)||(M=null!==(B=ht.split(O,M))&&void 0!==B?B:M),tt&&G&&(null===(I=$.parentNode)||void 0===I||I.insertBefore(tt,$),G.appendChild($),Ne(R)&&ry(k,R,0,tt))}return M})(s,d,E,C,C,0,u,a)},b=C=>ce(d,E=>$l(s,E,a,C,C)),p=C=>{const E=Fe(C.childNodes),k=b(C)||ce(d,O=>Ad(f,C,O)),N=C.parentNode;if(!k&&et(N)&&Fm(u)&&b(N),u.deep&&E.length)for(let O=0;O<E.length;O++)p(E[O]);X(["underline","line-through","overline"],O=>{A(C)&&s.dom.getStyle(C,"text-decoration")===O&&C.parentNode&&Ib(f,C.parentNode)===O&&$l(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:O}},void 0,C)})},v=C=>{const E=f.get(C?"_start":"_end");if(E){let k=E[C?"firstChild":"lastChild"];return Zn(N=k)&&A(N)&&("_start"===N.id||"_end"===N.id)&&(k=k[C?"firstChild":"lastChild"]),U(k)&&0===k.data.length&&(k=C?E.previousSibling||E.nextSibling:E.nextSibling||E.previousSibling),f.remove(E,!0),k}var N;return null},_=C=>{let E,k,N=si(f,C,d,C.collapsed);if(u.split){if(N=yd(N),E=ly(s,N,!0),k=ly(s,N),E!==k){if(E=cy(E,!0),k=cy(k,!1),ay(f,E,k)){const M=w.from(E.firstChild).getOr(E);return g(dy(f,M,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void v(!0)}if(ay(f,k,E)){const M=w.from(k.lastChild).getOr(k);return g(dy(f,M,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void v(!1)}E=$f(f,E,"span",{id:"_start","data-mce-type":"bookmark"}),k=$f(f,k,"span",{id:"_end","data-mce-type":"bookmark"});const O=f.createRng();O.setStartAfter(E),O.setEndBefore(k),Dl(f,O,M=>{X(M,$=>{Zn($)||Zn($.parentNode)||g($)})}),g(E),g(k),E=v(!0),k=v()}else E=k=g(E);N.startContainer=E.parentNode?E.parentNode:E,N.startOffset=f.nodeIndex(E),N.endContainer=k.parentNode?k.parentNode:k,N.endOffset=f.nodeIndex(k)+1}Dl(f,N,O=>{X(O,p)})};if(l){if(Rl(l)){const C=f.createRng();C.setStartBefore(l),C.setEndAfter(l),_(C)}else _(l);Zb(s,i,l,a)}else h.isCollapsed()&&Ne(u)&&!ca(s).length?((t,e,n,o)=>{const r=t.dom,s=t.selection;let i=!1;const a=t.formatter.get(e);if(!a)return;const l=s.getRng(),c=l.startContainer,d=l.startOffset;let u=c;U(c)&&(d!==c.data.length&&(i=!0),u=u.parentNode);const f=[];let h;for(;u;){if(ir(t,u,e,n,o)){h=u;break}u.nextSibling&&(i=!0),f.push(u),u=u.parentNode}if(h)if(i){const g=s.getBookmark();l.collapse(!0);let b=si(r,l,a,!0);b=yd(b),t.formatter.remove(e,n,b,o),s.moveToBookmark(g)}else{const g=oi(t.getBody(),h),b=Mf(!1).dom;((_,C,E)=>{var k,N;const O=_.dom,M=O.getParent(E,dt(Bm,_.schema));M&&O.isEmpty(M)?null===(k=E.parentNode)||void 0===k||k.replaceChild(C,E):(($=>{const z=x($,"br"),R=Et((P=>{const B=[];let I=P.dom;for(;I;)B.push(T(I)),I=I.lastChild;return B})($).slice(-1),un);z.length===R.length&&X(R,ie)})(T(E)),O.isEmpty(E)?null===(N=E.parentNode)||void 0===N||N.replaceChild(C,E):O.insertAfter(C,E))})(t,b,g??h);const p=((_,C,E,k,N,O)=>{const M=_.formatter,$=_.dom,z=Et(an(M.get()),P=>P!==k&&!se(P,"removeformat")),R=(P=_,B=E,Me(z,(tt,G)=>{const ht=Im(P,G,Nt=>{const it=gt=>Vt(gt)||gt.length>1&&"%"===gt.charAt(0);return ce(["styles","attributes"],gt=>Zt(Nt,gt).exists(_t=>{const D=Gt(_t)?_t:Ko(_t);return ce(D,it)}))});return P.formatter.matchNode(B,G,{},ht)?tt.concat([G]):tt},[]));var P,B;if(Et(R,P=>!((B,I,tt)=>{const G=["inline","block","selector","attributes","styles","classes"],ht=rt=>lo(rt,(kt,Nt)=>ce(G,it=>it===Nt));return Im(B,I,rt=>{const kt=ht(rt);return Im(B,tt,Nt=>{const it=ht(Nt);return((gt,_t,D=qn)=>Da(D).eq(gt,_t))(kt,it)})})})(_,P,k)).length>0){const P=E.cloneNode(!1);return $.add(C,P),M.remove(k,N,P,O),$.remove(P),w.some(P)}return w.none()})(t,b,h,e,n,o),v=q0(f.concat(p.toArray()),b);g&&If(t,g,!1),s.setCursorLocation(v,1),r.isEmpty(h)&&r.remove(h)}})(s,i,a,c):(Lb(s,()=>Rm(s,_),C=>Ne(u)&&Pf(s,i,a,C)),s.nodeChanged()),C=s,k=a,"removeformat"===(E=i)?X(ey(C.selection),N=>{X(G0,O=>C.dom.setStyle(N,O,"")),fy(C.dom,N)}):Q0(C.formatter,E).each(N=>{X(ey(C.selection),O=>gy(C.dom,O,N,k,null))}),Zb(s,i,l,a);var C,E,k})(t,e,n,o,r)},$l=(t,e,n,o,r)=>py(t,e,n,o,r).fold(ne,s=>(t.dom.rename(o,s),!0),ge),by=Q.each,Td=Q.each,vy=(t,e,n,o)=>{if(Td(n.styles,(r,s)=>{t.setStyle(e,s,ds(r,o))}),n.styles){const r=t.getAttrib(e,"style");r&&t.setAttrib(e,"data-mce-style",r)}},AN=(t,e,n,o)=>{const r=t.formatter.get(e),s=r[0],i=!o&&t.selection.isCollapsed(),a=t.dom,l=t.selection,c=(g,b=s)=>{Vt(b.onformat)&&b.onformat(g,b,n,o),vy(a,g,b,n),Td(b.attributes,(p,v)=>{a.setAttrib(g,v,ds(p,n))}),Td(b.classes,p=>{const v=ds(p,n);a.hasClass(g,v)||a.addClass(g,v)})},d=(g,b)=>{let p=!1;return Td(g,v=>!(!to(v)||("false"!==a.getContentEditable(b)||v.ceFalseOverride)&&(!et(v.collapsed)||v.collapsed===i)&&a.is(b,v.selector)&&!_o(b)&&(c(b,v),p=!0,1))),p},f=(g,b,p)=>{const v=[];let _=!0;const C=s.inline||s.block,E=(g=>{if(bt(g)){const b=a.create(g);return c(b),b}return null})(C);Dl(g,b,k=>{let N;const O=M=>{let $=!1,z=_,R=!1;const P=M.parentNode,B=P.nodeName.toLowerCase(),I=g.getContentEditable(M);et(I)&&(z=_,_="true"===I,$=!0,R=Mb(t,M));const tt=_&&!$;if(Dt(M)&&!((G,ht,rt,kt)=>{if(mk(G)&&Ne(ht)&&rt.parentNode){const Nt=Yp(G.schema),it=((t,e)=>((n,o)=>{const r=n.dom;return r.parentNode?(s=T(r.parentNode),de(s.dom.childNodes,a=>(s=>!Ht(n,s)&&o(s))(T(a))).map(T)):w.none();var s})(t,e).isSome())(T(rt),gt=>_o(gt.dom));return Xn(Nt,kt)&&_e(T(rt.parentNode),!1)&&!it}return!1})(t,s,M,B))return N=null,void(sr(s)&&g.remove(M));if(G=M,sr(ht=s)&&!0===ht.wrapper&&ir(t,G,e,n))N=null;else{if(((G,ht,rt)=>{const kt=sr(Nt=s)&&!0!==Nt.wrapper&&Bm(t.schema,G)&&da(t,ht,C);var Nt;return rt&&kt})(M,B,tt)){const G=g.rename(M,C);return c(G),v.push(G),void(N=null)}if(to(s)){let G=d(r,M);if(!G&&et(P)&&Fm(s)&&(G=d(r,P)),!Ne(s)||G)return void(N=null)}et(E)&&((G,ht,rt,kt)=>{const Nt=G.nodeName.toLowerCase(),it=da(t,C,Nt)&&da(t,ht,C),gt=!p&&U(G)&&Xi(G.data),_t=_o(G),D=!Ne(s)||!g.isBlock(G);return(rt||kt)&&it&&!gt&&!_t&&D})(M,B,tt,R)?(N||(N=g.clone(E,!1),P.insertBefore(N,M),v.push(N)),R&&$&&(_=z),N.appendChild(M)):(N=null,X(Fe(M.childNodes),O),$&&(_=z),N=null)}var G,ht};X(k,O)}),!0===s.links&&X(v,k=>{const N=O=>{"A"===O.nodeName&&c(O,s),X(Fe(O.childNodes),N)};N(k)}),X(v,k=>{const N=(O=>{let M=0;return X(O.childNodes,$=>{var z;et(z=$)&&U(z)&&0===z.length||Zn($)||M++}),M})(k);var O;!(v.length>1)&&g.isBlock(k)||0!==N?(Ne(s)||sr(s)&&s.wrapper)&&(s.exact||1!==N||(k=de((O=k).childNodes,Dm).filter($=>"false"!==g.getContentEditable($)&&Ad(g,$,s)).map($=>{const z=g.clone($,!1);return c(z),g.replace(z,O,!0),g.remove($,!0),z}).getOr(O)),((O,M,$,z)=>{by(M,R=>{var P,B,I;Ne(R)&&by(O.dom.select(R.inline,z),P=>{zf(P)&&$l(O,R,$,P,R.exact?P:null)}),P=O.dom,I=z,(B=R).clear_child_styles&&jf(P.select(B.links?"*:not(a)":"*",I),G=>{zf(G)&&ri(G)&&jf(B.styles,(ht,rt)=>{P.setStyle(G,rt,"")})})})})(t,r,n,k),((O,M,$,z,R)=>{const P=R.parentNode;ir(O,P,$,z)&&$l(O,M,z,R)||M.merge_with_parents&&P&&O.dom.getParent(P,B=>!!ir(O,B,$,z)&&($l(O,M,z,R),!0))})(t,s,e,n,k),((O,M,$,z)=>{if(M.styles&&M.styles.backgroundColor){const R=sy(O,"fontSize");Uf(z,P=>R(P)&&ri(P),iy(O,"backgroundColor",ds(M.styles.backgroundColor,$)))}})(g,s,n,k),((O,M,$,z)=>{const R=P=>{if(A(P)&&A(P.parentNode)&&ri(P)){const B=Ib(O,P.parentNode);O.getStyle(P,"color")&&B?O.setStyle(P,"text-decoration",B):O.getStyle(P,"text-decoration")===B&&O.setStyle(P,"text-decoration",null)}};M.styles&&(M.styles.color||M.styles.textDecoration)&&(Q.walk(z,R,"childNodes"),R(z))})(g,s,0,k),((O,M,$,z)=>{if(Ne(M)&&("sub"===M.inline||"sup"===M.inline)){const R=sy(O,"fontSize");Uf(z,B=>R(B)&&ri(B),iy(O,"fontSize",""));const P=Et(O.select("sup"===M.inline?"sub":"sup",z),ri);O.remove(P,!0)}})(g,s,0,k),ry(t,s,0,k)):g.remove(k,!0)})},h=Rl(o)?o:l.getNode();if("false"===a.getContentEditable(h)&&!Mb(t,h))return d(r,o=h),void Jb(t,e,o,n);if(s){if(o)if(Rl(o)){if(!d(r,o)){const g=a.createRng();g.setStartBefore(o),g.setEndAfter(o),f(a,si(a,g,r),!0)}}else f(a,o,!0);else i&&Ne(s)&&!ca(t).length?((g,b,p)=>{let v;const _=g.selection,C=g.formatter.get(b);if(!C)return;const E=_.getRng();let k=E.startOffset;const N=E.startContainer.nodeValue;v=oi(g.getBody(),_.getStart());const O=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(N&&k>0&&k<N.length&&O.test(N.charAt(k))&&O.test(N.charAt(k-1))){const z=_.getBookmark();E.collapse(!0);let R=si(g.dom,E,C);R=yd(R),g.formatter.apply(b,p,R),_.moveToBookmark(z)}else{let z=v?H0(v):null;v&&"\ufeff"===z?.data||(M=g.getDoc(),$=Mf(!0).dom,v=M.importNode($,!0),z=v.firstChild,E.insertNode(v),k=1),g.formatter.apply(b,p,v),_.setCursorLocation(z,k)}var M,$})(t,e,n):(l.setRng(Af(l.getRng())),Lb(t,()=>{Rm(t,(g,b)=>{const p=b?g:si(a,g,r);f(a,p,!1)})},ge),t.nodeChanged()),Q0(t.formatter,e).each(g=>{var b;X(Et((p=>{const v=p.getSelectedBlocks(),_=p.getRng();if(p.isCollapsed())return[];if(1===v.length)return J0(_,v[0])&&Z0(_,v[0])?v:[];{const C=Ie(v).filter(N=>J0(_,N)).toArray(),E=ao(v).filter(N=>Z0(_,N)).toArray(),k=v.slice(1,-1);return C.concat(k).concat(E)}})(b=t.selection),ty(b.dom)),b=>vy(a,b,g,n))});b=t,Ot(Hl,g=e)&&X(Hl[g],p=>{p(b)})}var g,b;Jb(t,e,o,n)},yy=(t,e,n,o)=>{(o||t.selection.isEditable())&&AN(t,e,n,o)},_y=t=>Ot(t,"vars"),Cy=t=>t.selection.getStart(),wy=(t,e,n,o,r)=>br(e,s=>{const i=t.formatter.matchNode(s,n,r??{},o);return!we(i)},s=>!!j0(t,s,n)||!o&&et(t.formatter.matchNode(s,n,r,!0))),xy=(t,e)=>{const n=e??Cy(t);return Et(md(t.dom,n),o=>A(o)&&!yt(o))},Ey=(t,e,n)=>{const o=xy(t,e);Mt(n,(r,s)=>{const i=a=>{const l=wy(t,o,s,a.similar,_y(a)?a.vars:void 0),c=l.isSome();if(a.state.get()!==c){a.state.set(c);const d=l.getOr(e);_y(a)?a.callback(c,{node:d,format:s,parents:o}):X(a.callbacks,u=>u(c,{node:d,format:s,parents:o}))}};X([r.withSimilar,r.withoutSimilar],i),X(r.withVars,i)})},ky=Q.explode,Sy=()=>{const t={};return{addFilter:(e,n)=>{X(ky(e),o=>{Ot(t,o)||(t[o]={name:o,callbacks:[]}),t[o].callbacks.push(n)})},getFilters:()=>Ko(t),removeFilter:(e,n)=>{X(ky(e),o=>{if(Ot(t,o))if(et(n)){const r=t[o],s=Et(r.callbacks,i=>i!==n);s.length>0?r.callbacks=s:delete t[o]}else delete t[o]})}}},Ny=(t,e)=>{t.addNodeFilter("br",(n,o,r)=>{const s=Q.extend({},e.getBlockElements()),i=e.getNonEmptyElements(),a=e.getWhitespaceElements();s.body=1;const l=c=>{return c.name in s&&(1===(u=c).type&&qc(e,u.name)&&we(u.attr(ll)));var u};for(let c=0,d=n.length;c<d;c++){let u=n[c],f=u.parent;if(f&&s[f.name]&&u===f.lastChild){let h=u.prev;for(;h;){const g=h.name;if("span"!==g||"bookmark"!==h.attr("data-mce-type")){"br"===g&&(u=null);break}h=h.prev}if(u&&(u.remove(),Ul(e,i,a,f))){const g=e.getElementRule(f.name);g&&(g.removeEmpty?f.remove():g.paddEmpty&&kf(r,l,f))}}else{let h=u;for(;f&&f.firstChild===h&&f.lastChild===h&&(h=f,!s[f.name]);)f=f.parent;if(h===f){const g=new pn("#text",3);g.value=Qt,u.replace(g)}}}})},qf=t=>{const[e,...n]=t.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(r){const s=";base64"===r[2],i=s?(a=>{const l=/([a-z0-9+\/=\s]+)/i.exec(a);return l?l[1]:""})(o):decodeURIComponent(o);return w.some({type:r[1],data:i,base64Encoded:s})}return w.none()},Ay=(t,e,n=!0)=>{let o=e;if(n)try{o=atob(e)}catch{return w.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return w.some(new Blob([r],{type:t}))},Oy=t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=()=>{e(o.result)},o.onerror=()=>{var r;n(null===(r=o.error)||void 0===r?void 0:r.message)},o.readAsDataURL(t)});let TN=0;const Ty=(t,e,n)=>qf(t).bind(({data:o,type:r,base64Encoded:s})=>{if(e&&!s)return w.none();{const i=s?o:btoa(o);return n(i,r)}}),Ry=(t,e,n)=>{const o=t.create("blobid"+TN++,e,n);return t.add(o),o},Dy=(t,e,n=!1)=>Ty(e,n,(o,r)=>w.from(t.getByData(o,r)).orThunk(()=>Ay(r,o).map(s=>Ry(t,s,o))));function fi(t){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Vf(t,e){return(Vf=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n})(t,e)}function Wf(t,e,n){return(Wf=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(o,r,s){var i=[null];i.push.apply(i,r);var a=new(Function.bind.apply(o,i));return s&&Vf(a,s.prototype),a}).apply(null,arguments)}function Mo(t){return function(e){if(Array.isArray(e))return Kf(e)}(t)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,n){if(e){if("string"==typeof e)return Kf(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Kf(e,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var DN=Object.hasOwnProperty,By=Object.setPrototypeOf,BN=Object.isFrozen,LN=Object.getPrototypeOf,PN=Object.getOwnPropertyDescriptor,Sn=Object.freeze,ar=Object.seal,MN=Object.create,Ly=typeof Reflect<"u"&&Reflect,Rd=Ly.apply,Yf=Ly.construct;Rd||(Rd=function(t,e,n){return t.apply(e,n)}),Sn||(Sn=function(t){return t}),ar||(ar=function(t){return t}),Yf||(Yf=function(t,e){return Wf(t,Mo(e))});var Py,IN=Io(Array.prototype.forEach),FN=Io(Array.prototype.pop),ql=Io(Array.prototype.push),Dd=Io(String.prototype.toLowerCase),jN=Io(String.prototype.match),hs=Io(String.prototype.replace),zN=Io(String.prototype.indexOf),UN=Io(String.prototype.trim),Nn=Io(RegExp.prototype.test),Xf=(Py=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Yf(Py,e)});function Io(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Rd(t,e,o)}}function Wt(t,e){By&&By(t,null);for(var n=e.length;n--;){var o=e[n];if("string"==typeof o){var r=Dd(o);r!==o&&(BN(e)||(e[n]=r),o=r)}t[o]=!0}return t}function gi(t){var e,n=MN(null);for(e in t)Rd(DN,t,[e])&&(n[e]=t[e]);return n}function Bd(t,e){for(;null!==t;){var n=PN(t,e);if(n){if(n.get)return Io(n.get);if("function"==typeof n.value)return Io(n.value)}t=LN(t)}return function(o){return console.warn("fallback value for",o),null}}var My=Sn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Gf=Sn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Qf=Sn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),HN=Sn(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Jf=Sn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),$N=Sn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Iy=Sn(["#text"]),Fy=Sn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Zf=Sn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),jy=Sn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ld=Sn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),qN=ar(/\{\{[\w\W]*|[\w\W]*\}\}/gm),VN=ar(/<%[\w\W]*|[\w\W]*%>/gm),WN=ar(/^data-[\-\w.\u00B7-\uFFFF]/),KN=ar(/^aria-[\-\w]+$/),YN=ar(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),XN=ar(/^(?:\w+script|data):/i),GN=ar(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),QN=ar(/^html$/i),JN=function(){return typeof window>"u"?null:window},ZN=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JN(),n=function(F){return t(F)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var o=e.document,r=e.document,s=e.DocumentFragment,i=e.HTMLTemplateElement,a=e.Node,l=e.Element,c=e.NodeFilter,d=e.NamedNodeMap,u=void 0===d?e.NamedNodeMap||e.MozNamedAttrMap:d,f=e.HTMLFormElement,h=e.DOMParser,g=e.trustedTypes,b=l.prototype,p=Bd(b,"cloneNode"),v=Bd(b,"nextSibling"),_=Bd(b,"childNodes"),C=Bd(b,"parentNode");if("function"==typeof i){var E=r.createElement("template");E.content&&E.content.ownerDocument&&(r=E.content.ownerDocument)}var k=function(F,St){if("object"!==fi(F)||"function"!=typeof F.createPolicy)return null;var vt=null,ee="data-tt-policy-suffix";St.currentScript&&St.currentScript.hasAttribute(ee)&&(vt=St.currentScript.getAttribute(ee));var ke="dompurify"+(vt?"#"+vt:"");try{return F.createPolicy(ke,{createHTML:function(Je){return Je}})}catch{return console.warn("TrustedTypes policy "+ke+" could not be created."),null}}(g,o),N=k?k.createHTML(""):"",O=r,M=O.implementation,$=O.createNodeIterator,z=O.createDocumentFragment,R=O.getElementsByTagName,P=o.importNode,B={};try{B=gi(r).documentMode?r.documentMode:{}}catch{}var I={};n.isSupported="function"==typeof C&&M&&void 0!==M.createHTMLDocument&&9!==B;var tt,G,ht=qN,rt=VN,kt=WN,Nt=KN,it=XN,gt=GN,_t=YN,D=null,L=Wt({},[].concat(Mo(My),Mo(Gf),Mo(Qf),Mo(Jf),Mo(Iy))),q=null,K=Wt({},[].concat(Mo(Fy),Mo(Zf),Mo(jy),Mo(Ld))),V=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,Z=null,ft=!0,at=!0,Ct=!1,xt=!1,st=!1,Rt=!1,Ce=!1,me=!1,bn=!1,vn=!1,zo=!0,Co=!0,Ue=!1,An={},be=null,mr=Wt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ys=null,Au=Wt({},["audio","video","img","source","image","track"]),fr=null,dc=Wt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Un="http://www.w3.org/1998/Math/MathML",_s="http://www.w3.org/2000/svg",Hn="http://www.w3.org/1999/xhtml",Ci=Hn,Hx=!1,jR=["application/xhtml+xml","text/html"],Oa=null,zR=r.createElement("form"),$x=function(F){return F instanceof RegExp||F instanceof Function},Np=function(F){Oa&&Oa===F||(F&&"object"===fi(F)||(F={}),F=gi(F),D="ALLOWED_TAGS"in F?Wt({},F.ALLOWED_TAGS):L,q="ALLOWED_ATTR"in F?Wt({},F.ALLOWED_ATTR):K,fr="ADD_URI_SAFE_ATTR"in F?Wt(gi(dc),F.ADD_URI_SAFE_ATTR):dc,ys="ADD_DATA_URI_TAGS"in F?Wt(gi(Au),F.ADD_DATA_URI_TAGS):Au,be="FORBID_CONTENTS"in F?Wt({},F.FORBID_CONTENTS):mr,W="FORBID_TAGS"in F?Wt({},F.FORBID_TAGS):{},Z="FORBID_ATTR"in F?Wt({},F.FORBID_ATTR):{},An="USE_PROFILES"in F&&F.USE_PROFILES,ft=!1!==F.ALLOW_ARIA_ATTR,at=!1!==F.ALLOW_DATA_ATTR,Ct=F.ALLOW_UNKNOWN_PROTOCOLS||!1,xt=F.SAFE_FOR_TEMPLATES||!1,st=F.WHOLE_DOCUMENT||!1,me=F.RETURN_DOM||!1,bn=F.RETURN_DOM_FRAGMENT||!1,vn=F.RETURN_TRUSTED_TYPE||!1,Ce=F.FORCE_BODY||!1,zo=!1!==F.SANITIZE_DOM,Co=!1!==F.KEEP_CONTENT,Ue=F.IN_PLACE||!1,_t=F.ALLOWED_URI_REGEXP||_t,Ci=F.NAMESPACE||Hn,F.CUSTOM_ELEMENT_HANDLING&&$x(F.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=F.CUSTOM_ELEMENT_HANDLING.tagNameCheck),F.CUSTOM_ELEMENT_HANDLING&&$x(F.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=F.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),F.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof F.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(V.allowCustomizedBuiltInElements=F.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),tt=tt=-1===jR.indexOf(F.PARSER_MEDIA_TYPE)?"text/html":F.PARSER_MEDIA_TYPE,G="application/xhtml+xml"===tt?function(St){return St}:Dd,xt&&(at=!1),bn&&(me=!0),An&&(D=Wt({},Mo(Iy)),q=[],!0===An.html&&(Wt(D,My),Wt(q,Fy)),!0===An.svg&&(Wt(D,Gf),Wt(q,Zf),Wt(q,Ld)),!0===An.svgFilters&&(Wt(D,Qf),Wt(q,Zf),Wt(q,Ld)),!0===An.mathMl&&(Wt(D,Jf),Wt(q,jy),Wt(q,Ld))),F.ADD_TAGS&&(D===L&&(D=gi(D)),Wt(D,F.ADD_TAGS)),F.ADD_ATTR&&(q===K&&(q=gi(q)),Wt(q,F.ADD_ATTR)),F.ADD_URI_SAFE_ATTR&&Wt(fr,F.ADD_URI_SAFE_ATTR),F.FORBID_CONTENTS&&(be===mr&&(be=gi(be)),Wt(be,F.FORBID_CONTENTS)),Co&&(D["#text"]=!0),st&&Wt(D,["html","head","body"]),D.table&&(Wt(D,["tbody"]),delete W.tbody),Sn&&Sn(F),Oa=F)},qx=Wt({},["mi","mo","mn","ms","mtext"]),Vx=Wt({},["foreignobject","desc","title","annotation-xml"]),UR=Wt({},["title","style","font","a","script"]),Ou=Wt({},Gf);Wt(Ou,Qf),Wt(Ou,HN);var Ap=Wt({},Jf);Wt(Ap,$N);var Fr=function(F){ql(n.removed,{element:F});try{F.parentNode.removeChild(F)}catch{try{F.outerHTML=N}catch{F.remove()}}},Tu=function(F,St){try{ql(n.removed,{attribute:St.getAttributeNode(F),from:St})}catch{ql(n.removed,{attribute:null,from:St})}if(St.removeAttribute(F),"is"===F&&!q[F])if(me||bn)try{Fr(St)}catch{}else try{St.setAttribute(F,"")}catch{}},Wx=function(F){var St,vt;if(Ce)F="<remove></remove>"+F;else{var ee=jN(F,/^[\r\n\t ]+/);vt=ee&&ee[0]}"application/xhtml+xml"===tt&&(F='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+F+"</body></html>");var ke=k?k.createHTML(F):F;if(Ci===Hn)try{St=(new h).parseFromString(ke,tt)}catch{}if(!St||!St.documentElement){St=M.createDocument(Ci,"template",null);try{St.documentElement.innerHTML=Hx?"":ke}catch{}}var Je=St.body||St.documentElement;return F&&vt&&Je.insertBefore(r.createTextNode(vt),Je.childNodes[0]||null),Ci===Hn?R.call(St,st?"html":"body")[0]:st?St.documentElement:Je},Kx=function(F){return $.call(F.ownerDocument||F,F,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},uc=function(F){return"object"===fi(a)?F instanceof a:F&&"object"===fi(F)&&"number"==typeof F.nodeType&&"string"==typeof F.nodeName},jr=function(F,St,vt){I[F]&&IN(I[F],function(ee){ee.call(n,St,vt,Oa)})},Yx=function(F){var St,vt;if(jr("beforeSanitizeElements",F,null),(vt=F)instanceof f&&("string"!=typeof vt.nodeName||"string"!=typeof vt.textContent||"function"!=typeof vt.removeChild||!(vt.attributes instanceof u)||"function"!=typeof vt.removeAttribute||"function"!=typeof vt.setAttribute||"string"!=typeof vt.namespaceURI||"function"!=typeof vt.insertBefore)||Nn(/[\u0080-\uFFFF]/,F.nodeName))return Fr(F),!0;var ee=G(F.nodeName);if(jr("uponSanitizeElement",F,{tagName:ee,allowedTags:D}),F.hasChildNodes()&&!uc(F.firstElementChild)&&(!uc(F.content)||!uc(F.content.firstElementChild))&&Nn(/<[/\w]/g,F.innerHTML)&&Nn(/<[/\w]/g,F.textContent)||"select"===ee&&Nn(/<template/i,F.innerHTML))return Fr(F),!0;if(!D[ee]||W[ee]){if(!W[ee]&&Gx(ee)&&(V.tagNameCheck instanceof RegExp&&Nn(V.tagNameCheck,ee)||V.tagNameCheck instanceof Function&&V.tagNameCheck(ee)))return!1;if(Co&&!be[ee]){var ke=C(F)||F.parentNode,Je=_(F)||F.childNodes;if(Je&&ke)for(var Be=Je.length-1;Be>=0;--Be)ke.insertBefore(p(Je[Be],!0),v(F))}return Fr(F),!0}return F instanceof l&&!function(Uo){var Le=C(Uo);Le&&Le.tagName||(Le={namespaceURI:Hn,tagName:"template"});var Pe=Dd(Uo.tagName),wi=Dd(Le.tagName);return Uo.namespaceURI===_s?Le.namespaceURI===Hn?"svg"===Pe:Le.namespaceURI===Un?"svg"===Pe&&("annotation-xml"===wi||qx[wi]):Boolean(Ou[Pe]):Uo.namespaceURI===Un?Le.namespaceURI===Hn?"math"===Pe:Le.namespaceURI===_s?"math"===Pe&&Vx[wi]:Boolean(Ap[Pe]):Uo.namespaceURI===Hn&&!(Le.namespaceURI===_s&&!Vx[wi])&&!(Le.namespaceURI===Un&&!qx[wi])&&!Ap[Pe]&&(UR[Pe]||!Ou[Pe])}(F)?(Fr(F),!0):"noscript"!==ee&&"noembed"!==ee||!Nn(/<\/no(script|embed)/i,F.innerHTML)?(xt&&3===F.nodeType&&(St=hs(St=F.textContent,ht," "),St=hs(St,rt," "),F.textContent!==St&&(ql(n.removed,{element:F.cloneNode()}),F.textContent=St)),jr("afterSanitizeElements",F,null),!1):(Fr(F),!0)},Xx=function(F,St,vt){if(zo&&("id"===St||"name"===St)&&(vt in r||vt in zR))return!1;if((!at||Z[St]||!Nn(kt,St))&&(!ft||!Nn(Nt,St)))if(!q[St]||Z[St]){if(!(Gx(F)&&(V.tagNameCheck instanceof RegExp&&Nn(V.tagNameCheck,F)||V.tagNameCheck instanceof Function&&V.tagNameCheck(F))&&(V.attributeNameCheck instanceof RegExp&&Nn(V.attributeNameCheck,St)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(St))||"is"===St&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&Nn(V.tagNameCheck,vt)||V.tagNameCheck instanceof Function&&V.tagNameCheck(vt))))return!1}else if(!fr[St]&&!Nn(_t,hs(vt,gt,""))&&("src"!==St&&"xlink:href"!==St&&"href"!==St||"script"===F||0!==zN(vt,"data:")||!ys[F])&&(!Ct||Nn(it,hs(vt,gt,"")))&&vt)return!1;return!0},Gx=function(F){return F.indexOf("-")>0},Qx=function(F){var St,vt,ee,ke;jr("beforeSanitizeAttributes",F,null);var Je=F.attributes;if(Je){var Be={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q};for(ke=Je.length;ke--;){var Uo=St=Je[ke],Le=Uo.name,Pe=Uo.namespaceURI;vt="value"===Le?St.value:UN(St.value),ee=G(Le);var wi=vt;if(Be.attrName=ee,Be.attrValue=vt,Be.keepAttr=!0,Be.forceKeepAttr=void 0,jr("uponSanitizeAttribute",F,Be),vt=Be.attrValue,!Be.forceKeepAttr)if(Be.keepAttr)if(Nn(/\/>/i,vt))Tu(Le,F);else{xt&&(vt=hs(vt,ht," "),vt=hs(vt,rt," "));var $R=G(F.nodeName);if(Xx($R,ee,vt)){if(vt!==wi)try{Pe?F.setAttributeNS(Pe,Le,vt):F.setAttribute(Le,vt)}catch{Tu(Le,F)}}else Tu(Le,F)}else Tu(Le,F)}jr("afterSanitizeAttributes",F,null)}},HR=function F(St){var vt,ee=Kx(St);for(jr("beforeSanitizeShadowDOM",St,null);vt=ee.nextNode();)jr("uponSanitizeShadowNode",vt,null),Yx(vt)||(vt.content instanceof s&&F(vt.content),Qx(vt));jr("afterSanitizeShadowDOM",St,null)};return n.sanitize=function(F,St){var vt,ee,ke,Je,Be;if((Hx=!F)&&(F="\x3c!--\x3e"),"string"!=typeof F&&!uc(F)){if("function"!=typeof F.toString)throw Xf("toString is not a function");if("string"!=typeof(F=F.toString()))throw Xf("dirty is not a string, aborting")}if(!n.isSupported){if("object"===fi(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof F)return e.toStaticHTML(F);if(uc(F))return e.toStaticHTML(F.outerHTML)}return F}if(Rt||Np(St),n.removed=[],"string"==typeof F&&(Ue=!1),Ue){if(F.nodeName){var Uo=G(F.nodeName);if(!D[Uo]||W[Uo])throw Xf("root node is forbidden and cannot be sanitized in-place")}}else if(F instanceof a)1===(ee=(vt=Wx("\x3c!----\x3e")).ownerDocument.importNode(F,!0)).nodeType&&"BODY"===ee.nodeName||"HTML"===ee.nodeName?vt=ee:vt.appendChild(ee);else{if(!me&&!xt&&!st&&-1===F.indexOf("<"))return k&&vn?k.createHTML(F):F;if(!(vt=Wx(F)))return me?null:vn?N:""}vt&&Ce&&Fr(vt.firstChild);for(var Le=Kx(Ue?F:vt);ke=Le.nextNode();)3===ke.nodeType&&ke===Je||Yx(ke)||(ke.content instanceof s&&HR(ke.content),Qx(ke),Je=ke);if(Je=null,Ue)return F;if(me){if(bn)for(Be=z.call(vt.ownerDocument);vt.firstChild;)Be.appendChild(vt.firstChild);else Be=vt;return q.shadowroot&&(Be=P.call(o,Be,!0)),Be}var Pe=st?vt.outerHTML:vt.innerHTML;return st&&D["!doctype"]&&vt.ownerDocument&&vt.ownerDocument.doctype&&vt.ownerDocument.doctype.name&&Nn(QN,vt.ownerDocument.doctype.name)&&(Pe="<!DOCTYPE "+vt.ownerDocument.doctype.name+">\n"+Pe),xt&&(Pe=hs(Pe,ht," "),Pe=hs(Pe,rt," ")),k&&vn?k.createHTML(Pe):Pe},n.setConfig=function(F){Np(F),Rt=!0},n.clearConfig=function(){Oa=null,Rt=!1},n.isValidAttribute=function(F,St,vt){Oa||Np({});var ee=G(F),ke=G(St);return Xx(ee,ke,vt)},n.addHook=function(F,St){"function"==typeof St&&(I[F]=I[F]||[],ql(I[F],St))},n.removeHook=function(F){if(I[F])return FN(I[F])},n.removeHooks=function(F){I[F]&&(I[F]=[])},n.removeAllHooks=function(){I={}},n}();const zy=Q.each,tA=Q.trim,eA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],nA={ftp:21,http:80,https:443,mailto:25},oA=["img","video"],Uy=(t,e,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!t.allow_html_data_urls&&(/^data:image\//i.test(o)?(s=n,(et(r=t.allow_svg_data_urls)?!r:!et(s)||!ut(oA,s))&&/^data:image\/svg\+xml/i.test(o)):/^data:/i.test(o)));var r,s};class Fo{static parseDataUri(e){let n;const o=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(e,n,o={}){if(o.allow_script_urls)return!0;{const r=rs.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!Uy(o,r,n)}}static getDocumentBaseUrl(e){var n;let o;return o=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(e,n={}){this.path="",this.directory="",e=tA(e),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(o&&o.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const a=o?o.path:new Fo(document.location.href).directory;if(""===o?.protocol)e="//mce_host"+r.toAbsPath(a,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(a,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);i&&zy(eA,(a,l)=>{let c=i[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),r[a]=c}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new Fo(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const o=new Fo(e,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?nA[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let o,r,s=0,i="";const a=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(a.length>=l.length)for(o=0,r=a.length;o<r;o++)if(o>=l.length||a[o]!==l[o]){s=o+1;break}if(a.length<l.length)for(o=0,r=l.length;o<r;o++)if(o>=a.length||a[o]!==l[o]){s=o+1;break}if(1===s)return n;for(o=0,r=a.length-(s-1);o<r;o++)i+="../";for(o=s-1,r=l.length;o<r;o++)i+=o!==s-1?"/"+l[o]:l[o];return i}toAbsPath(e,n){let o=0;const r=/\/$/.test(n)?"/":"",s=e.split("/"),i=n.split("/"),a=[];zy(s,u=>{u&&a.push(u)});const l=[];for(let u=i.length-1;u>=0;u--)0!==i[u].length&&"."!==i[u]&&(".."!==i[u]?o>0?o--:l.push(i[u]):o++);const c=a.length-o;let d;return d=c<=0?Es(l).join("/"):a.slice(0,c).join("/")+"/"+Es(l).join("/"),0!==d.indexOf("/")&&(d="/"+d),r&&d.lastIndexOf("/")!==d.length-1&&(d+=r),d}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const rA=Q.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),tg="data-mce-type";let Hy=0;const $y=(t,e,n,o)=>{var r,s,i,a;const l=e.validate,c=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(r=t.nodeValue)&&void 0!==r?r:"")&&(t.nodeValue=" "+t.nodeValue);const d=null!==(s=o?.tagName)&&void 0!==s?s:t.nodeName.toLowerCase();if(1!==t.nodeType||"body"===d)return;const u=T(t),f=Ii(u,tg),h=wn(u,"data-mce-bogus");if(!f&&bt(h))return void("all"===h?ie(u):ho(u));const g=n.getElementRule(d);if(!l||g){if(et(o)&&(o.allowedTags[d]=!0),l&&g&&!f){if(X(null!==(i=g.attributesForced)&&void 0!==i?i:[],b=>{pe(u,b.name,"{$uid}"===b.value?"mce_"+Hy++:b.value)}),X(null!==(a=g.attributesDefault)&&void 0!==a?a:[],b=>{Ii(u,b.name)||pe(u,b.name,"{$uid}"===b.value?"mce_"+Hy++:b.value)}),g.attributesRequired&&!ce(g.attributesRequired,b=>Ii(u,b))||g.removeEmptyAttrs&&(b=>{const p=b.dom.attributes;return null==p||0===p.length})(u))return void ho(u);g.outputName&&g.outputName!==d&&lh(u,g.outputName)}}else Ot(c,d)?ie(u):ho(u)},qy=(t,e,n,o,r)=>!(o in rA&&Uy(t,r,n))&&(!t.validate||e.isValid(n,o)||xe(o,"data-")||xe(o,"aria-")),Vy=(t,e)=>t.hasAttribute(tg)&&("id"===e||"class"===e||"style"===e),Wy=(t,e)=>t in e.getBoolAttrs(),sA=(t,e,n)=>{const{attributes:o}=t;for(let r=o.length-1;r>=0;r--){const s=o[r],i=s.name,a=s.value;qy(e,n,t.tagName.toLowerCase(),i,a)||Vy(t,i)?Wy(i,n)&&t.setAttribute(i,i):t.removeAttribute(i)}},Ky=Q.makeMap,Yy=Q.extend,Xy=(t,e,n)=>{const o=t.name,r=o in n&&"title"!==o&&"textarea"!==o,s=e.childNodes;for(let i=0,a=s.length;i<a;i++){const l=s[i],c=new pn(l.nodeName.toLowerCase(),l.nodeType);if(A(l)){const d=l.attributes;for(let u=0,f=d.length;u<f;u++){const h=d[u];c.attr(h.name,h.value)}}else U(l)?(c.value=l.data,r&&(c.raw=!0)):(Kt(l)||Pt(l)||Ft(l))&&(c.value=l.data);Xy(c,l,n),t.append(c)}},pa=(t={},e=ss())=>{const n=Sy(),o=Sy(),r={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,i=((b,p)=>{if(b.sanitize){const v=((t,e)=>{const n=ZN();return n.addHook("uponSanitizeElement",(o,r)=>{$y(o,t,e,r)}),n.addHook("uponSanitizeAttribute",(o,r)=>{const s=o.tagName.toLowerCase(),{attrName:i,attrValue:a}=r;r.keepAttr=qy(t,e,s,i,a),r.keepAttr?(r.allowedAttributes[i]=!0,Wy(i,e)&&(r.attrValue=i),t.allow_svg_data_urls&&xe(a,"data:image/svg+xml")&&(r.forceKeepAttr=!0)):Vy(o,i)&&(r.forceKeepAttr=!0)}),n})(b,p);return(_,C)=>{v.sanitize(_,((E,k)=>{const N={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return N.PARSER_MEDIA_TYPE=k,E.allow_script_urls?N.ALLOWED_URI_REGEXP=/.*/:E.allow_html_data_urls&&(N.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),N})(b,C)),v.removed=[]}}return(v,_)=>{const C=document.createNodeIterator(v,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let E;for(;E=C.nextNode();)$y(E,b,p),A(E)&&sA(E,b,p)}})(r,e),l=n.getFilters,u=o.getFilters,h=(b,p)=>{const v=bt(p.attr(tg)),_=1===p.type&&!Ot(b,p.name)&&!Mp(e,p);return 3===p.type||_&&!v},g={schema:e,addAttributeFilter:o.addFilter,getAttributeFilters:u,removeAttributeFilter:o.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(b,p={})=>{var v;const _=r.validate,C=null!==(v=p.context)&&void 0!==v?v:r.root_name,E=((B,I,tt="html")=>{const G="xhtml"===tt?"application/xhtml+xml":"text/html",ht=Ot(e.getSpecialElements(),I.toLowerCase()),rt=ht?`<${I}>${B}</${I}>`:B,Nt=s.parseFromString("xhtml"===tt?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${rt}</body></html>`:`<body>${rt}</body>`,G).body;return i(Nt,G),ht?Nt.firstChild:Nt})(b,C,p.format);Hu(e,E);const k=new pn(C,11);Xy(k,E,e.getSpecialElements()),E.innerHTML="";const[N,O]=((B,I,tt,G)=>{const ht=tt.validate,rt=I.getNonEmptyElements(),kt=I.getWhitespaceElements(),Nt=Yy(Ky("script,style,head,html,body,title,meta,param"),I.getBlockElements()),it=Yp(I),gt=/[ \t\r\n]+/g,_t=/^[ \t\r\n]+/,D=/[ \t\r\n]+$/,L=V=>{let W=V.parent;for(;et(W);){if(W.name in kt)return!0;W=W.parent}return!1},q=V=>V.name in Nt||Mp(I,V),K=(V,W)=>!et(W?V.prev:V.next)&&!ve(V.parent)&&q(V.parent)&&(V.parent!==B||!0===G.isRootContent);return[V=>{var W,ft,at;if(3===V.type&&!L(V)){let Z=null!==(W=V.value)&&void 0!==W?W:"";Z=Z.replace(gt," "),at=q,(et(ft=V.prev)&&(at(ft)||"br"===ft.name)||K(V,!0))&&(Z=Z.replace(_t,"")),0===Z.length?V.remove():V.value=Z}},V=>{var W,at,Ct;if(1===V.type){const Z=I.getElementRule(V.name);if(ht&&Z){const ft=Ul(I,rt,kt,V);Z.paddInEmptyBlock&&ft&&(at=>{let Ct=at;for(;et(Ct);){if(Ct.name in it)return Ul(I,rt,kt,Ct);Ct=Ct.parent}return!1})(V)?kf(G,q,V):Z.removeEmpty&&ft?q(V)?V.remove():V.unwrap():Z.paddEmpty&&(ft||P0(at=V,"#text")&&(null===(Ct=at?.firstChild)||void 0===Ct?void 0:Ct.value)===Qt)&&kf(G,q,V)}}else if(3===V.type&&!L(V)){let Z=null!==(W=V.value)&&void 0!==W?W:"";(V.next&&q(V.next)||K(V,!1))&&(Z=Z.replace(D,"")),0===Z.length?V.remove():V.value=Z}}]})(k,e,r,p),M=[],z={nodes:{},attributes:{}},R=B=>D0(l(),u(),B,z);if(((B,I,tt)=>{const G=[];for(let ht=B,rt=ht;ht;rt=ht,ht=ht.walk()){const kt=ht;X(I,Nt=>Nt(kt)),ve(kt.parent)&&kt!==B?ht=rt:G.push(kt)}for(let ht=G.length-1;ht>=0;ht--){const rt=G[ht];X(tt,kt=>kt(rt))}})(k,[N,R],[O,_?B=>{return tt=M,void(M0(e,I=B)&&tt.push(I));var I,tt}:Bt]),M.reverse(),_&&M.length>0)if(p.context){const{pass:B,fail:I}=xs(M,tt=>tt.parent===k);Nf(I,e,k,R),p.invalid=B.length>0}else Nf(M,e,k,R);const P=((B,I)=>{var tt;const G=null!==(tt=I.forced_root_block)&&void 0!==tt?tt:B.forced_root_block;return!1===G?"":!0===G?"p":G})(r,p);return P&&("body"===k.name||p.isRootContent)&&((B,I)=>{const tt=Yy(Ky("script,style,head,html,body,title,meta,param"),e.getBlockElements()),G=/^[ \t\r\n]+/,ht=/[ \t\r\n]+$/;let rt=B.firstChild,kt=null;const Nt=it=>{var gt,_t;it&&(rt=it.firstChild,rt&&3===rt.type&&(rt.value=null===(gt=rt.value)||void 0===gt?void 0:gt.replace(G,"")),rt=it.lastChild,rt&&3===rt.type&&(rt.value=null===(_t=rt.value)||void 0===_t?void 0:_t.replace(ht,"")))};if(e.isValidChild(B.name,I.toLowerCase())){for(;rt;){const it=rt.next;h(tt,rt)?(kt||(kt=new pn(I,1),kt.attr(r.forced_root_block_attrs),B.insert(kt,rt)),kt.append(rt)):(Nt(kt),kt=null),rt=it}Nt(kt)}})(k,P),p.invalid||B0(z,p),k}};return((t,e)=>{const n=t.schema;e.remove_trailing_brs&&Ny(t,n),t.addAttributeFilter("href",r=>{let s=r.length;const i=a=>{const l=a?Q.trim(a):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(d=>d.length>0).concat(["noopener"]).sort().join(" ")};if(!e.allow_unsafe_link_target)for(;s--;){const a=r[s];"a"===a.name&&"_blank"===a.attr("target")&&a.attr("rel",i(a.attr("rel")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",r=>{let s,i,a,l,c=r.length;for(;c--;)if(l=r[c],"a"===l.name&&l.firstChild&&!l.attr("href"))for(a=l.parent,s=l.lastChild;s&&a;)i=s.prev,a.insert(s,l),s=i}),e.fix_list_elements&&t.addNodeFilter("ul,ol",r=>{let s,i,a=r.length;for(;a--;)if(s=r[a],i=s.parent,i&&("ul"===i.name||"ol"===i.name))if(s.prev&&"li"===s.prev.name)s.prev.append(s);else{const l=new pn("li",1);l.attr("style","list-style-type: none"),s.wrap(l)}});const o=n.getValidClasses();e.validate&&o&&t.addAttributeFilter("class",r=>{var s;let i=r.length;for(;i--;){const a=r[i],l=null!==(s=a.attr("class"))&&void 0!==s?s:"",c=Q.explode(l," ");let d="";for(let u=0;u<c.length;u++){const f=c[u];let h=!1,g=o["*"];g&&g[f]&&(h=!0),g=o[a.name],!h&&g&&g[f]&&(h=!0),h&&(d&&(d+=" "),d+=f)}d.length||(d=null),a.attr("class",d)}}),((r,s)=>{const{blob_cache:i}=s;if(i){const a=l=>{const c=l.attr("src");var d;(d=l).attr("src")===zt.transparentSrc||et(d.attr("data-mce-placeholder"))||(d=>et(d.attr("data-mce-bogus")))(l)||ve(c)||Dy(i,c,!0).each(d=>{l.attr("src",d.blobUri())})};r.addAttributeFilter("src",l=>X(l,a))}})(t,e)})(g,r),(p=r).inline_styles&&((t,e,n)=>{var o;const r=Gu();var s,i,a;e.convert_fonts_to_spans&&(s=t,i=r,a=Q.explode(null!==(o=e.font_size_legacy_values)&&void 0!==o?o:""),s.addNodeFilter("font",l=>{X(l,c=>{const d=i.parse(c.attr("style")),u=c.attr("color"),f=c.attr("face"),h=c.attr("size");var g;u&&(d.color=u),f&&(d["font-family"]=f),h&&xo(h).each(g=>{d["font-size"]=a[g-1]}),c.name="span",c.attr("style",i.serialize(d)),g=c,X(["color","face","size"],p=>{g.attr(p,null)})})})),((s,i,a)=>{s.addNodeFilter("strike",l=>{const c="html4"!==i.type;X(l,d=>{if(c)d.name="s";else{const u=a.parse(d.attr("style"));u["text-decoration"]="line-through",d.name="span",d.attr("style",a.serialize(u))}})})})(t,n,r)})(g,p,e),g;var p},Gy=(t,e,n)=>{const o=Nd(s=t)?us({validate:!1}).serialize(s):s,r=e(o);var s;if(r.isDefaultPrevented())return r;if(Nd(t)){if(r.content!==o){const s=pa({validate:!1,forced_root_block:!1,sanitize:n}).parse(r.content,{context:t.name});return{...r,content:s}}return{...r,content:t}}return r},Qy=(t,e)=>{if(e.no_events)return mn.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?mn.error(ev(t,{content:"",...n}).content):mn.value(n)}},Jy=(t,e,n)=>n.no_events?e:Gy(e,r=>ev(t,{...n,content:r}),hm(t)).content,eg=(t,e)=>{if(e.no_events)return mn.value(e);{const n=Gy(e.content,o=>{return r=t,s={...e,content:o},r.dispatch("BeforeSetContent",s);var r,s},hm(t));return n.isDefaultPrevented()?(tv(t,n),mn.error(void 0)):mn.value(n)}},ng=(t,e,n)=>{n.no_events||tv(t,{...n,content:e})},og=(t,e,n)=>({element:t,width:e,rows:n}),Zy=(t,e)=>({element:t,cells:e}),aA=(t,e)=>({x:t,y:e}),t_=(t,e)=>Mn(t,e).bind(xo).getOr(1),lA=(t,e,n)=>{const o=t.rows;return!!(o[n]?o[n].cells:[])[e]},e_=t=>Me(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),n_=(t,e)=>{const n=t.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(Ht(r[s],e))return w.some(aA(s,o))}return w.none()},o_=(t,e,n,o,r)=>{const s=[],i=t.rows;for(let a=n;a<=r;a++){const l=i[a].cells,c=e<o?l.slice(e,o+1):l.slice(o,e+1);s.push(Zy(i[a].element,c))}return s},cA=t=>((e,n)=>{const o=Qs(e.element),r=Ee("tbody");return Ar(r,n),fe(o,r),o})(t,jt(t.rows,n=>{const o=jt(n.cells,s=>{const i=ah(s);return Oe(i,"colspan"),Oe(i,"rowspan"),i}),r=Qs(n.element);return Ar(r,o),r})),r_=()=>Hm([]),Pd=(t,e)=>e>=0&&e<t.length&&la(t.charAt(e)),s_=t=>Ro(t.innerText),i_=t=>A(t)?t.outerHTML:U(t)?rs.encodeRaw(t.data,!1):Kt(t)?"\x3c!--"+t.data+"--\x3e":"",gA=Xo(()=>document.implementation.createHTMLDocument("undo")),Md=t=>{const e=(n=t.getBody(),Et(jt(Fe(n.childNodes),i_),s=>s.length>0));var n;const o=Kn(e,s=>{const i=Fv(t.serializer,s);return i.length>0?[i]:[]}),r=o.join("");return-1!==r.indexOf("</iframe>")?{type:"fragmented",fragments:o,content:"",bookmark:null,beforeBookmark:null}:(s=>({type:"complete",fragments:null,content:s,bookmark:null,beforeBookmark:null}))(r)},rg=(t,e,n)=>{const o=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,o)=>{let r=0;X(n,s=>{var i,a;0===s[0]?r++:1===s[0]?(((i,a,l)=>{const c=(d=>{let u;const f=document.createElement("div"),h=document.createDocumentFragment();for(d&&(f.innerHTML=d);u=f.firstChild;)h.appendChild(u);return h})(a);i.hasChildNodes()&&l<i.childNodes.length?i.insertBefore(c,i.childNodes[l]):i.appendChild(c)})(o,s[1],r),r++):2===s[0]&&(a=r,(i=o).hasChildNodes()&&a<i.childNodes.length&&i.removeChild(i.childNodes[a]))})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),i=new Array(r),a=(u,f,h,g,b)=>{const p=c(u,f,h,g);if(null===p||p.start===f&&p.diag===f-g||p.end===u&&p.diag===u-h){let v=u,_=h;for(;v<f||_<g;)v<f&&_<g&&n[v]===o[_]?(b.push([0,n[v]]),++v,++_):f-u>g-h?(b.push([2,n[v]]),++v):(b.push([1,o[_]]),++_)}else{a(u,p.start,h,p.start-p.diag,b);for(let v=p.start;v<p.end;++v)b.push([0,n[v]]);a(p.end,f,p.end-p.diag,g,b)}},l=(u,f,h,g)=>{let b=u;for(;b-f<g&&b<h&&n[b]===o[b-f];)++b;return{start:u,end:b,diag:f}},c=(u,f,h,g)=>{const b=f-u,p=g-h;if(0===b||0===p)return null;const v=b-p,_=p+b,C=(_%2==0?_:_+1)/2;let E,k,N,O,M;for(s[1+C]=u,i[1+C]=f+1,E=0;E<=C;++E){for(k=-E;k<=E;k+=2){for(N=k+C,s[N]=k===-E||k!==E&&s[N-1]<s[N+1]?s[N+1]:s[N-1]+1,O=s[N],M=O-u+h-k;O<f&&M<g&&n[O]===o[M];)s[N]=++O,++M;if(v%2!=0&&v-E<=k&&k<=v+E&&i[N-v]<=s[N])return l(i[N-v],k+u-h,f,g)}for(k=v-E;k<=v+E;k+=2){for(N=k+C-v,i[N]=k===v-E||k!==v+E&&i[N+1]<=i[N-1]?i[N+1]-1:i[N-1],O=i[N]-1,M=O-u+h-k;O>=u&&M>=h&&n[O]===o[M];)i[N]=O--,M--;if(v%2==0&&-E<=k&&k<=E&&i[N]<=s[N+v])return l(i[N],k+u-h,f,g)}}return null},d=[];return a(0,n.length,0,o.length,d),d})(jt(Fe(e.childNodes),i_),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!et(o)||!xb(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},sg=t=>"fragmented"===t.type?t.fragments.join(""):t.content,a_=t=>{const e=Ee("body",gA());return Or(e,sg(t)),X(x(e,"*[data-mce-bogus]"),ho),el(e)},ig=(t,e)=>{return!(!t||!e)&&(o=e,!(sg(t)!==sg(o))||((n,o)=>a_(n)===a_(o))(t,e));var o},ag=t=>0===t.get(),Id=(t,e,n)=>{ag(n)&&(t.typing=e)},l_=(t,e)=>{t.typing&&(Id(t,!1,e),t.add())},c_=t=>({init:{bindEvents:Bt},undoManager:{beforeChange:(e,n)=>{return o=t,s=n,void(ag(e)&&s.set(dm(o.selection)));var o,s},add:(e,n,o,r,s,i)=>((a,l,c,d,u,f,h)=>{const g=Md(a),b=Q.extend(f||{},g);if(!ag(d)||a.removed)return null;const p=l.data[c.get()];if(a.dispatch("BeforeAddUndo",{level:b,lastLevel:p,originalEvent:h}).isDefaultPrevented()||p&&ig(p,b))return null;l.data[c.get()]&&u.get().each(C=>{l.data[c.get()].beforeBookmark=C});const v=yk(a);if(v&&l.data.length>v){for(let C=0;C<l.data.length-1;C++)l.data[C]=l.data[C+1];l.data.length--,c.set(l.data.length)}b.bookmark=dm(a.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(b),c.set(l.data.length-1);const _={level:b,lastLevel:p,originalEvent:h};return c.get()>0?(a.setDirty(!0),a.dispatch("AddUndo",_),a.dispatch("change",_)):a.dispatch("AddUndo",_),b})(t,e,n,o,r,s,i),undo:(e,n,o)=>((r,s,i,a)=>{let l;return s.typing&&(s.add(),s.typing=!1,Id(s,!1,i)),a.get()>0&&(a.set(a.get()-1),l=s.data[a.get()],rg(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(t,e,n,o),redo:(e,n)=>((o,r,s)=>{let i;return r.get()<s.length-1&&(r.set(r.get()+1),i=s[r.get()],rg(o,i,!1),o.setDirty(!0),o.dispatch("Redo",{level:i})),i})(t,e,n),clear:(e,n)=>{return o=t,s=n,(r=e).data=[],s.set(0),r.typing=!1,void o.dispatch("ClearUndos");var o,r,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return o=t,r=e,n.get()>0||r.typing&&r.data[0]&&!ig(Md(o),r.data[0]);var o,r},hasRedo:(e,n)=>{return o=e,n.get()<o.data.length-1&&!o.typing;var o},transact:(e,n,o)=>{return i=o,l_(r=e,n),r.beforeChange(),r.ignore(i),r.add();var r,i},ignore:(e,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(e,n),extra:(e,n,o,r)=>((s,i,a,l,c)=>{if(i.transact(l)){const d=i.data[a.get()].bookmark,u=i.data[a.get()-1];rg(s,u,!0),i.transact(c)&&(i.data[a.get()-1].beforeBookmark=d)}})(t,e,n,o,r)},formatter:{match:(e,n,o,r)=>Pf(t,e,n,o,r),matchAll:(e,n)=>((o,r,s)=>{const i=[],a={},l=o.selection.getStart();return o.dom.getParent(l,c=>{for(let d=0;d<r.length;d++){const u=r[d];!a[u]&&ir(o,c,u,s)&&(a[u]=!0,i.push(u))}},o.dom.getRoot()),i})(t,e,n),matchNode:(e,n,o,r)=>ir(t,e,n,o,r),canApply:e=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const i=n.selection.getStart(),a=md(s,i);for(let l=r.length-1;l>=0;l--){const c=r[l];if(!to(c))return!0;for(let d=a.length-1;d>=0;d--)if(s.is(a[d],c.selector))return!0}}return!1})(t,e),closest:e=>((n,o)=>{const r=s=>Ht(s,T(n.getBody()));return w.from(n.selection.getStart(!0)).bind(s=>Df(T(s),i=>$r(o,a=>{return ir(n,i.dom,c=a)?w.some(c):w.none();var c}),r)).getOrNull()})(t,e),apply:(e,n,o)=>yy(t,e,n,o),remove:(e,n,o,r)=>hy(t,e,n,o,r),toggle:(e,n,o)=>((r,s,i,a)=>{const l=r.formatter.get(s);l&&(!Pf(r,s,i,a)||"toggle"in l[0]&&!l[0].toggle?yy(r,s,i,a):hy(r,s,i,a))})(t,e,n,o),formatChanged:(e,n,o,r,s)=>{return((f,h,g,b,p,v)=>{const _=h.get();X(g.split(","),C=>{const E=Zt(_,C).getOrThunk(()=>{const N={withSimilar:{state:Re(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Re(!1),similar:!1,callbacks:[]},withVars:[]};return _[C]=N,N}),k=()=>{const N=xy(f);return wy(f,N,C,p,v).isSome()};if(we(v)){const N=p?E.withSimilar:E.withoutSimilar;N.callbacks.push(b),1===N.callbacks.length&&N.state.set(k())}else E.withVars.push({state:Re(k()),similar:p,vars:v,callback:b})}),h.set(_)})(t,a=e,l=n,c=o,r,s),{unbind:()=>((f,h,g)=>{const b=f.get();X(h.split(","),p=>Zt(b,p).each(v=>{b[p]={withSimilar:{...v.withSimilar,callbacks:Et(v.withSimilar.callbacks,_=>_!==g)},withoutSimilar:{...v.withoutSimilar,callbacks:Et(v.withoutSimilar.callbacks,_=>_!==g)},withVars:Et(v.withVars,_=>_.callback!==g)}})),f.set(b)})(a,l,c)};var a,l,c}},editor:{getContent:e=>{return o=e,w.from((n=t).getBody()).fold(ot("tree"===o.format?new pn("body",11):""),r=>((t,e,n)=>{let o;return o="raw"===e.format?Q.trim(YS(t.serializer,n.innerHTML)):"text"===e.format?((r,s)=>{const i=r.getDoc(),a=Ge(T(r.getBody())),l=Ee("div",i);pe(l,"data-mce-bogus","all"),qi(l,{position:"fixed",left:"-9999999px",top:"0"}),Or(l,s.innerHTML),jv(l),zv(l);const c=$i(u=a)?u:T(mo(u).dom.body);var u;fe(c,l);const d=Ro(l.dom.innerText);return ie(l),d})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((r,s)=>{const i=fn(r),a=new RegExp(`^(<${i}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${i}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(a,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!Yi(T(n))&&bt(o)?Q.trim(o):o})(n,o,r));var n,o},setContent:(e,n)=>{return r=e,s=n,w.from((o=t).getBody()).map(i=>Nd(r)?((a,l,c,d)=>{L0(a.parser.getNodeFilters(),a.parser.getAttributeFilters(),c);const u=us({validate:!1},a.schema).serialize(c),f=Yi(T(l))?u:Q.trim(u);return Rf(a,f,d.no_selection),{content:c,html:f}})(o,i,r,s):((a,l,c,d)=>{if(0===c.length||/^\s+$/.test(c)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+u+"</li>");const f=fn(a);return a.schema.isValidChild(l.nodeName.toLowerCase(),f.toLowerCase())?(c=u,c=a.dom.createHTML(f,Cl(a),c)):c||(c=u),Rf(a,c,d.no_selection),{content:c,html:c}}{"raw"!==d.format&&(c=us({validate:!1},a.schema).serialize(a.parser.parse(c,{isRootContent:!0,insert:!0})));const u=Yi(T(l))?c:Q.trim(c);return Rf(a,u,d.no_selection),{content:u,html:u}}})(o,i,r,s)).getOr({content:r,html:Nd(s.content)?"":s.content});var o,r,s},insertContent:(e,n)=>xN(t,e,n),addVisual:e=>((n,o)=>{const r=n.dom,s=et(o)?o:n.getBody();X(r.select("table,a",s),i=>{switch(i.nodeName){case"TABLE":const a=kk(n),l=r.getAttrib(i,"border");l&&"0"!==l||!n.hasVisual?r.removeClass(i,a):r.addClass(i,a);break;case"A":if(!r.getAttrib(i,"href")){const c=r.getAttrib(i,"name")||i.id,d=Jh(n);c&&n.hasVisual?r.addClass(i,d):r.removeClass(i,d)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((o,r,s={})=>{const i=(a=s,l=r,{...a,format:l,get:!0,selection:!0,getInner:!0});var a,l;return Qy(o,i).fold(He,a=>{const l=((c,d)=>{if("text"===d.format)return w.from((u=c).selection.getRng()).map(f=>{var h;const g=w.from(u.dom.getParent(f.commonAncestorContainer,u.dom.isBlock)),b=u.getBody(),p=g.map(N=>N.nodeName).getOr("div").toLowerCase(),v=T(f.cloneContents());jv(v),zv(v);const _=u.dom.add(b,p,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},v.dom),C=s_(_),E=Ro(null!==(h=_.textContent)&&void 0!==h?h:"");if(u.dom.remove(_),Pd(E,0)||Pd(E,E.length-1)){const k=g.getOr(b),N=s_(k),O=N.indexOf(C);return-1===O?C:(Pd(N,O-1)?" ":"")+C+(Pd(N,O+C.length)?" ":"")}return C}).getOr("");var u;{const u=((f,h)=>{const g=f.selection.getRng(),b=f.dom.create("body"),p=f.selection.getSel(),v=ef(f,Nm(p)),_=h.contextual?((t,e)=>{const n=Rb(e,t);return n.length>0?((t,e)=>{return(n=t,o=e[0],Fs(o,"table",dt(Ht,n))).bind(n=>{const o=e[0],r=e[e.length-1],s=(i=>{const a=og(Qs(i),0,[]);return X(x(i,"tr"),(l,c)=>{X(x(l,"td,th"),(d,u)=>{((f,h,g,b,p)=>{const v=t_(p,"rowspan"),_=t_(p,"colspan"),C=f.rows;for(let E=g;E<g+v;E++){C[E]||(C[E]=Zy(ah(b),[]));for(let k=h;k<h+_;k++)C[E].cells[k]=E===g&&k===h?p:Qs(p)}})(a,((f,h,g)=>{for(;lA(f,h,g);)h++;return h})(a,u,c),c,l,d)})}),og(a.element,e_(a.rows),a.rows)})(n);return(i=s,a=o,l=r,n_(i,a).bind(c=>n_(i,l).map(d=>((u,f,h)=>{const g=f.x,b=f.y,p=h.x,v=h.y,_=b<v?o_(u,g,b,p,v):o_(u,g,v,p,b);return og(u.element,e_(_),_)})(i,c,d)))).map(i=>Hm([cA(i)]));var i,a,l}).getOrThunk(r_);var n,o})(t,n):(o=t,(r=e).length>0&&r[0].collapsed?r_():(s=o,((a,l)=>{const c=Me(l,(d,u)=>(fe(u,d),u),a);return l.length>0?Hm([c]):c})(T((i=r[0]).cloneContents()),((t,e)=>{const n=T(e.commonAncestorContainer),o=Pr(n,t),r=Et(o,ju),s=(l=e,de(a=o,c=>"li"===Yt(c)&&Om(c,l)).fold(ot([]),c=>{return(d=a,de(d,u=>"ul"===Yt(u)||"ol"===Yt(u))).map(d=>{const u=Ee(Yt(d)),f=lo(Mc(d),(h,g)=>xe(g,"list-style"));return qi(u,f),[Ee("li"),u]}).getOr([]);var d})),i=r.concat(s.length?s:(a=>os(a)?xn(a).filter(Wi).fold(ot([]),l=>[a,l]):Wi(a)?[a]:[])(n));var a,l;return jt(i,Qs)})(s,i))));var o,r,s,i})(T(f.getBody()),v).dom:g.cloneContents();return _&&b.appendChild(_),f.selection.serializer.serialize(b,h)})(c,d);return"tree"===d.format?u:c.selection.isCollapsed()?"":u}})(o,a);return Jy(o,l,a)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(Pv(T(t.getBody())).isNone()){const o=Qr('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());fe(o,T(e.extractContents())),e.insertNode(o.dom),xn(o).each(r=>r.dom.normalize()),(n=o,((r,s)=>{const i=a=>{const l=Se(a);for(let c=l.length-1;c>=0;c--){const d=l[c];if(s(d))return w.some(d);const u=i(d);if(u.isSome())return u}return w.none()};return i(r)})(n,Bv)).map(r=>{var s;t.selection.setCursorLocation(r.dom,"img"===Yt(s=r)?1:Tr(s).fold(()=>Se(s).length,i=>i.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=T(t.getBody()),Pv(n).each(o=>{const r=e.selection.getBookmark();ho(o),e.selection.moveToBookmark(r)});var e,n}},raw:{getModel:()=>w.none()}}),lr=t=>Ot(t.plugins,"rtc"),lg=t=>t.rtcInstance?t.rtcInstance:c_(t),ye=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},d_=t=>ye(t).init.bindEvents(),u_=t=>0===t.dom.length?(ie(t),w.none()):w.some(t),m_=(t,e,n,o)=>{t.bind(r=>((o?mf:xd)(r.dom,o?r.dom.length:0),e.filter(cn).map(s=>((i,a,l,c)=>{const d=i.dom,u=a.dom,f=c?d.length:u.length;c?(ff(d,u,!1,!c),l.setStart(u,f)):(ff(u,d,!1,!c),l.setEnd(u,f))})(r,s,n,o)))).orThunk(()=>{return(s=e,i=o,s.filter(a=>Bl.isBookmarkNode(a.dom)).bind(i?Is:So)).or(e).filter(cn).map(s=>((i,a)=>{xn(i).each(l=>{const c=i.dom;a&&Fl(l,H(c,0))?xd(c,0):!a&&jl(l,H(c,c.length))&&mf(c,c.length)})})(s,o));var s,i})},f_=(t,e,n)=>{if(Ot(t,e)){const o=Et(t[e],r=>r!==n);0===o.length?delete t[e]:t[e]=o}},g_=t=>!(!t||!t.ownerDocument)&&uo(T(t.ownerDocument),T(t)),p_=(t,e,n,o)=>{let r,s;const{selectorChangedWithUnbind:i}=((p,v)=>{let _,C;const E=(N,O)=>de(O,M=>p.is(M,N)),k=N=>p.getParents(N,void 0,p.getRoot());return{selectorChangedWithUnbind:(N,O)=>(_||(_={},C={},v.on("NodeChange",M=>{const $=M.element,z=k($),R={};Mt(_,(P,B)=>{E(B,z).each(I=>{C[B]||(X(P,tt=>{tt(!0,{node:I,selector:B,parents:z})}),C[B]=P),R[B]=P})}),Mt(C,(P,B)=>{R[B]||(delete C[B],X(P,I=>{I(!1,{node:$,selector:B,parents:z})}))})})),_[N]||(_[N]=[]),_[N].push(O),E(N,k(v.selection.getStart())).each(()=>{C[N]=_[N]}),{unbind:()=>{f_(_,N,O),f_(C,N,O)}})}})(t,o),a=(p,v)=>((_,C,E={})=>{const k=(N=E,O=C,{format:"html",...N,set:!0,selection:!0,content:O});var N,O;eg(_,k).each(N=>{const O=(($,z)=>{if("raw"!==z.format){const R=$.selection.getRng(),P=$.dom.getParent(R.commonAncestorContainer,$.dom.isBlock),B=P?{context:P.nodeName.toLowerCase()}:{},I=$.parser.parse(z.content,{forced_root_block:!1,...B,...z});return us({validate:!1},$.schema).serialize(I)}return z.content})(_,N),M=_.selection.getRng();(($,z)=>{const R=w.from(z.firstChild).map(T),P=w.from(z.lastChild).map(T);$.deleteContents(),$.insertNode(z);const B=R.bind(So).filter(cn).bind(u_),I=P.bind(Is).filter(cn).bind(u_);m_(B,R,$,!0),m_(I,P,$,!1),$.collapse(!1)})(M,M.createContextualFragment(O)),_.selection.setRng(M),Pl(_,M),ng(_,O,N)})})(o,p,v),l=p=>{const v=d();v.collapse(!!p),u(v)},c=()=>e.getSelection?e.getSelection():e.document.selection,d=()=>{let p;const v=(C,E,k)=>{try{return E.compareBoundaryPoints(C,k)}catch{return-1}},_=e.document;if(et(o.bookmark)&&!li(o)){const C=Xm(o);if(C.isSome())return C.map(E=>ef(o,[E])[0]).getOr(_.createRange())}try{const C=c();C&&!j(C.anchorNode)&&(p=C.rangeCount>0?C.getRangeAt(0):_.createRange(),p=ef(o,[p])[0])}catch{}if(p||(p=_.createRange()),oe(p.startContainer)&&p.collapsed){const C=t.getRoot();p.setStart(C,0),p.setEnd(C,0)}return r&&s&&(0===v(p.START_TO_START,p,r)&&0===v(p.END_TO_END,p,r)?p=s:(r=null,s=null)),p},u=(p,v)=>{if(!((C=p)&&g_(C.startContainer)&&g_(C.endContainer)))return;var C;const _=c();if(p=o.dispatch("SetSelectionRange",{range:p,forward:v}).range,_){s=p;try{_.removeAllRanges(),_.addRange(p)}catch{}!1===v&&_.extend&&(_.collapse(p.endContainer,p.endOffset),_.extend(p.startContainer,p.startOffset)),r=_.rangeCount>0?_.getRangeAt(0):null}if(!p.collapsed&&p.startContainer===p.endContainer&&_?.setBaseAndExtent&&p.endOffset-p.startOffset<2&&p.startContainer.hasChildNodes()){const C=p.startContainer.childNodes[p.startOffset];C&&"IMG"===C.nodeName&&(_.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset),_.anchorNode===p.startContainer&&_.focusNode===p.endContainer||_.setBaseAndExtent(C,0,C,1))}o.dispatch("AfterSetSelectionRange",{range:p,forward:v})},f=()=>{const p=c(),v=p?.anchorNode,_=p?.focusNode;if(!p||!v||!_||j(v)||j(_))return!0;const C=t.createRng(),E=t.createRng();try{C.setStart(v,p.anchorOffset),C.collapse(!0),E.setStart(_,p.focusOffset),E.collapse(!0)}catch{return!0}return C.compareBoundaryPoints(C.START_TO_START,E)<=0},h={dom:t,win:e,serializer:n,editor:o,expand:(p={type:"word"})=>u(ai(t).expand(d(),p)),collapse:l,setCursorLocation:(p,v)=>{const _=t.createRng();et(p)&&et(v)?(_.setStart(p,v),_.setEnd(p,v),u(_),l(!1)):(Tm(t,_,o.getBody(),!0),u(_))},getContent:p=>((v,_={})=>{return E=_.format?_.format:"html",k=_,ye(v).selection.getContent(E,k);var E,k})(o,p),setContent:a,getBookmark:(p,v)=>g.getBookmark(p,v),moveToBookmark:p=>g.moveToBookmark(p),select:(p,v)=>{return(_=t,C=p,E=v,w.from(C).bind(k=>w.from(k.parentNode).map(N=>{const O=_.nodeIndex(k),M=_.createRng();return M.setStart(N,O),M.setEnd(N,O+1),E&&(Tm(_,M,k,!0),Tm(_,M,k,!1)),M}))).each(u),p;var _,C,E},isCollapsed:()=>{const p=d(),v=c();return!(!p||p.item)&&(p.compareEndPoints?0===p.compareEndPoints("StartToEnd",p):!v||p.collapsed)},isEditable:()=>{const p=d(),v=o.getBody().querySelectorAll('[data-mce-selected="1"]');return v.length>0?Yn(v,_=>t.isEditable(_.parentElement)):p.startContainer===p.endContainer?t.isEditable(p.startContainer):t.isEditable(p.startContainer)&&t.isEditable(p.endContainer)},isForward:f,setNode:p=>(a(t.getOuterHTML(p)),p),getNode:()=>((p,v)=>{if(!v)return p;let _=v.startContainer,C=v.endContainer;const E=v.startOffset,k=v.endOffset;let N=v.commonAncestorContainer;v.collapsed||(_===C&&k-E<2&&_.hasChildNodes()&&(N=_.childNodes[E]),U(_)&&U(C)&&(_=_.length===E?Dv(_.nextSibling,!0):_.parentNode,C=0===k?Dv(C.previousSibling,!1):C.parentNode,_&&_===C&&(N=_)));const O=U(N)?N.parentNode:N;return A(O)?O:p})(o.getBody(),d()),getSel:c,setRng:u,getRng:d,getStart:p=>Tv(o.getBody(),d(),p),getEnd:p=>Rv(o.getBody(),d(),p),getSelectedBlocks:(p,v)=>((_,C,E,k)=>{const N=[],O=_.getRoot(),M=_.getParent(E||Tv(O,C,C.collapsed),_.isBlock),$=_.getParent(k||Rv(O,C,C.collapsed),_.isBlock);if(M&&M!==O&&N.push(M),M&&$&&M!==$){let z;const R=new y(M,O);for(;(z=R.next())&&z!==$;)_.isBlock(z)&&N.push(z)}return $&&M!==$&&$!==O&&N.push($),N})(t,d(),p,v),normalize:()=>{const p=d(),v=c();if(!(Nm(v).length>1)&&dd(o)){const _=bd(t,p);return _.each(C=>{u(C,f())}),_.getOr(p)}return p},selectorChanged:(p,v)=>(i(p,v),h),selectorChangedWithUnbind:i,getScrollContainer:()=>{let p,v=t.getRoot();for(;v&&"BODY"!==v.nodeName;){if(v.scrollHeight>v.clientHeight){p=v;break}v=v.parentNode}return p},scrollIntoView:(p,v)=>{var _;et(p)?((_=o).inline?PS:IS)(_,p,v):Pl(o,d(),v)},placeCaretAt:(p,v)=>u(cv(p,v,o.getDoc())),getBoundingClientRect:()=>{const p=d();return p.collapsed?H.fromRangeStart(p).getClientRects()[0]:p.getBoundingClientRect()},destroy:()=>{e=r=s=null,b.destroy()}},g=Bl(h),b=rv(h,o);return h.bookmarkManager=g,h.controlSelection=b,h},pA=(t,e,n)=>{-1===Q.inArray(e,n)&&(t.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),e.push(n))},h_=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,...t},r=e&&e.dom?e.dom:Jt.DOM,s=e&&e.schema?e.schema:ss(o),i=pa(o,s);return l=o,c=r,(a=i).addAttributeFilter("data-mce-tabindex",(d,u)=>{let f=d.length;for(;f--;){const h=d[f];h.attr("tabindex",h.attr("data-mce-tabindex")),h.attr(u,null)}}),a.addAttributeFilter("src,href,style",(d,u)=>{const f="data-mce-"+u,h=l.url_converter,g=l.url_converter_scope;let b=d.length;for(;b--;){const p=d[b];let v=p.attr(f);void 0!==v?(p.attr(u,v.length>0?v:null),p.attr(f,null)):(v=p.attr(u),"style"===u?v=c.serializeStyle(c.parseStyle(v),p.name):h&&(v=h.call(g,v,u,p.name)),p.attr(u,v.length>0?v:null))}}),a.addAttributeFilter("class",d=>{let u=d.length;for(;u--;){const f=d[u];let h=f.attr("class");h&&(h=h.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",h.length>0?h:null))}}),a.addAttributeFilter("data-mce-type",(d,u,f)=>{let h=d.length;for(;h--;){const g=d[h];"bookmark"===g.attr("data-mce-type")&&!f.cleanup&&(w.from(g.firstChild).exists(p=>{var v;return!Xi(null!==(v=p.value)&&void 0!==v?v:"")})?g.unwrap():g.remove())}}),a.addNodeFilter("noscript",d=>{var u;let f=d.length;for(;f--;){const h=d[f].firstChild;h&&(h.value=rs.decode(null!==(u=h.value)&&void 0!==u?u:""))}}),a.addNodeFilter("script,style",(d,u)=>{var f;const h=b=>b.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=d.length;for(;g--;){const b=d[g],p=b.firstChild,v=null!==(f=p?.value)&&void 0!==f?f:"";if("script"===u){const _=b.attr("type");_&&b.attr("type","mce-no/type"===_?null:_.replace(/^mce\-/,"")),"xhtml"===l.element_format&&p&&v.length>0&&(p.value="// <![CDATA[\n"+h(v)+"\n// ]]>")}else"xhtml"===l.element_format&&p&&v.length>0&&(p.value="\x3c!--\n"+h(v)+"\n--\x3e")}}),a.addNodeFilter("#comment",d=>{let u=d.length;for(;u--;){const f=d[u],h=f.value;l.preserve_cdata&&0===h?.indexOf("[CDATA[")?(f.name="#cdata",f.type=4,f.value=c.decode(h.replace(/^\[CDATA\[|\]\]$/g,""))):0===h?.indexOf("mce:protected ")&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(h).substr(14))}}),a.addNodeFilter("xml:namespace,input",(d,u)=>{let f=d.length;for(;f--;){const h=d[f];7===h.type?h.remove():1===h.type&&("input"!==u||h.attr("type")||h.attr("type","text"))}}),a.addAttributeFilter("data-mce-type",d=>{X(d,u=>{"format-caret"===u.attr("data-mce-type")&&(u.isEmpty(a.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(d,u)=>{let f=d.length;for(;f--;)d[f].attr(u,null)}),l.remove_trailing_brs&&Ny(a,a.schema),{schema:s,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:(a,l={})=>{const c={format:"html",...l},d=(g=a,v=b=c,et(p=h=e)&&p.hasEventListeners("PreProcess")&&!v.no_events?((p,v,_)=>{let C;const E=p.dom;let k=v.cloneNode(!0);const N=document.implementation;if(N.createHTMLDocument){const O=N.createHTMLDocument("");Q.each("BODY"===k.nodeName?k.childNodes:[k],M=>{O.body.appendChild(O.importNode(M,!0))}),k="BODY"!==k.nodeName?O.body.firstChild:O.body,C=E.doc,E.doc=O}return M={..._,node:k},p.dispatch("PreProcess",M),C&&(E.doc=C),k;var M})(h,g,b):g),u=((h,g,b)=>{const p=Ro(b.getInner?g.innerHTML:h.getOuterHTML(g));return b.selection||Yi(T(g))?p:Q.trim(p)})(r,d,c),f=((h,g,b)=>{const p=b.selection?{forced_root_block:!1,...b}:b,v=h.parse(g,p);return(_=>{const C=k=>"br"===k?.name,E=_.lastChild;if(C(E)){const k=E.prev;C(k)&&(E.remove(),k.remove())}})(v),v})(i,u,c);var h,g,b,p,v;return"tree"===c.format?f:((h,g,b,p,v)=>{var k;return((C,E,k)=>{return!E.no_events&&C?(O=C,M={...E,content:k},O.dispatch("PostProcess",M)).content:k;var O,M})(h,v,(k=p,us(g,b).serialize(k)))})(e,o,s,f,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:dt(pA,i,n),getTempAttrs:ot(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters,removeNodeFilter:i.removeNodeFilter,removeAttributeFilter:i.removeAttributeFilter};var a,l,c})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},cg=(t,e,n={})=>{const o=(r=n,s=e,{format:"html",...r,set:!0,content:s});var r,s;return eg(t,o).map(r=>{const s=(a=r.content,l=r,lg(t).editor.setContent(a,l));var a,l;return ng(t,s.html,r),s.content}).getOr(e)},bA="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),vA="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),yA="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),b_=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],v_=(t,e)=>{const n=Et(e,o=>Ot(t,o));return Tn(n)},y_=(t,e)=>{const n=Q.makeMap(t.plugins," "),o=Et(e,r=>Ot(n,r));return Tn(o)},EA=t=>de(b_,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),Fd=Jt.DOM,jd=t=>w.from(t).each(e=>e.destroy()),zd=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>Ot(t,e)}})(),ha=nn.ModelManager,__=(t,e)=>e.dom[t],C_=(t,e)=>parseInt(fo(e,t),10),kA=dt(__,"clientWidth"),SA=dt(__,"clientHeight"),NA=dt(C_,"margin-top"),AA=dt(C_,"margin-left"),w_=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},o=()=>w.from(e[0]),r=()=>{X(e,l=>{l.reposition()})},s=l=>{Wo(e,c=>c===l).each(c=>{e.splice(c,1)})},i=(l,c=!0)=>{return t.removed||!(u=(d=t).inline?d.getBody():d.getContentAreaContainer(),w.from(u).map(T)).map(Sr).getOr(!1)?{}:(c&&t.dispatch("BeforeOpenNotification",{notification:l}),de(e,d=>{return!((u=n().getArgs(d)).type!==(f=l).type||u.text!==f.text||u.progressBar||u.timeout||f.progressBar||f.timeout);var u,f}).getOrThunk(()=>{t.editorManager.setActive(t);const d=n().open(l,()=>{s(d),r(),o().fold(()=>t.focus(),u=>wv(T(u.getEl())))});return(u=>{e.push(u)})(d),r(),t.dispatch("OpenNotification",{notification:{...d}}),d}));var d,u},a=ot(e);return(l=t).on("SkinLoaded",()=>{const c=ak(l);c&&i({text:c,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{X(e.slice(),c=>{n().close(c)})}),{open:i,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:a};var l},ba=nn.PluginManager,pi=nn.ThemeManager,x_=t=>{let e=[];const n=()=>{const i=t.theme;return i&&i.getWindowManagerImpl?i.getWindowManagerImpl():(()=>{const a=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:a,openUrl:a,alert:a,confirm:a,close:a}})()},o=(i,a)=>(...l)=>a?a.apply(i,l):void 0,r=i=>{t.dispatch("CloseWindow",{dialog:i}),e=Et(e,a=>a!==i),0===e.length&&t.focus()},s=i=>{t.editorManager.setActive(t),Ym(t),t.ui.show();const a=i();return e.push(l=a),t.dispatch("OpenWindow",{dialog:l}),a;var l};return t.on("remove",()=>{X(e,i=>{n().close(i)})}),{open:(i,a)=>s(()=>n().open(i,a,r)),openUrl:i=>s(()=>n().openUrl(i,r)),alert:(i,a,l)=>{const c=n();c.alert(i,o(l||c,a))},confirm:(i,a,l)=>{const c=n();c.confirm(i,o(l||c,a))},close:()=>{w.from(e[e.length-1]).each(i=>{n().close(i),r(i)})}}},E_=(t,e)=>{t.notificationManager.open({type:"error",text:e})},Ud=(t,e)=>{t._skinLoaded?E_(t,e):t.on("SkinLoaded",()=>{E_(t,e)})},Vl=(t,e,n)=>{Qb(t,e,{message:n}),console.error(n)},Wl=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,Hd=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},k_=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return jt(e,r=>/^[a-z0-9\-]+$/i.test(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},S_=()=>{let t={};const e=(o,r)=>({status:o,resultUri:r}),n=o=>o in t;return{hasBlobUri:n,getResultUri:o=>{const r=t[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&1===t[o].status,isUploaded:o=>!!n(o)&&2===t[o].status,markPending:o=>{t[o]=e(1,null)},markUploaded:(o,r)=>{t[o]=e(2,r)},removeFailed:o=>{delete t[o]},destroy:()=>{t={}}}};let TA=0;const N_=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),A_=(t,e)=>((t,e)=>{const n={},o=(l,c)=>new Promise((d,u)=>{const f=new XMLHttpRequest;f.open("POST",e.url),f.withCredentials=e.credentials,f.upload.onprogress=g=>{c(g.loaded/g.total*100)},f.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+f.status)},f.onload=()=>{if(f.status<200||f.status>=300)return void u("HTTP Error: "+f.status);const g=JSON.parse(f.responseText);var b,p;g&&bt(g.location)?d((p=g.location,(b=e.basePath)?b.replace(/\/$/,"")+"/"+p.replace(/^\//,""):p)):u("Invalid JSON: "+f.responseText)};const h=new FormData;h.append("file",l.blob(),l.filename()),f.send(h)}),r=Vt(e.handler)?e.handler:o,s=(l,c)=>({url:c,blobInfo:l,status:!0}),i=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),a=(l,c)=>{Q.each(n[l],d=>{d(c)}),delete n[l]};return{upload:(l,c)=>{return e.url||r!==o?(u=c,d=Q.grep(d=l,f=>!t.isUploaded(f.blobUri())),Promise.all(Q.map(d,f=>{return t.isPending(f.blobUri())?(h=>{const g=h.blobUri();return new Promise(b=>{n[g]=n[g]||[],n[g].push(b)})})(f):(g=r,b=u,t.markPending((h=f).blobUri()),new Promise(p=>{let v,_;try{const C=()=>{v&&(v.close(),_=Bt)},E=N=>{C(),t.markUploaded(h.blobUri(),N),a(h.blobUri(),s(h,N)),p(s(h,N))},k=N=>{C(),t.removeFailed(h.blobUri()),a(h.blobUri(),i(h,N)),p(i(h,N))};_=N=>{N<0||N>100||w.from(v).orThunk(()=>w.from(b).map(Ei)).each(O=>{v=O,O.progressBar.value(N)})},g(h,_).then(E,N=>{k(bt(N)?{message:N}:N)})}catch(C){p(i(h,C))}}));var h,g,b}))):new Promise(d=>{d([])});var d,u}}})(e,{url:YE(t),basePath:XE(t),credentials:GE(t),handler:QE(t)}),O_={remove_similar:!0,inherit:!1},va={selector:"td,th",...O_},BA={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...va},tablecellverticalalign:{styles:{"vertical-align":"%value"},...va},tablecellbordercolor:{styles:{borderColor:"%value"},...va},tablecellclass:{classes:["%value"],...va},tableclass:{selector:"table",classes:["%value"],...O_},tablecellborderstyle:{styles:{borderStyle:"%value"},...va},tablecellborderwidth:{styles:{borderWidth:"%value"},...va}},LA=ot(BA),$d=Q.each,oo=Jt.DOM,dg=t=>et(t)&&Ae(t),T_=(t,e)=>{const n=e&&e.schema||ss({}),o=i=>{const a=bt(i)?{name:i,classes:[],attrs:{}}:i,l=oo.create(a.name);return c=l,(d=a).classes.length>0&&oo.addClass(c,d.classes.join(" ")),oo.setAttribs(c,d.attrs),l;var c,d},r=(i,a,l)=>{let c;const d=a[0],u=dg(d)?d.name:void 0,f=((b,p)=>{const _=n.getElementRule(b.nodeName.toLowerCase())?.parentsRequired;return!(!_||!_.length)&&(p&&ut(_,p)?p:_[0])})(i,u);if(f)u===f?(c=d,a=a.slice(1)):c=f;else if(d)c=d,a=a.slice(1);else if(!l)return i;const h=c?o(c):oo.create("div");h.appendChild(i),l&&Q.each(l,b=>{const p=o(b);h.insertBefore(p,i)});const g=dg(c)?c.siblings:void 0;return r(h,a,g)},s=oo.create("div");if(t.length>0){const i=t[0],a=o(i),l=dg(i)?i.siblings:void 0;s.appendChild(r(a,t.slice(1),l))}return s},PA=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=Q.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,i,a)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==Q.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===i){const l=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},MA=(t,e)=>{let n="",o=uk(t);if(""===o)return"";const r=h=>bt(h)?h.replace(/%(\w+)/g,""):"",s=(h,g)=>oo.getStyle(g??t.getBody(),h,!0);if(bt(e)){const h=t.formatter.get(e);if(!h)return"";e=h[0]}if("preview"in e){const h=e.preview;if(!1===h)return"";o=h||o}let i,a=e.block||e.inline||"span";const l=bt(c=e.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Q.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),h=>{const g=Q.map(h.split(/(?:~\+|~|\+)/),PA),b=g.pop();return g.length&&(b.siblings=g),b}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=a),a=e.selector,i=T_(l,t)):i=T_([a],t);const d=oo.select(a,i)[0]||i.firstChild;$d(e.styles,(h,g)=>{const b=r(h);b&&oo.setStyle(d,g,b)}),$d(e.attributes,(h,g)=>{const b=r(h);b&&oo.setAttrib(d,g,b)}),$d(e.classes,h=>{const g=r(h);oo.hasClass(d,g)||oo.addClass(d,g)}),t.dispatch("PreviewFormats"),oo.setStyles(i,{position:"absolute",left:-65535}),t.getBody().appendChild(i);const u=s("fontSize"),f=/px$/.test(u)?parseInt(u,10):0;return $d(o.split(" "),h=>{let g=s(h,d);if(!("background-color"===h&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(h),"#ffffff"===cd(g).toLowerCase())||"color"===h&&"#000000"===cd(g).toLowerCase())){if("font-size"===h&&/em|%$/.test(g)){if(0===f)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*f+"px"}"border"===h&&g&&(n+="padding:0 2px;"),n+=h+":"+g+";"}}),t.dispatch("AfterPreviewFormats"),oo.remove(i),n},R_=t=>{const e=(o=>{const r={},s=(i,a)=>{i&&(bt(i)?(Gt(a)||(a=[a]),X(a,l=>{we(l.deep)&&(l.deep=!to(l)),we(l.split)&&(l.split=!to(l)||Ne(l)),we(l.remove)&&to(l)&&!Ne(l)&&(l.remove="none"),to(l)&&Ne(l)&&(l.mixed=!0,l.block_expand=!0),bt(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[i]=a):Mt(i,(l,c)=>{s(c,l)}))};return s((i=>{const a=i.dom,l=i.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:d=>{a.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:d=>{a.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const d={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[f,d,u]:[d,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(d,u,f)=>A(d)&&d.hasAttribute("href"),onformat:(d,u,f)=>{Q.each(f,(h,g)=>{a.setAttrib(d,g,h)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":d=>{var u;return null!==(u=d?.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Q.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),d=>{c[d]={block:d,remove:"all"}}),c})(o)),s(LA()),s(dk(o)),{get:i=>et(i)?r[i]:r,has:i=>Ot(r,i),register:s,unregister:i=>(i&&r[i]&&delete r[i],r)}})(t),n=Re({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(o=t).on("mouseup keydown",r=>{var s;((i,a,l)=>{const c=i.selection,d=i.getBody();Ff(i,null,l),8!==a&&46!==a||!c.isCollapsed()||"\ufeff"!==c.getStart().innerHTML||Ff(i,oi(d,c.getStart())),37!==a&&39!==a||Ff(i,oi(d,c.getStart()))})(o,r.keyCode,(s=o.selection.getRng().endContainer,U(s)&&Os(s.data,Qt)))}),lr(t)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{Ey(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const i=w.from(s.node).map(a=>Rl(a)?a:a.startContainer).bind(a=>A(a)?w.some(a):w.from(a.parentElement)).getOrThunk(()=>Cy(r));Ey(r,i,o.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(o,r,s)=>{var a,l,c;a=o,l=r,c=s,ye(t).formatter.apply(a,l,c)},remove:(o,r,s,i)=>{var l,c,d,u;l=o,c=r,d=s,u=i,ye(t).formatter.remove(l,c,d,u)},toggle:(o,r,s)=>{var a,l,c;a=o,l=r,c=s,ye(t).formatter.toggle(a,l,c)},match:(o,r,s,i)=>{return l=o,c=r,d=s,u=i,ye(t).formatter.match(l,c,d,u);var l,c,d,u},closest:o=>{return s=o,ye(t).formatter.closest(s);var s},matchAll:(o,r)=>{return i=o,a=r,ye(t).formatter.matchAll(i,a);var i,a},matchNode:(o,r,s,i)=>{return l=o,c=r,d=s,u=i,ye(t).formatter.matchNode(l,c,d,u);var l,c,d,u},canApply:o=>{return s=o,ye(t).formatter.canApply(s);var s},formatChanged:(o,r,s,i)=>{return l=n,c=o,d=r,u=s,f=i,ye(t).formatter.formatChanged(l,c,d,u,f);var l,c,d,u,f},getCssText:dt(MA,t)};var o},D_=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},B_=t=>{const e=is(),n=Re(0),o=Re(0),r={data:[],typing:!1,beforeChange:()=>{var i,a;i=n,a=e,ye(t).undoManager.beforeChange(i,a)},add:(s,i)=>{return l=r,c=o,d=n,u=e,f=s,h=i,ye(t).undoManager.add(l,c,d,u,f,h);var l,c,d,u,f,h},dispatchChange:()=>{t.setDirty(!0);const s=Md(t);s.bookmark=dm(t.selection),t.dispatch("change",{level:s,lastLevel:Hr(r.data,o.get()).getOrUndefined()})},undo:()=>{return i=r,a=n,l=o,ye(t).undoManager.undo(i,a,l);var i,a,l},redo:()=>{return i=o,a=r.data,ye(t).undoManager.redo(i,a);var i,a},clear:()=>{var i,a;i=r,a=o,ye(t).undoManager.clear(i,a)},reset:()=>{var i;i=r,ye(t).undoManager.reset(i)},hasUndo:()=>{return i=r,a=o,ye(t).undoManager.hasUndo(i,a);var i,a},hasRedo:()=>{return i=r,a=o,ye(t).undoManager.hasRedo(i,a);var i,a},transact:s=>{return a=r,l=n,c=s,ye(t).undoManager.transact(a,l,c);var a,l,c},ignore:s=>{var a,l;a=n,l=s,ye(t).undoManager.ignore(a,l)},extra:(s,i)=>{var l,c,d,u;l=r,c=o,d=s,u=i,ye(t).undoManager.extra(l,c,d,u)}};return lr(t)||((s,i,a)=>{const l=Re(!1),c=d=>{Id(i,!1,a),i.add({},d)};s.on("init",()=>{i.add()}),s.on("BeforeExecCommand",d=>{D_(d.command)||(l_(i,a),i.beforeChange())}),s.on("ExecCommand",d=>{D_(d.command)||c(d)}),s.on("ObjectResizeStart cut",()=>{i.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",d=>{const u=d.keyCode;if(d.isDefaultPrevented())return;const f=zt.os.isMacOS()&&"Meta"===d.key;(u>=33&&u<=36||u>=37&&u<=40||45===u||d.ctrlKey||f)&&(c(),s.nodeChanged()),46!==u&&8!==u||s.nodeChanged(),l.get()&&i.typing&&!ig(Md(s),i.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",d=>{const u=d.keyCode;if(!d.isDefaultPrevented()){if(!(u>=33&&u<=36||u>=37&&u<=40||45===u))return!(u<16||u>20)||224===u||91===u||i.typing||d.ctrlKey&&!d.altKey||d.metaKey?void((zt.os.isMacOS()?d.metaKey:d.ctrlKey&&!d.altKey)&&i.beforeChange()):(i.beforeChange(),Id(i,!0,a),i.add({},d),void l.set(!0));i.typing&&c(d)}}),s.on("mousedown",d=>{i.typing&&c(d)}),s.on("input",d=>{var u,f;d.inputType&&("insertReplacementText"===d.inputType||"insertText"===(u=d).inputType&&null===u.data||"insertFromPaste"===(f=d).inputType||"insertFromDrop"===f.inputType)&&c(d)}),s.on("AddUndo Undo Redo ClearUndos",d=>{d.isDefaultPrevented()||s.nodeChanged()})})(t,r,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),r;var s},IA=[9,27,ct.HOME,ct.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ct.DOWN,ct.UP,ct.LEFT,ct.RIGHT].concat(zt.browser.isFirefox()?[224]:[]),L_="data-mce-placeholder",P_=t=>"keydown"===t.type||"keyup"===t.type,M_=t=>{const e=t.keyCode;return e===ct.BACKSPACE||e===ct.DELETE},FA=(t,e)=>({from:t,to:e}),ug=(t,e)=>{const n=T(t),o=T(e.container());return Ed(n,o).map(r=>({block:r,position:e}))},I_=(t,e)=>Nr(e,n=>$s(n)||It(n.dom),n=>Ht(n,t)).filter(Ye).getOr(t),F_=t=>{const e=(n=>{const o=Se(n);return Wo(o,ue).fold(ot(o),r=>o.slice(0,r))})(t);return X(e,ie),e},j_=(t,e)=>{const n=Pr(e,t);return de(n.reverse(),o=>_e(o)).each(ie)},jA=(t,e,n,o)=>{if(_e(n))return tr(n),rn(n.dom);0===Et(Tc(o),s=>!_e(s)).length&&_e(e)&&qe(o,Ee("br"));const r=gn(n.dom,H.before(o.dom));return X(F_(e),s=>{qe(o,s)}),j_(t,e),r},zA=(t,e,n)=>{if(_e(n)){if(_e(e)){const s=Vo((i=>{const a=(l,c)=>zi(l).fold(()=>c,d=>tn(d)?a(d,c.concat(Qs(d))):c);return a(i,[])})(n),(i,a)=>(Fc(i,a),a),qs());po(e),fe(e,s)}return ie(n),rn(e.dom)}const o=yo(n.dom);return X(F_(e),r=>{fe(n,r)}),j_(t,e),o},z_=(t,e)=>{aa(t,e.dom).bind(n=>w.from(n.getNode())).map(T).filter(un).each(ie)},U_=(t,e,n)=>{return z_(!0,e),z_(!1,n),(o=e,r=n,uo(r,o)?((s,i)=>{const a=Pr(i,s);return w.from(a[a.length-1])})(r,o):w.none()).fold(dt(zA,t,e,n),dt(jA,t,e,n));var o,r},H_=(t,e,n,o)=>e?U_(t,o,n):U_(t,n,o),mg=(t,e)=>{const n=T(t.getBody());return(r=n.dom,s=e,i=t.selection.getRng(),i.collapsed?((a,l,c)=>{const d=ug(a,H.fromRangeStart(c)),u=d.bind(f=>Jn(l,a,f.position).bind(h=>ug(a,h).map(g=>{return b=a,p=l,Dt((v=g).position.getNode())&&!_e(v.block)?aa(!1,v.block.dom).bind(_=>_.isEqual(v.position)?Jn(p,b,_).bind(C=>ug(b,C)):w.some(v)).getOr(v):v;var b,p,v})));return je(d,u,FA).filter(f=>{return!Ht((h=f).from.block,h.to.block)&&((h,g)=>{const b=T(h);return Ht(I_(b,g.from.block),I_(b,g.to.block))})(a,f)&&(h=>!1===At(h.from.block.dom)&&!1===At(h.to.block.dom))(f)&&(h=>{const g=b=>Hs(b)||$u(b.dom);return g(h.from.block)&&g(h.to.block)})(f);var h})})(r,s,i):w.none()).map(r=>()=>{H_(n,e,r.from.block,r.to.block).each(s=>{t.selection.setRng(s.toRange())})});var r,s,i},$_=(t,e)=>{const n=T(e),o=dt(Ht,t);return No(n,$s,o).isSome()},fg=(t,e)=>t.selection.isCollapsed()?w.none():(t=>{const e=T(t.getBody());return((n,o)=>{const r=gn(n.dom,H.fromRangeStart(o)).isNone(),s=on(n.dom,H.fromRangeEnd(o)).isNone();return!($_(i=n,(a=o).startContainer)||$_(i,a.endContainer))&&r&&s;var i,a})(e,t.selection.getRng())?(n=t,w.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,o)=>{const r=o.getRng();return je(Ed(n,T(r.startContainer)),Ed(n,T(r.endContainer)),(s,i)=>Ht(s,i)?w.none():w.some(()=>{r.deleteContents(),H_(n,!0,s,i).each(a=>{o.setRng(a.toRange())})})).getOr(w.none())})(e,t.selection);var n})(t),Mr=(t,e,n,o,r)=>w.from(e._selectionOverrides.showCaret(t,n,o,r)),Kl=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?w.none():w.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(e)),gg=(t,e,n)=>e.collapsed?((o,r,s)=>{const i=ym(1,o.getBody(),r),a=H.fromRangeStart(i),l=a.getNode();if(xl(l))return Mr(1,o,l,!a.isAtEnd(),!1);const c=a.getNode(!0);if(xl(c))return Mr(1,o,c,!1,!1);const d=ui(o.dom.getRoot(),a.getNode());return xl(d)?Mr(1,o,d,!1,s):w.none()})(t,e,n).getOr(e):e,HA=t=>fs(t)||Ml(t),$A=t=>gs(t)||Il(t),q_=(t,e,n,o,r,s)=>{var i,a;Mr(o,t,s.getNode(!r),r,!0).each(i=>{if(e.collapsed){const a=e.cloneRange();r?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else e.deleteContents();t.selection.setRng(i)}),i=t.dom,U(a=n)&&0===a.data.length&&i.remove(a)},pg=(t,e)=>((n,o)=>{const r=n.selection.getRng();if(!U(r.commonAncestorContainer))return w.none();const s=o?De.Forwards:De.Backwards,i=rr(n.getBody()),a=dt(_m,o?i.next:i.prev),l=o?HA:$A,c=Al(s,n.getBody(),r),d=a(c),u=d&&no(o,d);if(!u||!sd(c,u))return w.none();if(l(u))return w.some(()=>q_(n,r,c.getNode(),s,o,u));const f=a(u);return f&&l(f)&&sd(u,f)?w.some(()=>q_(n,r,c.getNode(),s,o,f)):w.none()})(t,e),hg=(t,e)=>{const n=t.getBody();return e?rn(n).filter(fs):yo(n).filter(gs)},bg=t=>{const e=t.selection.getRng();return!e.collapsed&&(hg(t,!0).exists(n=>n.isEqual(H.fromRangeStart(e)))||hg(t,!1).exists(n=>n.isEqual(H.fromRangeEnd(e))))},ro=er([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),V_=(t,e,n)=>Jn(e,t,n).bind(o=>{return r=o.getNode(),et(r)&&($s(T(r))||os(T(r)))||((s,i,a,l)=>{const c=d=>tn(T(d))&&!nr(a,l,s);return fb(!i,a).fold(()=>fb(i,l).fold(ne,c),c)})(t,e,n,o)?w.none():e&&At(o.getNode())||!e&&At(o.getNode(!0))?((s,i,a,l)=>{const c=l.getNode(!i);return Ed(T(s),T(a.getNode())).map(d=>_e(d)?ro.remove(d.dom):ro.moveToElement(c)).orThunk(()=>w.some(ro.moveToElement(c)))})(t,e,n,o):e&&gs(n)||!e&&fs(n)?w.some(ro.moveToPosition(o)):w.none();var r}),W_=(t,e)=>w.from(ui(t.getBody(),e)),K_=t=>{const e=t.dom,n=t.selection,o=ui(t.getBody(),n.getNode());if(It(o)&&e.isBlock(o)&&e.isEmpty(o)){const r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(o,""),o.appendChild(r),n.setRng(H.before(r).toRange())}return!0},vg=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return W_(t,n).filter(At).fold(()=>((o,r,s)=>{const i=ym(r?1:-1,o,s),a=H.fromRangeStart(i),l=T(o);return!r&&gs(a)?w.some(ro.remove(a.getNode(!0))):r&&fs(a)?w.some(ro.remove(a.getNode())):!r&&fs(a)&&cf(l,a)?oN(l,a).map(c=>ro.remove(c.getNode())):r&&gs(a)&&lf(l,a)?rN(l,a).map(c=>ro.remove(c.getNode())):(c=o,((f,h)=>{const g=h.getNode(!f),b=f?"after":"before";return A(g)&&g.getAttribute("data-mce-caret")===b})(d=r,u=a)?(f=d,h=u.getNode(!d),ve(h)?w.none():f&&At(h.nextSibling)?w.some(ro.moveToElement(h.nextSibling)):!f&&At(h.previousSibling)?w.some(ro.moveToElement(h.previousSibling)):w.none()).orThunk(()=>V_(c,d,u)):V_(c,d,u).bind(f=>((h,g,b)=>b.fold(p=>w.some(ro.remove(p)),p=>w.some(ro.moveToElement(p)),p=>nr(g,p,h)?w.none():w.some(ro.moveToPosition(p))))(c,u,f)));var c,d,u,f,h})(t.getBody(),e,t.selection.getRng()).map(o=>()=>{return o.fold((r=t,s=e,i=>(r._selectionOverrides.hideFakeCaret(),ci(r,s,T(i)),!0)),((r,s)=>i=>{const a=s?H.before(i):H.after(i);return r.selection.setRng(a.toRange()),!0})(t,e),(r=>s=>(r.selection.setRng(s.toRange()),!0))(t));var r,s}),()=>w.some(Bt))})(t,e):((n,o)=>{const r=n.selection.getNode();return At(r)&&!te(r)?W_(n,r.parentNode).filter(At).fold(()=>w.some(()=>{var s;s=T(n.getBody()),X(x(s,".mce-offscreen-selection"),ie),ci(n,o,T(n.selection.getNode())),pf(n)}),()=>w.some(Bt)):bg(n)?w.some(()=>{C0(n,n.selection.getRng(),T(n.getBody()))}):w.none()})(t,e),yg=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=H.fromRangeStart(n.selection.getRng());return Jn(o,n.getBody(),r).filter(s=>o?JS(s):ZS(s)).bind(s=>vm(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):w.none(),ya=U,Y_=t=>ya(t)&&t.data[0]===Te,X_=t=>ya(t)&&t.data[t.data.length-1]===Te,G_=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(Te)},qd=(t,e)=>t?(n=>{var o;if(ya(n.previousSibling))return X_(n.previousSibling)||n.previousSibling.appendData(Te),n.previousSibling;if(ya(n))return Y_(n)||n.insertData(0,Te),n;{const r=G_(n);return null===(o=n.parentNode)||void 0===o||o.insertBefore(r,n),r}})(e):(n=>{var o,r;if(ya(n.nextSibling))return Y_(n.nextSibling)||n.nextSibling.insertData(0,Te),n.nextSibling;if(ya(n))return X_(n)||n.appendData(Te),n;{const s=G_(n);return n.nextSibling?null===(o=n.parentNode)||void 0===o||o.insertBefore(s,n.nextSibling):null===(r=n.parentNode)||void 0===r||r.appendChild(s),s}})(e),VA=dt(qd,!0),WA=dt(qd,!1),Q_=(t,e)=>U(t.container())?qd(e,t.container()):qd(e,t.getNode()),J_=(t,e)=>{const n=e.get();return n&&t.container()===n&&Bo(n)},_g=(t,e)=>e.fold(n=>{ei(t.get());const o=VA(n);return t.set(o),w.some(H(o,o.length-1))},n=>rn(n).map(o=>{if(J_(o,t)){const r=t.get();return H(r,1)}{ei(t.get());const r=Q_(o,!0);return t.set(r),H(r,1)}}),n=>yo(n).map(o=>{if(J_(o,t)){const r=t.get();return H(r,r.length-1)}{ei(t.get());const r=Q_(o,!1);return t.set(r),H(r,r.length-1)}}),n=>{ei(t.get());const o=WA(n);return t.set(o),w.some(H(o,1))}),Z_=(t,e)=>{for(let n=0;n<t.length;n++){const o=t[n].apply(null,e);if(o.isSome())return o}return w.none()},sn=er([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),tC=(t,e)=>cs(e,t)||t,KA=(t,e,n)=>{const o=h0(n),r=tC(e,o.container());return ps(t,r,o).fold(()=>on(r,o).bind(dt(ps,t,r)).map(s=>sn.before(s)),w.none)},YA=(t,e)=>null===oi(t,e),eC=(t,e,n)=>ps(t,e,n).filter(dt(YA,e)),XA=(t,e,n)=>{const o=b0(n);return eC(t,e,o).bind(r=>gn(r,o).isNone()?w.some(sn.start(r)):w.none())},GA=(t,e,n)=>{const o=h0(n);return eC(t,e,o).bind(r=>on(r,o).isNone()?w.some(sn.end(r)):w.none())},QA=(t,e,n)=>{const o=b0(n),r=tC(e,o.container());return ps(t,r,o).fold(()=>gn(r,o).bind(dt(ps,t,r)).map(s=>sn.after(s)),w.none)},nC=t=>!p0(Cg(t)),cr=(t,e,n)=>Z_([KA,XA,GA,QA],[t,e,n]).filter(nC),Cg=t=>t.fold(He,He,He,He),oC=t=>t.fold(ot("before"),ot("start"),ot("end"),ot("after")),Vd=t=>t.fold(sn.before,sn.before,sn.after,sn.after),wg=t=>t.fold(sn.start,sn.start,sn.end,sn.end),JA=(t,e,n,o,r,s)=>je(ps(e,n,o),ps(e,n,r),(i,a)=>i!==a&&((l,c,d)=>{const u=cs(c,l),f=cs(d,l);return et(u)&&u===f})(n,i,a)?sn.after(t?i:a):s).getOr(s),ZA=(t,e)=>t.fold(ge,n=>{return r=e,!(oC(o=n)===oC(r)&&Cg(o)===Cg(r));var o,r}),tO=(t,e)=>t?e.fold(hr(w.some,sn.start),w.none,hr(w.some,sn.after),w.none):e.fold(w.none,hr(w.some,sn.before),w.none,hr(w.some,sn.end)),rC=(t,e,n)=>{const o=t?1:-1;return e.setRng(H(n.container(),n.offset()+o).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var dr;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(dr||(dr={}));const Wd=(t,e)=>t===De.Backwards?Es(e):e,eO=(t,e,n)=>t===De.Forwards?e.next(n):e.prev(n),nO=(t,e,n,o)=>Dt(o.getNode(e===De.Forwards))?dr.Br:!1===nr(n,o)?dr.Block:dr.Wrap,sC=(t,e,n,o)=>{const r=rr(n);let s=o;const i=[];for(;s;){const a=eO(e,r,s);if(!a)break;if(Dt(a.getNode(!1)))return e===De.Forwards?{positions:Wd(e,i).concat([a]),breakType:dr.Br,breakAt:w.some(a)}:{positions:Wd(e,i),breakType:dr.Br,breakAt:w.some(a)};if(a.isVisible()){if(t(s,a)){const l=nO(0,e,s,a);return{positions:Wd(e,i),breakType:l,breakAt:w.some(a)}}i.push(a),s=a}else s=a}return{positions:Wd(e,i),breakType:dr.Eol,breakAt:w.none()}},iC=(t,e,n,o)=>e(n,o).breakAt.map(r=>{const s=e(n,r).positions;return t===De.Backwards?s.concat(r):[r].concat(s)}).getOr([]),xg=(t,e)=>Me(t,(n,o)=>n.fold(()=>w.some(o),r=>je(Ie(r.getClientRects()),Ie(o.getClientRects()),(s,i)=>{const a=Math.abs(e-s.left);return Math.abs(e-i.left)<=a?o:r}).or(n)),w.none()),Kd=(t,e)=>Ie(e.getClientRects()).bind(n=>xg(t,n.left)),Yl=dt(sC,H.isAbove,-1),Xl=dt(sC,H.isBelow,1),aC=dt(iC,-1,Yl),lC=dt(iC,1,Xl),oO=(t,e)=>Kd(aC(t,e),e),rO=(t,e)=>Kd(lC(t,e),e),sO=At,cC=(t,e)=>Math.abs(t.left-e),dC=(t,e)=>Math.abs(t.right-e),uC=(t,e)=>As(t,(n,o)=>{const r=Math.min(cC(n,e),dC(n,e)),s=Math.min(cC(o,e),dC(o,e));return s===r&&Xn(o,"node")&&sO(o.node)||s<r?o:n}),iO=t=>{const e=n=>jt(n,o=>{const r=Zs(o);return r.node=t,r});if(A(t))return e(t.getClientRects());if(U(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},mC=t=>Kn(t,iO);var Gl;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Gl||(Gl={}));const fC=(t,e,n,o,r,s)=>{let i=0;const a=[],l=u=>{let f=mC([u]);-1===t&&(f=f.reverse());for(let h=0;h<f.length;h++){const g=f[h];if(!n(g,c)){if(a.length>0&&e(g,Yo(a))&&i++,g.line=i,r(g))return!0;a.push(g)}}return!1},c=Yo(s.getClientRects());if(!c)return a;const d=s.getNode();return d&&(l(d),((u,f,h,g)=>{let b=g;for(;b=kl(b,u,Tp,f);)if(h(b))return})(t,o,l,d)),a},aO=dt(fC,Gl.Up,bl,vl),lO=dt(fC,Gl.Down,vl,bl),gC=t=>Yo(t.getClientRects()),pC=t=>e=>e.line>t,Eg=t=>e=>e.line===t,Ir=(t,e)=>{t.selection.setRng(e),Pl(t,t.selection.getRng())},kg=(t,e,n)=>w.some(gg(t,e,n)),hC=(t,e,n,o,r,s)=>{const i=e===De.Forwards,a=rr(t.getBody()),l=dt(_m,i?a.next:a.prev),c=i?o:r;if(!n.collapsed){const g=Qc(n);if(s(g))return Mr(e,t,g,e===De.Backwards,!1);if(bg(t)){const b=n.cloneRange();return b.collapse(e===De.Backwards),w.from(b)}}const d=Al(e,t.getBody(),n);if(c(d))return Kl(t,d.getNode(!i));let u=l(d);const f=Zi(n);if(!u)return f?w.some(n):w.none();if(u=no(i,u),c(u))return Mr(e,t,u.getNode(!i),i,!1);const h=l(u);return h&&c(h)&&sd(u,h)?Mr(e,t,h.getNode(!i),i,!1):f?kg(t,u.toRange(),!1):w.none()},bC=(t,e,n,o,r,s)=>{const i=Al(e,t.getBody(),n),a=Yo(i.getClientRects()),l=e===Gl.Down,c=t.getBody();if(!a)return w.none();if(bg(t)){const b=l?H.fromRangeEnd(n):H.fromRangeStart(n);return(l?rO:oO)(c,b).orThunk(()=>w.from(b)).map(p=>p.toRange())}const d=(l?lO:aO)(c,pC(1),i),u=Et(d,Eg(1)),f=a.left,h=uC(u,f);if(h&&s(h.node)){const b=Math.abs(f-h.left),p=Math.abs(f-h.right);return Mr(e,t,h.node,b<p,!1)}let g;if(g=o(i)?i.getNode():r(i)?i.getNode(!0):Qc(n),g){const b=((v,_,C,E)=>{const k=rr(_);let N,O,M,$;const z=[];let R=0;1===v?(N=k.next,O=vl,M=bl,$=H.after(E)):(N=k.prev,O=bl,M=vl,$=H.before(E));const P=gC($);do{if(!$.isVisible())continue;const B=gC($);if(M(B,P))continue;z.length>0&&O(B,Yo(z))&&R++;const I=Zs(B);if(I.position=$,I.line=R,C(I))return z;z.push(I)}while($=N($));return z})(e,c,pC(1),g);let p=uC(Et(b,Eg(1)),f);if(p||(p=Yo(Et(b,Eg(0))),p))return kg(t,p.position.toRange(),!1)}return 0===u.length?Sg(t,l).filter(l?r:o).map(b=>gg(t,b.toRange(),!1)):w.none()},Sg=(t,e)=>{const n=t.selection.getRng(),o=e?H.fromRangeEnd(n):H.fromRangeStart(n),r=(s=o.container(),i=t.getBody(),No(T(s),a=>iS(a.dom),a=>a.dom===i).map(a=>a.dom).getOr(i));var s,i;if(e){const a=Xl(r,o);return ao(a.positions)}{const a=Yl(r,o);return Ie(a.positions)}},vC=(t,e,n)=>Sg(t,e).filter(n).exists(o=>(t.selection.setRng(o.toRange()),!0)),Yd=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},yC=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},_C=(t,e,n)=>_g(e,n).map(o=>(Yd(t,o),n)),CC=(t,e,n)=>!!wl(t)&&((t,e,n)=>{const o=t.getBody(),r=((s,i,a)=>{const l=H.fromRangeStart(s);if(s.collapsed)return l;{const c=H.fromRangeEnd(s);return a?gn(i,c).getOr(c):on(i,l).getOr(l)}})(t.selection.getRng(),o,n);return((s,i,a,l)=>{const c=no(s,l),d=cr(i,a,c);return cr(i,a,c).bind(dt(tO,s)).orThunk(()=>((u,f,h,g,b)=>{const p=no(u,b);return Jn(u,h,p).map(dt(no,u)).fold(()=>g.map(Vd),v=>cr(f,h,v).map(dt(JA,u,f,h,p,v)).filter(dt(ZA,g))).filter(nC)})(s,i,a,d,l))})(n,dt(di,t),o,r).bind(s=>_C(t,e,s))})(t,e,n).isSome(),wC=(t,e,n)=>!!wl(e)&&((o,r)=>{const s=r.selection.getRng(),i=o?H.fromRangeEnd(s):H.fromRangeStart(s);return!!Vt(r.selection.getSel().modify)&&(o&&Gi(i)?rC(!0,r.selection,i):!(o||!Qi(i))&&rC(!1,r.selection,i))})(t,e),uO=dt(wC,!0),mO=dt(wC,!1),Xd=(t,e,n)=>{if(wl(t)){const o=Sg(t,e).getOrThunk(()=>{const r=t.selection.getRng();return e?H.fromRangeEnd(r):H.fromRangeStart(r)});return cr(dt(di,t),t.getBody(),o).exists(r=>{const s=Vd(r);return _g(n,s).exists(i=>(Yd(t,i),!0))})}return!1},xC=(t,e)=>n=>_g(e,n).map(o=>()=>Yd(t,o)),EC=(t,e,n,o)=>{const r=t.getBody(),s=dt(di,t);t.undoManager.ignore(()=>{t.selection.setRng(((i,a)=>{const l=document.createRange();return l.setStart(i.container(),i.offset()),l.setEnd(a.container(),a.offset()),l})(n,o)),gf(t),cr(s,r,H.fromRangeStart(t.selection.getRng())).map(wg).bind(xC(t,e)).each(nt)}),t.nodeChanged()},Ng=(t,e,n)=>{if(t.selection.isCollapsed()&&wl(t)){const o=H.fromRangeStart(t.selection.getRng());return((r,s,i,a)=>{const l=(u=r.getBody(),f=a.container(),cs(f,u)||u),c=dt(di,r),d=cr(c,l,a);var u,f;return d.bind(u=>i?u.fold(ot(w.some(wg(u))),w.none,ot(w.some(Vd(u))),w.none):u.fold(w.none,ot(w.some(Vd(u))),w.none,ot(w.some(wg(u))))).map(xC(r,s)).getOrThunk(()=>{const u=Ol(i,l,a),f=u.bind(h=>cr(c,l,h));return je(d,f,()=>ps(c,l,a).bind(h=>{return je(rn(g=h),yo(g),(b,p)=>{const v=no(!0,b),_=no(!1,p);return on(g,v).forall(C=>C.isEqual(_))}).getOr(!0)?w.some(()=>{ci(r,i,T(h))}):w.none();var g})).getOrThunk(()=>f.bind(()=>u.map(h=>()=>{i?EC(r,s,a,h):EC(r,s,h,a)})))})})(t,e,n,o)}return w.none()},kC=(t,e)=>{const n=T(t.getBody()),o=T(t.selection.getStart()),r=Pr(o,n);return Wo(r,e).fold(ot(r),s=>r.slice(0,s))},fO=t=>1===Hi(t),SC=(t,e)=>{const n=dt(K0,t);return Kn(e,o=>n(o)?[o.dom]:[])},NC=t=>{const e=kC(t,ue);return SC(t,e)},AC=(t,e)=>{const n=t.selection.getStart(),o=((r,s)=>{const i=s.parentElement;return Dt(s)&&!le(i)&&r.dom.isEmpty(i)})(t,n)||Y0(T(n))?W0(n,e):((r,s)=>{const{caretContainer:i,caretPosition:a}=V0(s);return r.insertNode(i.dom),a})(t.selection.getRng(),e);t.selection.setRng(o.toRange())},OC=t=>U(t.startContainer),Ag=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=Et(kC(t,r=>ue(r)||Hi(r)>1),fO);return ao(n).bind(o=>{const r=H.fromRangeStart(t.selection.getRng());return y0(e,r,o.dom)&&!Y0(o)?w.some(()=>((s,i,a,l)=>{const c=SC(i,l);if(0===c.length)ci(i,s,a);else{const d=W0(a.dom,c);i.selection.setRng(d.toRange())}})(e,t,o,n)):w.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&OC(n)&&((n,o)=>{const r=o.startContainer.parentElement;return!le(r)&&K0(n,T(r))})(t,e)&&(n=>{return(r=>{const s=r.startContainer.parentNode,i=r.endContainer.parentNode;return!le(s)&&!le(i)&&s.isEqualNode(i)})(o=n)&&(r=>{const s=r.endContainer;return r.endOffset===(U(s)?s.length:s.childNodes.length)})(o)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n);var o})(e);var n})(n)){const o=NC(n);return w.some(()=>{gf(n),((r,s)=>{const i=Ni(s,NC(r));i.length>0&&AC(r,i)})(n,o)})}return w.none()})(t),Ql=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(OC(n)||e.dom.isEmpty(n.startContainer))&&!(t=>No(t,r=>_o(r.dom),ue).isSome())(T(e.selection.getStart()))})(t)&&AC(t,[]),!0),Og=(t,e,n)=>et(n)?w.some(()=>{t._selectionOverrides.hideFakeCaret(),ci(t,e,T(n))}):w.none(),Tg=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=o?Ml:Il,i=Al(o?De.Forwards:De.Backwards,n.getBody(),n.selection.getRng());return r(i)?Og(n,o,i.getNode(!o)):w.from(no(o,i)).filter(a=>r(a)&&sd(i,a)).bind(a=>Og(n,o,a.getNode(!o)))})(t,e):((n,o)=>{const r=n.selection.getNode();return re(r)?Og(n,o,r):w.none()})(t,e),Rg=t=>xo(t??"").getOr(0),TC=(t,e)=>(t||"table"===Yt(e)?"margin":"padding")+("rtl"===fo(e,"direction")?"-right":"-left"),RC=t=>{const e=BC(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,Yn(e,r=>{const s=TC(Wh(n),r),i=go(r,s).map(Rg).getOr(0);return"false"!==n.dom.getContentEditable(r.dom)&&i>0})));var n},DC=t=>Wi(t)||os(t),BC=t=>Et(tl(t.selection.getSelectedBlocks()),e=>!DC(e)&&!xn(e).exists(DC)&&Nr(e,n=>It(n.dom)||At(n.dom)).exists(n=>It(n.dom))),LC=(t,e)=>{var n,o;const{dom:r}=t,s=tk(t),i=null!==(o=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",a=Rg(s),l=Wh(t);X(BC(t),c=>{((d,u,f,h,g,b)=>{const p=TC(f,T(b)),v=Rg(d.getStyle(b,p));if("outdent"===u){const _=Math.max(0,v-h);d.setStyle(b,p,_?_+g:"")}else d.setStyle(b,p,v+h+g)})(r,e,l,a,i,c.dom)})},PC=t=>LC(t,"outdent"),MC=t=>{if(t.selection.isCollapsed()&&RC(t)){const e=t.dom,n=t.selection.getRng(),o=H.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&af(T(r),o))return w.some(()=>PC(t))}return w.none()},IC=(t,e,n)=>$r([MC,vg,pg,(o,r)=>Ng(o,e,r),mg,xf,yg,Tg,fg,Ag],o=>o(t,n)).filter(o=>t.selection.isEditable()),FC=t=>void 0===t.touches||1!==t.touches.length?w.none():w.some(t.touches[0]),Dg=(t,e)=>Ot(t,e.nodeName),vO=(t,e)=>!!U(e)||!!A(e)&&!Dg(t.getBlockElements(),e)&&!Zn(e)&&!Ks(t,e),yO=(t,e)=>!(!U(e)||0!==e.data.length&&(!/^\s+$/.test(e.data)||e.nextSibling&&!Dg(t,e.nextSibling))),jC=t=>t.dom.create(fn(t),Cl(t)),_O=t=>{const e=t.dom,n=t.selection,o=t.schema,r=o.getBlockElements(),s=n.getStart(),i=t.getBody();let a,l,c=!1;const d=fn(t);if(!s||!A(s))return;const u=i.nodeName.toLowerCase();if(!o.isValidChild(u,d.toLowerCase())||(C=r,E=i,ce(Gv(T(s),T(E)),N=>Dg(C,N.dom))))return;var C,E;const f=n.getRng(),{startContainer:h,startOffset:g,endContainer:b,endOffset:p}=f,v=li(t);let _=i.firstChild;for(;_;)if(A(_)&&dE(o,_),vO(o,_)){if(yO(r,_)){l=_,_=_.nextSibling,e.remove(l);continue}a||(a=jC(t),i.insertBefore(a,_),c=!0),l=_,_=_.nextSibling,a.appendChild(l)}else a=null,_=_.nextSibling;c&&v&&(f.setStart(h,g),f.setEnd(b,p),n.setRng(f),t.nodeChanged())},zC=(t,e,n)=>{const o=T(jC(t)),r=qs();fe(o,r),n(e,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},UC=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),CO=(t,e,n)=>function(o){const r=arguments,s=r[r.length-2],i=s>0?e.charAt(s-1):"";if('"'===i)return o;if(">"===i){const a=e.lastIndexOf("<",s);if(-1!==a&&-1!==e.substring(a,s).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},HC=(t,e)=>{e.hasAttribute("data-mce-caret")&&(il(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},wO=(t,e)=>{const n=js(T(t.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void HC(t,n)):void(sl(n)&&(HC(t,n),t.undoManager.add()))},$C=At,qC=(t,e,n)=>{const o=rr(t.getBody()),r=dt(_m,1===e?o.next:o.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(H.fromRangeStart(n))){const i=T((a=>{const l=a.dom.create(fn(a));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?To(T(s),i):qe(T(s),i),t.selection.select(i.dom,!0),t.selection.collapse()}}},VC=(t,e)=>((n,o)=>{const r=o?De.Forwards:De.Backwards,s=n.selection.getRng();return(i=r,a=n,l=s,hC(a,i,l,fs,gs,$C)).orThunk(()=>(qC(n,r,s),w.none()));var i,a,l})(t,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return p0(r)?!o:o})(t.selection,e)).exists(n=>(Ir(t,n),!0)),WC=(t,e)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return(i=r,a=n,l=s,bC(a,i,l,c=>fs(c)||Yv(c),c=>gs(c)||Xv(c),$C)).orThunk(()=>(qC(n,r,s),w.none()));var i,a,l})(t,e).exists(n=>(Ir(t,n),!0)),KC=(t,e)=>vC(t,e,e?gs:fs),Gd=(t,e)=>hg(t,!e).map(n=>{const o=n.toRange(),r=t.selection.getRng();return e?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(Ir(t,n),!0)),xO=t=>ut(["figcaption"],Yt(t)),YC=(t,e)=>!!t.selection.isCollapsed()&&((t,e)=>{const n=T(t.getBody()),o=H.fromRangeStart(t.selection.getRng());return((r,s)=>{const i=dt(Ht,s);return Nr(T(r.container()),ue,i).filter(xO)})(o,n).exists(()=>{if(r=n,i=o,e?Xl(r.dom,i).breakAt.isNone():Yl(r.dom,i).breakAt.isNone()){const r=zC(t,n,e?fe:ts);return t.selection.setRng(r),!0}var r,i;return!1})})(t,e),XC={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},GC=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,Tt=(t,...e)=>()=>t.apply(null,e),Jl=(t,e)=>{return de((o=e,Kn(jt(t,s=>({...XC,...s})),r=>GC(r,o)?[r]:[])),n=>n.action());var o},QC=(t,e)=>{return $r((o=e,Kn(jt(t,s=>({...XC,...s})),r=>GC(r,o)?[r]:[])),n=>n.action());var o},JC=(t,e)=>{const n=e?De.Forwards:De.Backwards,o=t.selection.getRng();return hC(t,n,o,Ml,Il,re).exists(r=>(Ir(t,r),!0))},ZC=(t,e)=>{const n=e?1:-1,o=t.selection.getRng();return bC(t,n,o,Ml,Il,re).exists(r=>(Ir(t,r),!0))},tw=(t,e)=>vC(t,e,e?Il:Ml),ew=er([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Zl={...ew,none:t=>ew.none(t)},nw=(t,e,n)=>Kn(Se(t),o=>In(o,e)?n(o)?[o]:[]:nw(o,e,n)),ow=(t,e)=>Ao(t,"table",e),Bg=(t,e,n,o,r=ge)=>{const s=1===o;if(!s&&n<=0)return Zl.first(t[0]);if(s&&n>=t.length-1)return Zl.last(t[t.length-1]);{const i=n+o,a=t[i];return r(a)?Zl.middle(e,a):Bg(t,e,i,o,r)}},rw=(t,e)=>ow(t,e).bind(n=>{const o=nw(n,"th,td",ge);return Wo(o,r=>Ht(t,r)).map(r=>({index:r,all:o}))}),sw=(t,e,n,o,r)=>{const s=x(T(n),"td,th,caption").map(a=>a.dom);var a;return((a,l,c)=>Me(a,(d,u)=>d.fold(()=>w.some(u),f=>{const h=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c)),g=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-c));return w.some(g<h?u:f)}),w.none()))(Et((a=t,Kn(s,c=>{const d={left:(u=Zs(c.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:d.left,y:a(d),cell:c},{x:d.right,y:a(d),cell:c}]})),a=>e(a,r)),o,r).map(a=>a.cell)},kO=dt(sw,t=>t.bottom,(t,e)=>t.y<e),SO=dt(sw,t=>t.top,(t,e)=>t.y>e),iw=(t,e,n)=>{const o=t(e,n);return(r=o).breakType===dr.Wrap&&0===r.positions.length||!Dt(n.getNode())&&(r=>r.breakType===dr.Br&&1===r.positions.length)(o)?!((r,s,i)=>i.breakAt.exists(a=>r(s,a).breakAt.isSome()))(t,e,o):o.breakAt.isNone();var r},NO=dt(iw,Yl),AO=dt(iw,Xl),OO=(t,e,n,o)=>{const r=t.selection.getRng(),s=e?1:-1;return!(!ab()||!((i,a,l)=>{const c=H.fromRangeStart(a);return aa(!i,l).exists(d=>d.isEqual(c))})(e,r,n)||(Mr(s,t,n,!e,!1).each(i=>{Ir(t,i)}),0))},aw=(t,e,n)=>{const o=((s,i)=>{const a=i.getNode(s);return pt(a)?w.some(a):w.none()})(!!e,n),r=!1===e;o.fold(()=>Ir(t,n.toRange()),s=>aa(r,t.getBody()).filter(i=>i.isEqual(n)).fold(()=>Ir(t,n.toRange()),i=>{return a=e,c=s,void(l=t).undoManager.transact(()=>{const d=a?To:qe,u=zC(l,T(c),d);Ir(l,u)});var a,l,c}))},TO=(t,e,n,o)=>{const r=t.selection.getRng(),s=H.fromRangeStart(r),i=t.getBody();if(!e&&NO(o,s)){const a=(l=i,(u=c=n,f=d=s,Ie(f.getClientRects()).bind(h=>kO(u,h.left,h.top)).bind(h=>{return Kd(yo(g=h).map(b=>Yl(g,b).positions.concat(b)).getOr([]),f);var g})).orThunk(()=>Ie(d.getClientRects()).bind(u=>xg(aC(l,H.before(c)),u.left))).getOr(H.before(c)));return aw(t,e,a),!0}var l,c,d,u,f;if(e&&AO(o,s)){const a=((l,c,d)=>((u,f)=>ao(f.getClientRects()).bind(h=>SO(u,h.left,h.top)).bind(h=>{return Kd(rn(g=h).map(b=>[b].concat(Xl(g,b).positions)).getOr([]),f);var g}))(c,d).orThunk(()=>Ie(d.getClientRects()).bind(u=>xg(lC(l,H.after(c)),u.left))).getOr(H.after(c)))(i,n,s);return aw(t,e,a),!0}return!1},lw=(t,e,n)=>w.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>w.from(t.dom.getParent(o,"table")).map(r=>n(t,e,r,o))).getOr(!1),cw=(t,e)=>lw(t,e,OO),dw=(t,e)=>lw(t,e,TO),uw=(t,e,n)=>n.fold(w.none,w.none,(o,r)=>{return(s=r,((i,a)=>{const l=c=>{for(let d=0;d<c.childNodes.length;d++){const u=T(c.childNodes[d]);if(a(u))return w.some(u);const f=l(c.childNodes[d]);if(f.isSome())return f}return w.none()};return l(i.dom)})(s,Bv)).map(i=>{return(t=>{const e=ma.getWin(t).dom,n=(r,s,i,a)=>zm(e,r,s,i,a),o=t.match({domRange:s=>{const i=T(s.startContainer),a=T(s.endContainer);return lv(i,s.startOffset,a,s.endOffset)},relative:SS,exact:lv});return((r,s)=>{var a;return((a,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(d=>!1===d.collapsed).map(d=>Ll.rtl(T(d.endContainer),d.endOffset,T(d.startContainer),d.startOffset)).getOrThunk(()=>iv(0,Ll.ltr,c)):iv(0,Ll.ltr,c)})(0,(a=r,s.match({domRange:c=>({ltr:ot(c),rtl:w.none}),relative:(c,d)=>({ltr:Xo(()=>sv(a,c,d)),rtl:Xo(()=>w.some(sv(a,d,c)))}),exact:(c,d,u,f)=>({ltr:Xo(()=>zm(a,c,d,u,f)),rtl:Xo(()=>w.some(zm(a,u,f,c,d)))})})))})(e,o).match({ltr:n,rtl:n})})(ma.exact(a=i,0,a,0));var a});var s},o=>(t.execCommand("mceTableInsertRowAfter"),mw(t,e,o))),mw=(t,e,n)=>{return uw(t,e,(r=Oo,rw(o=n,void 0).fold(()=>Zl.none(o),s=>Bg(s.all,o,s.index,1,r))));var o,r},RO=(t,e,n)=>{return uw(t,e,(r=Oo,rw(o=n,void 0).fold(()=>Zl.none(),s=>Bg(s.all,o,s.index,-1,r))));var o,r},fw=(t,e)=>{const n=["table","li","dl"],o=T(t.getBody()),r=i=>{const a=Yt(i);return Ht(i,o)||ut(n,a)},s=t.selection.getRng();return(i=T(e?s.endContainer:s.startContainer),a=r,((l,c,d=ne)=>d(c)?w.none():ut(l,Yt(c))?w.some(c):Fs(c,l.join(","),u=>In(u,"table")||d(u)))(["td","th"],i,a)).map(i=>(ow(i,r).each(a=>{t.model.table.clearSelectedCells(a.dom)}),t.selection.collapse(!e),(e?mw:RO)(t,r,i).each(a=>{t.selection.setRng(a)}),!0)).getOr(!1);var i,a},jo=(t,e)=>({container:t,offset:e}),Qd=Jt.DOM,Jd=t=>e=>t===e?-1:0,Lg=(t,e,n)=>{if(U(t)&&e>=0)return w.some(jo(t,e));{const o=Js(Qd);return w.from(o.backwards(t,e,Jd(t),n)).map(r=>jo(r.container,r.container.data.length))}},Pg=(t,e,n)=>{if(!U(t))return w.none();if(e>=0&&e<=t.data.length)return w.some(jo(t,e));{const r=Js(Qd);return w.from(r.backwards(t,e,Jd(t),n)).bind(s=>Pg(s.container,e+s.container.data.length,n))}},gw=(t,e,n)=>{if(!U(t))return w.none();const o=t.data;if(e<=o.length)return w.some(jo(t,e));{const r=Js(Qd);return w.from(r.forwards(t,e,Jd(t),n)).bind(s=>gw(s.container,e-o.length,n))}},Mg=(t,e,n,o,r)=>{const s=Js(t,(i=t,a=>i.isBlock(a)||ut(["BR","IMG","HR","INPUT"],a.nodeName)||"false"===i.getContentEditable(a)));var i;return w.from(s.backwards(e,n,o,r))},pw=t=>Ro(t.toString().replace(/\u00A0/g," ")),hw=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),Ig=(t,e)=>t.substring(e.length),bw=(t,e,n,o=0)=>{return(r=T(e.startContainer),Ao(r,Lv)).fold(()=>((s,i,a,l=0)=>{if(!(c=i).collapsed||!U(c.startContainer))return w.none();var c;const d={text:"",offset:0},u=s.getParent(i.startContainer,s.isBlock)||s.getRoot();return Mg(s,i.startContainer,i.startOffset,(f,h,g)=>(d.text=g+d.text,d.offset+=h,((b,p,v)=>{let _;const C=v.charAt(0);for(_=p-1;_>=0;_--){const E=b.charAt(_);if(hw(E))return w.none();if(C===E&&se(b,v,_,p))break}return w.some(_)})(d.text,d.offset,a).getOr(h)),u).bind(f=>{const h=i.cloneRange();if(h.setStart(f.container,f.offset),h.setEnd(i.endContainer,i.endOffset),h.collapsed)return w.none();const g=pw(h);return 0!==g.lastIndexOf(a)||Ig(g,a).length<l?w.none():w.some({text:Ig(g,a),range:h,trigger:a})})})(t,e,n,o),s=>{const i=t.createRng();i.selectNode(s.dom);const a=pw(i);return w.some({range:i,text:Ig(a,n),trigger:n})});var r},vw=t=>{if(3===t.nodeType)return jo(t,t.data.length);{const e=t.childNodes;return e.length>0?vw(e[e.length-1]):jo(t,e.length)}},yw=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?yw(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?vw(n[n.length-1]):jo(t,e)},_w=(t,e,n,o={})=>{var r;const s=e(),i=null!==(r=t.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",a=Et(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>{return d=t.dom,u=>{const f=yw(u.startContainer,u.startOffset);return!((h,g)=>{var b;const p=null!==(b=h.getParent(g.container,h.isBlock))&&void 0!==b?b:h.getRoot();return Mg(h,g.container,g.offset,(v,_)=>0===_?-1:_,p).filter(v=>{const _=v.container.data.charAt(v.offset-1);return!hw(_)}).isSome()})(d,f)};var d})(n.range,i,n.text));if(0===a.length)return w.none();const l=Promise.all(jt(a,c=>c.fetch(n.text,c.maxResults,o).then(d=>({matchText:n.text,items:d,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return w.some({lookupData:l,context:n})};var ur;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(ur||(ur={}));const Fg=(t,e,n)=>t.stype===ur.Error?e(t.serror):n(t.svalue),_a=t=>({stype:ur.Value,svalue:t}),tc=t=>({stype:ur.Error,serror:t}),DO=Fg,jg=t=>Ae(t)&&an(t).length>100?" removed due to size":JSON.stringify(t,null,2),Zd=(t,e)=>tc([{path:t,getErrorInfo:e}]),Cw=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<e.length;o++){const r=e[o];for(const s in r)Ot(r,s)&&(n[s]=t(n[s],r[s]))}return n},zg=Cw((t,e)=>yn(t)&&yn(e)?zg(t,e):e),ww=(Cw((t,e)=>e),t=>({tag:"defaultedThunk",process:ot(t)})),xw=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Ug=t=>({extract:(e,n)=>{return(o=t(n)).stype===ur.Error?Zd(e,ot(o.serror)):o;var o},toString:ot("val")}),PO=Ug(_a),Ew=(t,e,n,o)=>o(Zt(t,e).getOrThunk(()=>n(t))),MO=(t,e,n,o,r)=>{const s=a=>r.extract(e.concat([o]),a),i=a=>a.fold(()=>_a(w.none()),l=>{return(d=r.extract(e.concat([o]),l)).stype===ur.Value?{stype:ur.Value,svalue:(0,w.some)(d.svalue)}:d;var d});switch(t.tag){case"required":return a=e,d=s,Zt(l=n,c=o).fold(()=>{return f=c,h=l,Zd(a,()=>'Could not find valid *required* value for "'+f+'" in '+jg(h));var f,h},d);case"defaultedThunk":return Ew(n,o,t.process,s);case"option":return((a,l,c)=>c(Zt(a,l)))(n,o,i);case"defaultedOptionThunk":return((a,l,c,d)=>d(Zt(a,l).map(u=>!0===u?c(a):u)))(n,o,t.process,i);case"mergeWithThunk":return Ew(n,o,ot({}),a=>{const l=zg(t.process(n),a);return s(l)})}var a,l,c,d},Hg=t=>({extract:(e,n)=>((o,r,s)=>{const i={},a=[];for(const l of s)xw(l,(c,d,u,f)=>{const h=MO(u,o,r,c,f);DO(h,g=>{a.push(...g)},g=>{i[d]=g})},(c,d)=>{i[c]=d(r)});return a.length>0?tc(a):_a(i)})(e,n,t),toString:()=>"obj{\n"+jt(t,n=>xw(n,(o,r,s,i)=>o+" -> "+i.toString(),(o,r)=>"state("+o+")")).join("\n")+"}"}),kw=t=>({extract:(e,n)=>(t=>{const e=(o=>{const r=[],s=[];return X(o,i=>{Fg(i,a=>s.push(a),a=>r.push(a))}),{values:r,errors:s}})(t);return e.errors.length>0?(n=e.errors,hr(tc,Si)(n)):_a(e.values);var n})(jt(n,(r,s)=>t.extract(e.concat(["["+s+"]"]),r))),toString:()=>"array("+t.toString()+")"}),Sw=(t,e)=>((t,e)=>({extract:(n,o)=>Zt(o,t).fold(()=>{return s=t,Zd(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},r=>{return s=n,i=o,Zt(a=e,l=r).fold(()=>{return d=a,u=l,Zd(s,()=>'The chosen schema: "'+u+'" did not exist in branches: '+jg(d));var d,u},c=>c.extract(s.concat(["branch: "+l]),i));var s,i,a,l}),toString:()=>"chooseOn("+t+"). Possible values: "+an(e)}))(t,Ke(e,Hg)),FO=ot(PO),tu=(t,e)=>Ug(n=>{const o=typeof n;return t(n)?_a(n):tc(`Expected type: ${e} but got: ${o}`)}),jO=tu(_n,"number"),eu=tu(bt,"string"),zO=tu(qo,"boolean"),$g=tu(Vt,"function"),ec=(t,e,n,o)=>({tag:"field",key:t,newKey:e,presence:n,prop:o}),Nw=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),Aw=(t,e)=>ec(t,t,{tag:"required",process:{}},e),Ow=t=>Aw(t,eu),Tw=t=>Aw(t,$g),qg=(t,e)=>ec(t,t,{tag:"option",process:{}},e),nu=t=>qg(t,eu),Ca=(t,e,n)=>ec(t,t,ww(e),n),Rw=(t,e)=>Ca(t,e,jO),Dw=(t,e,n)=>{return Ca(t,e,(o=n,r=s=>ut(o,s)?mn.value(s):mn.error(`Unsupported value: "${s}", choose one of "${o.join(", ")}".`),Ug(s=>r(s).fold(tc,_a))));var o,r},Vg=(t,e)=>Ca(t,e,zO),Wg=(t,e)=>Ca(t,e,$g),UO=Ow("type"),HO=Tw("fetch"),Kg=Tw("onAction"),$O=Wg("onSetup",()=>Bt),qO=nu("text"),VO=nu("icon"),WO=nu("tooltip"),KO=nu("label"),YO=Vg("active",!1),XO=Vg("enabled",!0),Bw=Vg("primary",!1),nc=t=>Ca("type",t,eu),GO=Hg([UO,Ow("trigger"),Rw("minChars",1),((t,e)=>ec(t,t,ww(1),FO()))("columns"),Rw("maxResults",10),qg("matches",$g),HO,Kg,(Lw=eu,Ca("highlightOn",[],kw(Lw)))]);var Lw;const Yg=[XO,WO,VO,qO,$O],Pw=[YO].concat(Yg),QO=[Wg("predicate",ne),Dw("scope","node",["node","editor"]),Dw("position","selection",["node","selection","line"])],JO=Yg.concat([nc("contextformbutton"),Bw,Kg,Nw("original",He)]),ZO=Pw.concat([nc("contextformbutton"),Bw,Kg,Nw("original",He)]),tT=Yg.concat([nc("contextformbutton")]),eT=Pw.concat([nc("contextformtogglebutton")]),nT=Sw("type",{contextformbutton:JO,contextformtogglebutton:ZO});Hg([nc("contextform"),Wg("initValue",ot("")),KO,((t,e)=>ec(t,t,{tag:"required",process:{}},kw(e)))("commands",nT),qg("launch",Sw("type",{contextformbutton:tT,contextformtogglebutton:eT}))].concat(QO));const rT=t=>{const e=is(),n=Re(!1),o=e.isSet,r=()=>{o()&&(ye(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=Xo(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Ke(e,s=>{return(i=s,((t,e,n)=>{return o=(a=e.extract([t],i=n)).stype===ur.Error?{stype:ur.Error,serror:(a=>({input:i,errors:a}))(a.serror)}:a,Fg(o,mn.error,mn.value);var i,a,o})("Autocompleter",GO,{trigger:i.ch,...i})).fold(a=>{throw new Error("Errors: \n"+(c=>{const d=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:ot("... (only showing first ten failures)")}]):c;return jt(d,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=a).errors).join("\n")+"\n\nInput object: "+jg(l.input));var l},He);var i}),o=Pa(wo(n,s=>s.trigger)),r=Ko(n);return{dataset:n,triggers:o,lookupByTrigger:s=>Et(r,i=>i.trigger===s)}})(t)),i=a=>{var l;(l=a,e.get().map(c=>bw(t.dom,t.selection.getRng(),c.trigger).bind(d=>_w(t,s,d,l))).getOrThunk(()=>((c,d)=>{const u=d(),f=c.selection.getRng();return(h=c.dom,g=f,b=u,$r(b.triggers,p=>bw(h,g,p))).bind(h=>_w(c,d,h));var h,g,b})(t,s))).fold(r,l=>{var c,u;c=l.context,o()||(u=c.range,ye(t).autocompleter.addDecoration(u),e.set({trigger:c.trigger,matchLength:c.text.length})),l.lookupData.then(c=>{e.get().map(d=>{const u=l.context;d.trigger===u.trigger&&(u.text.length-d.matchLength>=10?r():(e.set({...d,matchLength:u.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:c}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:c}))))})})})};t.addCommand("mceAutocompleterReload",(a,l)=>{const c=Ae(l)?l.fetchOptions:{};i(c)}),t.addCommand("mceAutocompleterClose",r),((a,l)=>{const c=nm(l.load,50);a.on("keypress compositionend",d=>{27!==d.which&&c.throttle()}),a.on("keydown",d=>{const u=d.which;8===u?c.throttle():27===u&&l.cancelIfNecessary()}),a.on("remove",c.cancel)})(t,{cancelIfNecessary:r,load:i})},Mw=t=>(e,n,o={})=>{const r=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:Bt,inputType:n},i=Xp(new InputEvent(t));return e.dispatch(t,{...i,...s,...o})},ou=Mw("input"),ru=Mw("beforeinput"),wa=(t,e)=>{const n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(i=>{for(;i;){if(A(i)||U(i)&&i.data&&/[\r\n\s]/.test(i.data))return i;i=i.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(Qt),e.firstChild)}const r=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new y(e,e);let i,a=e;for(;i=s.current();){if(U(i)){r.setStart(i,0),r.setEnd(i,0);break}if(o[i.nodeName.toLowerCase()]){r.setStartBefore(i),r.setEndBefore(i);break}a=i,i=s.next()}i||(r.setStart(a,0),r.setEnd(a,0))}else Dt(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));t.selection.setRng(r),Pl(t,r)},su=(t,e)=>{const n=t.getRoot();let o,r=e;for(;r!==n&&r&&"false"!==t.getContentEditable(r);)"true"===t.getContentEditable(r)&&(o=r),r=r.parentNode;return r!==n?o:n},Xg=t=>w.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Iw=(t,e)=>{const n=t?.parentNode;return et(n)&&n.nodeName===e},Fw=t=>et(t)&&/^(OL|UL|LI)$/.test(t.nodeName),iu=t=>{const e=t.parentNode;return et(n=e)&&/^(LI|DT|DD)$/.test(n.nodeName)?e:t;var n},au=(t,e,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!A(o);)o=o[n?"nextSibling":"previousSibling"];return o===e},sT=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Gg=t=>{t.innerHTML='<br data-mce-bogus="1">'},Qg=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Jg=(t,e)=>et(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),Zg=(t,e,n)=>U(e)?t?1===n&&e.data.charAt(n-1)===Te?0:n:n===e.data.length-1&&e.data.charAt(n)===Te?e.data.length:n:n,oc=(t,e)=>{fn(t).toLowerCase()===e.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;w.from(r.style).map(s.parseStyle).each(d=>{const u={...Mc(T(o)),...d};s.setStyles(o,u)});const i=w.from(r.class).map(d=>d.split(/\s+/)),a=w.from(o.className).map(d=>Et(d.split(/\s+/),u=>""!==u));je(i,a,(d,u)=>{const f=Et(u,g=>!ut(d,g)),h=[...d,...f];s.setAttrib(o,"class",h.join(" "))});const l=["style","class"],c=lo(r,(d,u)=>!ut(l,u));s.setAttribs(o,c)})(t,e,Cl(t))},jw={insert:(t,e)=>{let n,o,r,s,i=!1;const a=t.dom,l=t.schema,c=l.getNonEmptyElements(),d=t.selection.getRng(),u=fn(t),f=d.collapsed&&d.startContainer===t.dom.getRoot(),h=T(d.startContainer),g=kr(h,d.startOffset),b=g.exists(R=>Ls(R)&&!Oo(R)),p=f&&b,v=R=>{let P=n;const B=l.getTextInlineElements();let I;I=R||"TABLE"===r||"HR"===r?a.create(R||u):O.cloneNode(!1);let tt=I;if(!1===qE(t))a.setAttrib(I,"style",null),a.setAttrib(I,"class",null);else do{if(B[P.nodeName]){if(_o(P)||Zn(P))continue;const G=P.cloneNode(!1);a.setAttrib(G,"id",""),I.hasChildNodes()?(G.appendChild(I.firstChild),I.appendChild(G)):(tt=G,I.appendChild(G))}}while((P=P.parentNode)&&P!==N);return oc(t,I),Gg(tt),I},_=R=>{const P=Zg(R,n,o);if(U(n)&&(R?P>0:P<n.data.length))return!1;if(n.parentNode===O&&i&&!R||R&&A(n)&&n===O.firstChild)return!0;if(Qg(n,"TABLE")||Qg(n,"HR"))return i&&!R||!i&&R;const B=new y(n,O);let I;for(U(n)&&(R&&0===P?B.prev():R||P!==n.data.length||B.next());I=B.current();){if(A(I)){if(!I.getAttribute("data-mce-bogus")){const tt=I.nodeName.toLowerCase();if(c[tt]&&"br"!==tt)return!1}}else if(U(I)&&!Ws(I.data))return!1;R?B.prev():B.next()}return!0},C=()=>{let R;return R=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==M?v(u):v(),((P,B)=>{const I=VE(P);return!ve(B)&&(bt(I)?ut(Q.explode(I),B.nodeName.toLowerCase()):I)})(t,s)&&Jg(a,s)&&a.isEmpty(O,void 0,{includeZwsp:!0})?R=a.split(s,O):a.insertAfter(R,O),wa(t,R),R};bd(a,d).each(R=>{d.setStart(R.startContainer,R.startOffset),d.setEnd(R.endContainer,R.endOffset)}),n=d.startContainer,o=d.startOffset;const E=!(!e||!e.shiftKey),k=!(!e||!e.ctrlKey);A(n)&&n.hasChildNodes()&&!p&&(i=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=i&&U(n)?n.data.length:0);const N=su(a,n);if(!N||((R,P)=>{const B=R.dom.getParent(P,"ol,ul,dl");return null!==B&&"false"===R.dom.getContentEditableParent(B)})(t,n))return;E||(n=((R,P,B,I,tt)=>{var G,ht;const rt=R.dom,kt=null!==(G=su(rt,I))&&void 0!==G?G:rt.getRoot();let Nt=rt.getParent(I,rt.isBlock);if(!Nt||!Jg(rt,Nt)){if(Nt=Nt||kt,!Nt.hasChildNodes()){const D=rt.create(P);return oc(R,D),Nt.appendChild(D),B.setStart(D,0),B.setEnd(D,0),D}let it,gt=I;for(;gt&&gt.parentNode!==Nt;)gt=gt.parentNode;for(;gt&&!rt.isBlock(gt);)it=gt,gt=gt.previousSibling;const _t=null===(ht=it?.parentElement)||void 0===ht?void 0:ht.nodeName;if(it&&_t&&R.schema.isValidChild(_t,P.toLowerCase())){const D=it.parentNode,L=rt.create(P);for(oc(R,L),D.insertBefore(L,it),gt=it;gt&&!rt.isBlock(gt);){const q=gt.nextSibling;L.appendChild(gt),gt=q}B.setStart(I,tt),B.setEnd(I,tt)}}return I})(t,u,d,n,o));let O=a.getParent(n,a.isBlock)||a.getRoot();s=et(O?.parentNode)?a.getParent(O.parentNode,a.isBlock):null,r=O?O.nodeName.toUpperCase():"";const M=s?s.nodeName.toUpperCase():"";if("LI"!==M||k||(O=s,s=s.parentNode,r=M),A(s)&&(R=t,B=O,!E&&B.nodeName.toLowerCase()===fn(R)&&R.dom.isEmpty(B)&&((I,tt,G)=>{let ht=tt;for(;ht&&ht!==I&&le(ht.nextSibling);){const kt=ht.parentElement;if(!kt||(rt=kt,!Ot(R.schema.getTextBlockElements(),rt.nodeName.toLowerCase())))return Fn(kt);ht=kt}var rt;return!1})(R.getBody(),B)))return((R,P,B)=>{var I,tt,G;const ht=P(fn(R)),rt=R.dom.getParent(B,Fn);rt&&(R.dom.insertAfter(ht,rt),wa(R,ht),(null!==(G=null===(tt=null===(I=B.parentElement)||void 0===I?void 0:I.childNodes)||void 0===tt?void 0:tt.length)&&void 0!==G?G:0)>1&&R.dom.remove(B))})(t,v,O);var R,B;if(/^(LI|DT|DD)$/.test(r)&&A(s)&&a.isEmpty(O))return void((R,P,B,I,tt)=>{const G=R.dom,ht=R.selection.getRng(),rt=B.parentNode;if(B===R.getBody()||!rt)return;var kt;Fw(kt=B)&&Fw(kt.parentNode)&&(tt="LI");let Nt=P(tt);if(au(B,I,!0)&&au(B,I,!1))if(Iw(B,"LI")){const it=iu(B);G.insertAfter(Nt,it),(null===(_t=(gt=B).parentNode)||void 0===_t?void 0:_t.firstChild)===gt?G.remove(it):G.remove(B)}else G.replace(Nt,B);else if(au(B,I,!0))Iw(B,"LI")?(G.insertAfter(Nt,iu(B)),Nt.appendChild(G.doc.createTextNode(" ")),Nt.appendChild(B)):rt.insertBefore(Nt,B),G.remove(I);else if(au(B,I,!1))G.insertAfter(Nt,iu(B)),G.remove(I);else{B=iu(B);const it=ht.cloneRange();it.setStartAfter(I),it.setEndAfter(B);const gt=it.extractContents();"LI"===tt&&((_t,D)=>_t.firstChild&&"LI"===_t.firstChild.nodeName)(gt)?(Nt=gt.firstChild,G.insertAfter(gt,B)):(G.insertAfter(gt,B),G.insertAfter(Nt,B)),G.remove(I)}var gt,_t;wa(R,Nt)})(t,v,s,O,u);if(!(p||O!==t.getBody()&&Jg(a,O)))return;const $=O.parentNode;let z;if(p)z=v(u),g.fold(()=>{fe(h,T(z))},R=>{qe(R,T(z))}),t.selection.setCursorLocation(z,0);else if(Dr(O))z=il(O),a.isEmpty(O)&&Gg(O),oc(t,z),wa(t,z);else if(_(!1))z=C();else if(_(!0)&&$){z=$.insertBefore(v(),O);const R=T(d.startContainer).dom.hasChildNodes()&&d.collapsed;wa(t,Qg(O,"HR")||R?z:O)}else{const R=(B=>{const I=B.cloneRange();return I.setStart(B.startContainer,Zg(!0,B.startContainer,B.startOffset)),I.setEnd(B.endContainer,Zg(!1,B.endContainer,B.endOffset)),I})(d).cloneRange();R.setEndAfter(O);const P=R.extractContents();(B=>{X(ns(T(B),cn),I=>{const tt=I.dom;tt.nodeValue=Ro(tt.data)})})(P),(B=>{let I=B;do{U(I)&&(I.data=I.data.replace(/^[\r\n]+/,"")),I=I.firstChild}while(I)})(P),z=P.firstChild,a.insertAfter(P,O),((B,I,tt)=>{var G;const ht=[];if(!tt)return;let rt=tt;for(;rt=rt.firstChild;){if(B.isBlock(rt))return;A(rt)&&!I[rt.nodeName.toLowerCase()]&&ht.push(rt)}let kt=ht.length;for(;kt--;)rt=ht[kt],(!rt.hasChildNodes()||rt.firstChild===rt.lastChild&&""===(null===(G=rt.firstChild)||void 0===G?void 0:G.nodeValue)||sT(B,rt))&&B.remove(rt)})(a,c,z),((B,I)=>{I.normalize();const tt=I.lastChild;(!tt||A(tt)&&/^(left|right)$/gi.test(B.getStyle(tt,"float",!0)))&&B.add(I,"br")})(a,O),a.isEmpty(O)&&Gg(O),z.normalize(),a.isEmpty(z)?(a.remove(z),C()):(oc(t,z),wa(t,z))}a.setAttrib(z,"id",""),t.dispatch("NewBlock",{newBlock:z})},fakeEventName:"insertParagraph"},zw=(t,e,n)=>{const o=t.dom.createRng();n?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),t.selection.setRng(o),Pl(t,o)},iT=(t,e)=>{const n=Ee("br");qe(T(e),n),t.undoManager.add()},aT=(t,e)=>{lT(t.getBody(),e)||To(T(e),Ee("br"));const n=Ee("br");To(T(e),n),zw(t,n.dom,!1),t.undoManager.add()},lT=(t,e)=>{return n=H.after(e),!!Dt(n.getNode())||on(t,H.after(e)).map(o=>Dt(o.getNode())).getOr(!1);var n},Uw=t=>t&&"A"===t.nodeName&&"href"in t,cT=t=>t.fold(ne,Uw,Uw,ne),dT=(t,e)=>{e.fold(Bt,dt(iT,t),dt(aT,t),Bt)},Hw={insert:(t,e)=>{const n=(o=>{const r=dt(di,o),s=H.fromRangeStart(o.selection.getRng());return cr(r,o.getBody(),s).filter(cT)})(t);n.isSome()?n.each(dt(dT,t)):((o,r)=>{const i=o.dom,a=o.selection.getRng();let l,c=!1;bd(i,a).each(p=>{a.setStart(p.startContainer,p.startOffset),a.setEnd(p.endContainer,p.endOffset)});let d=a.startOffset,u=a.startContainer;if(A(u)&&u.hasChildNodes()){const p=d>u.childNodes.length-1;u=u.childNodes[Math.min(d,u.childNodes.length-1)]||u,d=p&&U(u)?u.data.length:0}let f=i.getParent(u,i.isBlock);const h=f&&f.parentNode?i.getParent(f.parentNode,i.isBlock):null;"LI"!==(h?h.nodeName.toUpperCase():"")||!(!r||!r.ctrlKey)||(f=h),U(u)&&d>=u.data.length&&(((p,v,_)=>{const C=new y(v,_);let E;const k=p.getNonEmptyElements();for(;E=C.next();)if(k[E.nodeName.toLowerCase()]||U(E)&&E.length>0)return!0;return!1})(o.schema,u,f||i.getRoot())||(l=i.create("br"),a.insertNode(l),a.setStartAfter(l),a.setEndAfter(l),c=!0)),l=i.create("br"),am(i,a,l),zw(o,l,c),o.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},$w=(t,e)=>Xg(t).filter(n=>e.length>0&&In(T(n),e)).isSome(),zn=er([{br:[]},{block:[]},{none:[]}]),uT=(t,e)=>{return $w(n=t,$E(n));var n},qw=t=>(e,n)=>Xg(e).filter(r=>os(T(r))).isSome()===t,Vw=(t,e)=>(n,o)=>Xg(n).fold(ot(""),i=>i.nodeName.toUpperCase())===t.toUpperCase()===e,mT=t=>{const e=su(t.dom,t.selection.getStart());return ve(e)},rc=t=>Vw("pre",t),lu=t=>(e,n)=>zE(e)===t,fT=(t,e)=>{return $w(n=t,HE(n));var n},cu=(t,e)=>e,gT=t=>{const e=fn(t),n=su(t.dom,t.selection.getStart());return et(n)&&t.schema.isValidChild(n.nodeName,e)},pT=t=>{const e=t.selection.getRng(),n=e.collapsed&&e.startContainer===t.dom.getRoot(),o=T(e.startContainer),r=kr(o,e.startOffset).map(s=>Ls(s)&&!Oo(s));return n&&r.getOr(!0)},so=(t,e)=>(n,o)=>Me(t,(r,s)=>r&&s(n,o),!0)?w.some(e):w.none(),du=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),et(n)&&ru(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),et(n)&&ou(e,t.fakeEventName))},Ww=(t,e)=>{const n=()=>du(Hw,t,e),o=()=>du(jw,t,e),r=(s=t,i=e,Z_([so([uT],zn.none()),so([rc(!0),mT],zn.none()),so([Vw("summary",!0)],zn.br()),so([rc(!0),lu(!1),cu],zn.br()),so([rc(!0),lu(!1)],zn.block()),so([rc(!0),lu(!0),cu],zn.block()),so([rc(!0),lu(!0)],zn.br()),so([qw(!0),cu],zn.br()),so([qw(!0)],zn.block()),so([fT],zn.br()),so([cu],zn.br()),so([gT],zn.block()),so([pT],zn.block())],[s,!(!i||!i.shiftKey)]).getOr(zn.none()));var s,i;switch(UE(t)){case"linebreak":r.fold(n,n,Bt);break;case"block":r.fold(o,o,Bt);break;case"invert":r.fold(o,n,Bt);break;default:r.fold(n,o,Bt)}},Kw=Ln(),hT=Kw.os.isiOS()&&Kw.browser.isSafari(),Yw=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{Ww(t,e)}))},bT=Ln(),Xw=t=>t.stopImmediatePropagation(),Gw=t=>t.keyCode===ct.PAGE_UP||t.keyCode===ct.PAGE_DOWN,Qw=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",Xw,!0):!n&&t.get()&&e.off("NodeChange",Xw),t.set(n)},Jw=(t,e)=>{const n=e.container(),o=e.offset();return U(n)?(n.insertData(o,t),w.some(H(n,o+t.length))):rd(e).map(r=>{const s=Er(t);return e.isAtEnd()?To(r,s):qe(r,s),H(s.dom,t.length)})},Zw=dt(Jw,Qt),t1=dt(Jw," "),e1=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},vT=t=>{const e=H.fromRangeStart(t.selection.getRng()),n=T(t.getBody());if(t.selection.isCollapsed()){const o=dt(di,t),r=H.fromRangeStart(t.selection.getRng());return cr(o,t.getBody(),r).bind((s=n,i=>i.fold(a=>gn(s.dom,H.before(a)),a=>rn(a),a=>yo(a),a=>on(s.dom,H.after(a))))).map(s=>()=>{return(i=n,a=e,l=>i0(i,l)?Zw(a):t1(a))(s).each(e1(t));var i,a})}var s;return w.none()},yT=t=>{return wr(zt.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const o=T(t.getBody());var r,s;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(r=o,s=H.fromRangeStart(t.selection.getRng()),i0(r,s)?Zw(s):t1(s)).each(e1(t))});var e,n},_T=t=>Qk(t)?[{keyCode:ct.TAB,action:Tt(fw,t,!0)},{keyCode:ct.TAB,shiftKey:!0,action:Tt(fw,t,!1)}]:[],CT=t=>{if(t.addShortcut("Meta+P","","mcePrint"),rT(t),lr(t))return Re(null);{const e=(t=>{const e=Re(null),n=dt(di,t);return t.on("NodeChange",o=>{wl(t)&&(((r,s,i)=>{const a=jt(x(T(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),l=Et(a,r),c=Et(i,r);X(Ni(l,c),dt(yC,!1)),X(Ni(c,l),dt(yC,!0))})(n,t.dom,o.parents),((r,s)=>{const i=s.get();if(r.selection.isCollapsed()&&!r.composing&&i){const a=H.fromRangeStart(r.selection.getRng());H.isTextPosition(a)&&!Gi(l=a)&&!Qi(l)&&(Yd(r,((t,e)=>{return H.isTextPosition(e)?(o=e,eb(n=t)&&o.container()===n?((r,s)=>{const i=ob(r.data.substr(0,s.offset())),a=ob(r.data.substr(s.offset()));return(i.text+a.text).length>0?(rb(r),H(r,s.offset()-i.count)):s})(n,o):sb(n,o)):((n,o)=>o.container()===n.parentNode?((r,s)=>{const i=s.container(),a=((l,c)=>{const d=ki(l,c);return-1===d?w.none():w.some(d)})(Fe(i.childNodes),r).map(l=>l<s.offset()?H(i,s.offset()-1):s).getOr(s);return ei(r),a})(n,o):sb(n,o))(t,e);var n,o})(i,a)),s.set(null))}var l})(t,e),((r,s,i,a)=>{if(s.selection.isCollapsed()){const l=Et(a,r);X(l,c=>{const d=H.fromRangeStart(s.selection.getRng());cr(r,s.getBody(),d).bind(u=>_C(s,i,u))})}})(n,t,e,o.parents))}),e})(t);return(n=t).on("keyup compositionstart",dt(wO,n)),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,i,a)=>{const l=zt.os.isMacOS()||zt.os.isiOS();Jl([{keyCode:ct.RIGHT,action:Tt(VC,s,!0)},{keyCode:ct.LEFT,action:Tt(VC,s,!1)},{keyCode:ct.UP,action:Tt(WC,s,!1)},{keyCode:ct.DOWN,action:Tt(WC,s,!0)},...l?[{keyCode:ct.UP,action:Tt(Gd,s,!1),metaKey:!0,shiftKey:!0},{keyCode:ct.DOWN,action:Tt(Gd,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ct.RIGHT,action:Tt(cw,s,!0)},{keyCode:ct.LEFT,action:Tt(cw,s,!1)},{keyCode:ct.UP,action:Tt(dw,s,!1)},{keyCode:ct.DOWN,action:Tt(dw,s,!0)},{keyCode:ct.RIGHT,action:Tt(JC,s,!0)},{keyCode:ct.LEFT,action:Tt(JC,s,!1)},{keyCode:ct.UP,action:Tt(ZC,s,!1)},{keyCode:ct.DOWN,action:Tt(ZC,s,!0)},{keyCode:ct.RIGHT,action:Tt(CC,s,i,!0)},{keyCode:ct.LEFT,action:Tt(CC,s,i,!1)},{keyCode:ct.RIGHT,ctrlKey:!l,altKey:l,action:Tt(uO,s,i)},{keyCode:ct.LEFT,ctrlKey:!l,altKey:l,action:Tt(mO,s,i)},{keyCode:ct.UP,action:Tt(YC,s,!1)},{keyCode:ct.DOWN,action:Tt(YC,s,!0)}],a).each(c=>{a.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{let r=!1;n.on("keydown",s=>{r=s.keyCode===ct.BACKSPACE,s.isDefaultPrevented()||((i,a,l)=>{const c=l.keyCode===ct.BACKSPACE?"deleteContentBackward":"deleteContentForward";QC([{keyCode:ct.BACKSPACE,action:Tt(MC,i)},{keyCode:ct.BACKSPACE,action:Tt(vg,i,!1)},{keyCode:ct.DELETE,action:Tt(vg,i,!0)},{keyCode:ct.BACKSPACE,action:Tt(pg,i,!1)},{keyCode:ct.DELETE,action:Tt(pg,i,!0)},{keyCode:ct.BACKSPACE,action:Tt(Ng,i,a,!1)},{keyCode:ct.DELETE,action:Tt(Ng,i,a,!0)},{keyCode:ct.BACKSPACE,action:Tt(xf,i,!1)},{keyCode:ct.DELETE,action:Tt(xf,i,!0)},{keyCode:ct.BACKSPACE,action:Tt(yg,i,!1)},{keyCode:ct.DELETE,action:Tt(yg,i,!0)},{keyCode:ct.BACKSPACE,action:Tt(Tg,i,!1)},{keyCode:ct.DELETE,action:Tt(Tg,i,!0)},{keyCode:ct.BACKSPACE,action:Tt(fg,i,!1)},{keyCode:ct.DELETE,action:Tt(fg,i,!0)},{keyCode:ct.BACKSPACE,action:Tt(mg,i,!1)},{keyCode:ct.DELETE,action:Tt(mg,i,!0)},{keyCode:ct.BACKSPACE,action:Tt(Ag,i,!1)},{keyCode:ct.DELETE,action:Tt(Ag,i,!0)}],l).filter(d=>i.selection.isEditable()).each(d=>{l.preventDefault(),ru(i,c).isDefaultPrevented()||(d(),ou(i,c))})})(n,o,s)}),n.on("keyup",s=>{s.isDefaultPrevented()||((i,a,l)=>{const c=Ln(),d=c.os,u=c.browser,f=d.isMacOS()?[{keyCode:ct.BACKSPACE,altKey:!0,action:Tt(Ql,i)},{keyCode:ct.DELETE,altKey:!0,action:Tt(Ql,i)}]:[{keyCode:ct.BACKSPACE,ctrlKey:!0,action:Tt(Ql,i)},{keyCode:ct.DELETE,ctrlKey:!0,action:Tt(Ql,i)}];d.isMacOS()&&l&&f.push({keyCode:u.isFirefox()?224:91,action:Tt(Ql,i)}),Jl([{keyCode:ct.BACKSPACE,action:Tt(K_,i)},{keyCode:ct.DELETE,action:Tt(K_,i)},...f],a)})(n,s,r),r=!1})})(t,e),(n=>{let o=w.none();n.on("keydown",r=>{var s;r.keyCode===ct.ENTER&&(hT&&(s=>{if(!s.collapsed)return!1;const i=s.startContainer;if(U(i)){const a=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=i.data.charAt(s.startOffset-1);return a.test(l)}return!1})(n.selection.getRng())?(o=w.some((s=n).selection.getBookmark()),s.undoManager.add()):Yw(n,r))}),n.on("keyup",r=>{r.keyCode===ct.ENTER&&o.each(()=>{return i=r,(s=n).undoManager.undo(),o.fold(Bt,a=>s.selection.moveToBookmark(a)),Yw(s,i),void(o=w.none());var s,i})})})(t),(n=>{n.on("keydown",o=>{var r,s;o.isDefaultPrevented()||(s=o,QC([{keyCode:ct.SPACEBAR,action:Tt(vT,r=n)},{keyCode:ct.SPACEBAR,action:Tt(yT,r)}],s).each(i=>{s.preventDefault(),ru(r,"insertText",{data:" "}).isDefaultPrevented()||(i(),ou(r,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=T(r.getBody());r.selection.isCollapsed()&&((t,e)=>{const n=e.container();if(!U(n))return w.none();if((o=>{const r=o.container();return U(r)&&se(r.data,Qt)})(e)){const o=c0(t,n,!1)||(r=>{const s=r.data,i=(a=>{const l=a.split("");return jt(l,(c,d)=>ld(c)&&d>0&&d<l.length-1&&km(l[d-1])&&km(l[d+1])?" ":c).join("")})(s);return i!==s&&(r.data=i,!0)})(n)||d0(t,n,!1);return wr(o,e)}if(uf(t,e)){const o=c0(t,n,!0)||d0(t,n,!0);return wr(o,e)}return w.none()})(s,H.fromRangeStart(r.selection.getRng())).each(i=>{r.selection.setRng(i.toRange())})})(n)})})(t),(n=>{n.on("keydown",o=>{var s;o.isDefaultPrevented()||(s=o,Jl([..._T(n)],s).each(i=>{s.preventDefault()}))})})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,i,a)=>{const l=zt.os.isMacOS()||zt.os.isiOS();Jl([{keyCode:ct.END,action:Tt(KC,s,!0)},{keyCode:ct.HOME,action:Tt(KC,s,!1)},...l?[]:[{keyCode:ct.HOME,action:Tt(Gd,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ct.END,action:Tt(Gd,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ct.END,action:Tt(tw,s,!0)},{keyCode:ct.HOME,action:Tt(tw,s,!1)},{keyCode:ct.END,action:Tt(Xd,s,!0,i)},{keyCode:ct.HOME,action:Tt(Xd,s,!1,i)}],a).each(c=>{a.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{if(bT.os.isMacOS())return;const r=Re(!1);n.on("keydown",s=>{Gw(s)&&Qw(r,n,!0)}),n.on("keyup",s=>{var i,a,l;s.isDefaultPrevented()||(l=s,Jl([{keyCode:ct.PAGE_UP,action:Tt(Xd,i=n,!1,a=o)},{keyCode:ct.PAGE_DOWN,action:Tt(Xd,i,!0,a)}],l)),Gw(s)&&r.get()&&(Qw(r,n,!1),n.nodeChanged())})})(t,e),e}var n};class wT{constructor(e){let n;this.lastPath=[],this.editor=e;const o=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{const s=e.selection.getRng(),i={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==r.type&&$m(i,n)||e.dispatch("SelectionChange"),n=i}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const r=e.selection.getStart(!0);r&&dd(e)&&!o.isSameElementPath(r)&&e.dom.isChildOf(r,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",r=>{!r.isDefaultPrevented()&&dd(e)&&("IMG"===e.selection.getNode().nodeName?eo.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let o;if(this.editor.initialized&&n&&!_k(this.editor)&&!this.editor.mode.isReadOnly()){const r=this.editor.getBody();o=n.getStart(!0)||r,o.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(o,r)||(o=r);const s=[];this.editor.dom.getParent(o,i=>i===r||(s.push(i),!1)),this.editor.dispatch("NodeChange",{...e,element:o,parents:s})}}isSameElementPath(e){let n;const o=this.editor,r=Es(o.dom.getParents(e,ge,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const n1=hl("image"),tp=hl("event"),uu=t=>e=>{e[tp]=t},o1=uu(0),xT=uu(2),ET=uu(1),ep=hl("mode"),mu=t=>e=>{e[ep]=t},r1=(t,e)=>mu(e)(t),s1=mu(0),np=mu(2),ST=mu(1),i1=t=>e=>w.from(e[ep]).exists(o=>o===t),xa=i1(0),a1=i1(1),NT=["none","copy","link","move"],AT=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],op=()=>{const t=new window.DataTransfer;let e="move",n="all";const o={get dropEffect(){return e},set dropEffect(r){ut(NT,r)&&(e=r)},get effectAllowed(){return n},set effectAllowed(r){(t=>w.from(t[tp]).exists(n=>0===n))(o)&&ut(AT,r)&&(n=r)},get items(){return r=o,s=t.items,{...s,get length(){return s.length},add:(i,a)=>{if(xa(r)){if(!bt(i))return s.add(i);if(!we(a))return s.add(i,a)}return null},remove:i=>{xa(r)&&s.remove(i)},clear:()=>{xa(r)&&s.clear()}};var r,s},get files(){return a1(o)?Object.freeze({length:0,item:r=>null}):t.files},get types(){return t.types},setDragImage:(r,s,i)=>{xa(o)&&(o[n1]={image:r,x:s,y:i},t.setDragImage(r,s,i))},getData:r=>a1(o)?"":t.getData(r),setData:(r,s)=>{xa(o)&&t.setData(r,s)},clearData:r=>{xa(o)&&t.clearData(r)}};return s1(o),o},l1=(t,e)=>t.setData("text/html",e),c1="x-tinymce/html",fu=ot(c1),rp="\x3c!-- "+c1+" --\x3e",OT=t=>rp+t,d1=t=>-1!==t.indexOf(rp),u1="%MCEPASTEBIN%",sp=t=>t.dom.get("mcepastebin"),TT=t=>et(t)&&"mcepastebin"===t.id,m1=t=>t===u1,f1=(t,e)=>(Q.each(e,n=>{t=$o(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),g1=t=>f1(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,o)=>n||o?Qt:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),p1=(t,e)=>({content:t,cancelled:e}),ip=(t,e)=>(t.insertContent(e,{merge:jk(t),paste:!0}),!0),ap=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),RT=(t,e,n)=>{return!(t.selection.isCollapsed()||!ap(e)||(o=t,r=e,s=n,o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),0));var o,r,s},DT=(t,e,n)=>{return o=t,!(!ap(r=e)||!ce(tb(o),s=>Os(r.toLowerCase(),`.${s.toLowerCase()}`)))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(t,e,n);var o,r},BT=(t=>{let e=0;return()=>"mceclip"+e++})(),LT=t=>{const e=op();return l1(e,t),np(e),e},h1=(t,e,n,o,r)=>{const s=((c,d,u)=>{const f=c.dispatch("PastePreProcess",{content:d,internal:u}),h=((g,b)=>{const p=pa({sanitize:hm(g)},g.schema);p.addNodeFilter("meta",_=>{Q.each(_,C=>{C.remove()})});const v=p.parse(b,{forced_root_block:!1,isRootContent:!0});return us({validate:!0},g.schema).serialize(v)})(c,f.content);return c.hasEventListeners("PastePostProcess")&&!f.isDefaultPrevented()?((g,b,p)=>{const v=g.dom.create("div",{style:"display:none"},b),_=g.dispatch("PastePostProcess",{node:v,internal:p});return p1(_.node.innerHTML,_.isDefaultPrevented())})(c,h,u):p1(h,f.isDefaultPrevented())})(t,e,n);if(!s.cancelled){const i=s.content,a=()=>{return l=t,c=i,void(o||!zk(l)?ip(l,c):(u=l,f=c,Q.each([RT,DT,ip],h=>!h(u,f,ip))));var l,c,u,f};r?ru(t,"insertFromPaste",{dataTransfer:LT(i)}).isDefaultPrevented()||(a(),ou(t,"insertFromPaste")):a()}},gu=(t,e,n,o)=>{const r=n||d1(e);h1(t,e.replace(rp,""),r,!1,o)},lp=(t,e,n)=>{const o=t.dom.encode(e).replace(/\r\n/g,"\n"),r=((s,i,a)=>{const l=s.split(/\n\n/),c=((f,h)=>{let g="<"+f;const b=wo(h,(p,v)=>v+'="'+rs.encodeAllRaw(p)+'"');return b.length&&(g+=" "+b.join(" ")),g+">"})(i,a),d="</"+i+">",u=jt(l,f=>f.split(/\n/).join("<br />"));return 1===u.length?u[0]:jt(u,f=>c+f+d).join("")})(Dp(o,Hk(t)),fn(t),Cl(t));h1(t,r,!1,!0,n)},b1=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const o=t.types[n];try{e[o]=t.getData(o)}catch{e[o]=""}}return e},bs=(t,e)=>e in t&&t[e].length>0,v1=t=>bs(t,"text/html")||bs(t,"text/plain"),y1=(t,e,n)=>{const o="paste"===e.type?e.clipboardData:e.dataTransfer;var r;if(nd(t)&&o){const s=((i,a)=>{const l=a.items?Kn(Fe(a.items),d=>"file"===d.kind?[d.getAsFile()]:[]):[],c=a.files?Fe(a.files):[];return Et(l.length>0?l:c,(d=>{const u=tb(d);return f=>xe(f.type,"image/")&&ce(u,h=>(g=>{const b=g.toLowerCase(),p={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Q.hasOwn(p,b)?"image/"+p[b]:"image/"+b})(h)===f.type)})(i))})(t,o);if(s.length>0)return e.preventDefault(),(r=s,Promise.all(jt(r,i=>Oy(i).then(a=>({file:i,uri:a}))))).then(i=>{n&&t.selection.setRng(n),X(i,a=>{var l,c;l=t,qf((c=a).uri).each(({data:d,type:u,base64Encoded:f})=>{const h=f?d:btoa(d),g=c.file,b=l.editorUpload.blobCache,v=b.getByData(h,u)??((_,C,E,k)=>{const N=BT(),O=$h(_)&&et(E.name),M=O?((R,P)=>{const B=P.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return et(B)?R.dom.encode(B[1]):void 0})(_,E.name):N,z=C.create(N,E,k,M,O?E.name:void 0);return C.add(z),z})(l,b,g,h);gu(l,`<img src="${v.blobUri()}">`,!1,!0)})})}),!0}return!1},cp=(t,e,n,o,r)=>{let s=g1(n);const i=bs(e,fu())||d1(n),a=!i&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),l=ap(s);(m1(s)||!s.length||a&&!l)&&(o=!0),(o||l)&&(s=bs(e,"text/plain")&&a?e["text/plain"]:(c=>{const d=ss(),u=pa({},d);let f="";const h=d.getVoidElements(),g=Q.makeMap("script noscript style textarea video audio iframe object"," "),b=d.getBlockElements(),p=v=>{const _=v.name,C=v;if("br"!==_){if("wbr"!==_)if(h[_]&&(f+=" "),g[_])f+=" ";else{if(3===v.type&&(f+=v.value),!(v.name in d.getVoidElements())){let E=v.firstChild;if(E)do{p(E)}while(E=E.next)}b[_]&&C.next&&(f+="\n","p"===_&&(f+="\n"))}}else f+="\n"};return c=f1(c,[/<!\[[^\]]+\]>/g]),p(u.parse(c)),f})(s)),m1(s)||(o?lp(t,s,r):gu(t,s,i,r))},_1=(t,e,n,o)=>{((r,s,i)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",i),r.setData(fu(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),o()):n(e.html,o)},C1=t=>(e,n)=>{const{dom:o,selection:r}=t,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=o.create("div",{contenteditable:"true"},e);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(i),o.add(t.getBody(),s);const a=r.getRng();i.focus();const l=o.createRng();l.selectNodeContents(i),r.setRng(l),eo.setEditorTimeout(t,()=>{r.setRng(a),o.remove(s),n()},0)},w1=t=>({html:OT(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),x1=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},E1=(t,e)=>{var n,o;return ai.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(o=e.clientY)&&void 0!==o?o:0,t.getDoc())},k1=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},MT=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,S1=t=>Q.trim(t).replace(MT,cd).toLowerCase(),IT=(t,e,n)=>{const o=Ik(t);if(n||"all"===o||!Fk(t))return e;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const s=t.dom,i=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,l,c,d)=>{const u=s.parseStyle(s.decode(c)),f={};for(let g=0;g<r.length;g++){const b=u[r[g]];let p=b,v=s.getStyle(i,r[g],!0);/color/.test(r[g])&&(p=S1(p),v=S1(v)),v!==p&&(f[r[g]]=b)}const h=s.serializeStyle(f,"span");return h?l+' style="'+h+'"'+d:l+d})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,i,a,l)=>i+' style="'+a+'"'+l)},N1=t=>tr(T(t)),A1=(t,e)=>{const n=e.getNode();we(n)||t.selection.setCursorLocation(n,e.offset())},O1=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},T1=Ln(),R1=T1.os,zT=T1.browser.isSafari(),D1=R1.isMacOS()||R1.isiOS(),dp=(t,e)=>et(t.getParent(e.container(),"details")),B1=(t,e)=>{const n=t.dom.getParent(e.container(),"details");if(n&&!n.open){const o=t.dom.select("summary",n)[0];o&&yo(o).each(r=>A1(t,r))}else A1(t,e)},$T=Dt,L1=U,qT=t=>At(t.dom),P1=t=>e=>Ht(T(t),e),M1=(t,e)=>Nr(T(t),qT,P1(e)),I1=(t,e,n)=>{const o=new y(t,e),r=n?o.next.bind(o):o.prev.bind(o);let s=t;for(let i=n?t:r();i&&!$T(i);i=r())vo(i)&&(s=i);return s};var Ea;!function(t){t.Before="before",t.After="after"}(Ea||(Ea={}));const WT=(t,e)=>Math.abs(t.left-e),KT=(t,e)=>Math.abs(t.right-e),XT=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),up=(t,e,n)=>{const o=c=>vo(c.node)?w.some(c):A(c.node)?up(Fe(c.node.childNodes),e,n):w.none(),r=(c,d)=>{const u=Tn(c,(f,h)=>d(f,e,n)-d(h,e,n));return((f,h)=>{if(f.length>=2){const g=o(f[0]).getOr(f[0]),b=o(f[1]).getOr(f[1]);if(Math.abs(h(g,e,n)-h(b,e,n))<2){if(U(g.node))return w.some(g);if(U(b.node))return w.some(b)}}return w.none()})(u,d).orThunk(()=>$r(u,o))},[s,i]=((t,e)=>{return(n=Et(t,n=>{return(o=e)>=(r=n).top&&o<=r.bottom;var o,r}),Me(n,(o,r)=>o.fold(()=>w.some(r),s=>{const i=Math.min(r.left,s.left),a=Math.min(r.top,s.top),l=Math.max(r.right,s.right),c=Math.max(r.bottom,s.bottom);return w.some({top:a,right:l,bottom:c,left:i,width:l-i,height:c-a})}),w.none())).fold(()=>[[],t],n=>{const{pass:o,fail:r}=xs(t,s=>((i,a)=>{const l=(c=i,d=a,Math.max(0,Math.min(c.bottom,d.bottom)-Math.max(c.top,d.top))/Math.min(i.height,a.height));var c,d;return((c,d)=>c.top<d.bottom&&c.bottom>d.top)(i,a)&&l>.5})(s,n));return[o,r]});var n})(mC(t),n),{pass:a,fail:l}=xs(i,c=>c.top<n);return r(s,XT).orThunk(()=>r(l,mh)).orThunk(()=>r(a,mh))},F1=(t,e,n)=>((o,r,s)=>{const i=T(o),l=((t,e,n)=>w.from(t.dom.elementFromPoint(e,n)).map(Ms))(mo(i),r,s).filter(c=>uo(i,c)).getOr(i);return((c,d,u,f)=>{const h=(g,b)=>{const p=Et(g.dom.childNodes,zr(v=>A(v)&&v.classList.contains("mce-drag-container")));return b.fold(()=>up(p,u,f),v=>{const _=Et(p,C=>C!==v.dom);return up(_,u,f)}).orThunk(()=>(Ht(g,c)?w.none():ji(g)).bind(v=>h(v,w.some(g))))};return h(d,w.none())})(i,l,r,s)})(t,e,n).filter(o=>El(o.node)).map(o=>{return{node:(r=o).node,position:WT(r,s=e)<KT(r,s)?Ea.Before:Ea.After};var r,s}),j1=t=>{var e,n;const o=t.getBoundingClientRect(),r=t.ownerDocument,s=r.documentElement,i=r.defaultView;return{top:o.top+(null!==(e=i?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:o.left+(null!==(n=i?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},z1=t=>({target:t,srcElement:t}),U1=At,QT=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(U1,It),JT=(t,e,n,o)=>{const r=t.dom,s=e.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const i=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),i.appendChild(s),i},pu=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},H1=pu("left",-32),$1=pu("left",32),q1=pu("top",-32),V1=pu("top",32),W1=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},sc=(t,e,n,o,r)=>{"dragstart"===e&&l1(o,t.dom.getOuterHTML(n));const s=((t,e,n,o)=>{const r=((s,i)=>{const a=(l=>{const c=op(),d=w.from(l[ep]);return np(l),o1(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(u=l,w.from(u[n1])).each(u=>c.setDragImage(u.image,u.x,u.y)),X(l.types,u=>{"Files"!==u&&c.setData(u,l.getData(u))}),X(l.files,u=>c.items.add(u)),(u=>w.from(u[tp]))(l).each(u=>{var f;f=c,uu(u)(f)}),d.each(u=>{r1(l,u),r1(c,u)}),c;var u})(s);return"dragstart"===i?(o1(a),s1(a)):"drop"===i?(xT(a),np(a)):(ET(a),ST(a)),a})(n,t);return we(o)?((s,i,a)=>{const l=fc("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:Bt,stopImmediatePropagation:Bt,stopPropagation:Bt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:a,...z1(i)}})(t,e,r):(s=t,i=o,a=e,l=r,{...i,dataTransfer:l,type:s,...z1(a)});var s,i,a,l})(e,n,o,r);return t.dispatch(e,s)},K1=(t,e,n)=>{t.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>sc(e,"dragend",o.element,o.dataTransfer),r=>sc(e,"dragend",o.element,o.dataTransfer,r))}),Y1(t)},Y1=t=>{t.on(e=>{e.intervalId.clear(),W1(e.ghost)}),t.clear()},ic=At,X1=(t,e)=>ui(t.getBody(),e),eR=t=>{const e=t.selection,n=t.dom,o=t.getBody(),r=((t,e,n,o)=>{const r=is();let s,i;const a=fn(t),l=t.dom,c=()=>{(d=>{var u,f;const h=x(T(d),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<h.length;g++){const b=h[g].dom;let p=b.previousSibling;if(Ji(p)){const v=p.data;1===v.length?null===(u=p.parentNode)||void 0===u||u.removeChild(p):p.deleteData(v.length-1,1)}p=b.nextSibling,Vs(p)&&(1===p.data.length?null===(f=p.parentNode)||void 0===f||f.removeChild(p):p.deleteData(0,1))}})(e),i&&(ei(i),i=null),r.on(d=>{l.remove(d.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(d,u)=>{let f;if(c(),rS(u))return null;if(!n(u))return i=((h,g)=>{var b;const p=(null!==(b=h.ownerDocument)&&void 0!==b?b:document).createTextNode(Te),v=h.parentNode;if(g){const _=h.previousSibling;if(Do(_)){if(en(_))return _;if(Ji(_))return _.splitText(_.data.length-1)}v?.insertBefore(p,h)}else{const _=h.nextSibling;if(Do(_)){if(en(_))return _;if(Vs(_))return _.splitText(1),_}h.nextSibling?v?.insertBefore(p,h.nextSibling):v?.appendChild(p)}return p})(u,d),f=u.ownerDocument.createRange(),xl(i.nextSibling)?(f.setStart(i,0),f.setEnd(i,0)):(f.setStart(i,1),f.setEnd(i,1)),f;{const h=((p,v,_)=>{var C;const E=(null!==(C=v.ownerDocument)&&void 0!==C?C:document).createElement(p);E.setAttribute("data-mce-caret",_?"before":"after"),E.setAttribute("data-mce-bogus","all"),E.appendChild(qs().dom);const k=v.parentNode;return _?k?.insertBefore(E,v):v.nextSibling?k?.insertBefore(E,v.nextSibling):k?.appendChild(E),E})(a,u,d),g=ib(e,u,d);l.setStyle(h,"top",g.top),i=h;const b=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(b,{...g}),l.add(e,b),r.set({caret:b,element:u,before:d}),d&&l.addClass(b,"mce-visual-caret-before"),s=setInterval(()=>{r.on(p=>{o()?l.toggleClass(p.caret,"mce-visual-caret-hidden"):l.addClass(p.caret,"mce-visual-caret-hidden")})},500),f=u.ownerDocument.createRange(),f.setStart(h,0),f.setEnd(h,0)}return f},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(d=>{const u=ib(e,d.element,d.before);l.setStyles(d.caret,{...u})})},destroy:()=>clearInterval(s)}})(t,o,n.isBlock,()=>li(t)),s="sel-"+n.uniqueId(),i="data-mce-selected";let a;const l=p=>p!==o&&(ic(p)||re(p))&&n.isChildOf(p,o)&&n.isEditable(p.parentNode),c=(p,v,_,C=!0)=>t.dispatch("ShowCaret",{target:v,direction:p,before:_}).isDefaultPrevented()?null:(C&&e.scrollIntoView(v,-1===p),r.show(_,v)),d=p=>en(p)||Vs(p)||Ji(p),u=p=>d(p.startContainer)||d(p.endContainer),h=(p,v)=>{if(!p)return null;if(p.collapsed){if(!u(p)){const k=v?1:-1,N=Al(k,o,p),O=N.getNode(!v);if(et(O)){if(El(O))return c(k,O,!!v&&!N.isAtEnd(),!1);if(Bo(O)&&At(O.nextSibling)){const $=n.createRng();return $.setStart(O,0),$.setEnd(O,0),$}}const M=N.getNode(v);if(et(M)){if(El(M))return c(k,M,!v&&!N.isAtEnd(),!1);if(Bo(M)&&At(M.previousSibling)){const $=n.createRng();return $.setStart(M,1),$.setEnd(M,1),$}}}return null}let _=p.startContainer,C=p.startOffset;const E=p.endOffset;if(U(_)&&0===C&&ic(_.parentNode)&&(_=_.parentNode,C=n.nodeIndex(_),_=_.parentNode),!A(_))return null;if(E===C+1&&_===p.endContainer){const k=_.childNodes[C];if(l(k))return(N=>{const O=N.cloneNode(!0),M=t.dispatch("ObjectSelected",{target:N,targetClone:O});if(M.isDefaultPrevented())return null;const $=((R,P)=>{const B=T(t.getBody()),I=t.getDoc(),tt=js(B,"#"+s).getOrThunk(()=>{const rt=Qr('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',I);return pe(rt,"id",s),fe(B,rt),rt}),G=n.createRng();po(tt),Ar(tt,[Er(Qt,I),T(P),Er(Qt,I)]),G.setStart(tt.dom.firstChild,1),G.setEnd(tt.dom.lastChild,0),qi(tt,{top:n.getPos(R,t.getBody()).y+"px"}),wv(tt);const ht=e.getSel();return ht&&(ht.removeAllRanges(),ht.addRange(G)),G})(N,M.targetClone),z=T(N);return X(x(T(t.getBody()),`*[${i}]`),R=>{Ht(z,R)||Oe(R,i)}),n.getAttrib(N,i)||N.setAttribute(i,"1"),a=N,b(),$})(k)}return null},g=()=>{a&&a.removeAttribute(i),js(T(t.getBody()),"#"+s).each(ie),a=null},b=()=>{r.hide()};return lr(t)||(t.on("click",p=>{n.isEditable(p.target)||(p.preventDefault(),t.focus())}),t.on("blur NewBlock",g),t.on("ResizeWindow FullscreenStateChanged",r.reposition),t.on("tap",p=>{const v=p.target,_=X1(t,v);ic(_)?(p.preventDefault(),Kl(t,_).each(h)):l(v)&&Kl(t,v).each(h)},!0),t.on("mousedown",p=>{const v=p.target;if(v!==o&&"HTML"!==v.nodeName&&!n.isChildOf(v,o)||!((C,E,k)=>{const N=T(C.getBody()),O=C.inline?N:T(mo(N).dom.documentElement),M=(($,z,R,P)=>{const B=z.dom.getBoundingClientRect();return{x:R-($?B.left+z.dom.clientLeft+AA(z):0),y:P-($?B.top+z.dom.clientTop+NA(z):0)}})(C.inline,O,E,k);return(($,z,R)=>{const P=kA($),B=SA($);return z>=0&&R>=0&&z<=P&&R<=B})(O,M.x,M.y)})(t,p.clientX,p.clientY))return;g(),b();const _=X1(t,v);ic(_)?(p.preventDefault(),Kl(t,_).each(h)):F1(o,p.clientX,p.clientY).each(C=>{var E;p.preventDefault(),(E=c(1,C.node,C.position===Ea.Before,!1))&&e.setRng(E),A(_)?_.focus():t.getBody().focus()})}),t.on("keypress",p=>{ct.modifierPressed(p)||ic(e.getNode())&&p.preventDefault()}),t.on("GetSelectionRange",p=>{let v=p.range;if(a){if(!a.parentNode)return void(a=null);v=v.cloneRange(),v.selectNode(a),p.range=v}}),t.on("SetSelectionRange",p=>{p.range=(p=>{const v=t.schema.getVoidElements(),_=n.createRng(),C=p.startContainer,E=p.startOffset,k=p.endContainer,N=p.endOffset;return Ot(v,C.nodeName.toLowerCase())?0===E?_.setStartBefore(C):_.setStartAfter(C):_.setStart(C,E),Ot(v,k.nodeName.toLowerCase())?0===N?_.setEndBefore(k):_.setEndAfter(k):_.setEnd(k,N),_})(p.range);const v=h(p.range,p.forward);v&&(p.range=v)}),t.on("AfterSetSelectionRange",p=>{const v=p.range,_=v.startContainer.parentElement;var C,E;u(v)||A(C=_)&&"mcepastebin"===C.id||b(),et(E=_)&&n.hasClass(E,"mce-offscreen-selection")||g()}),(t=>{const e=is(),n=Jt.DOM,o=document,r=(l=e,c=t,d=>{if(0===d.button){const u=de(c.dom.getParents(d.target),QT).getOr(null);if(et(u)&&(f=c.dom,h=c.getBody(),U1(g=u)&&g!==h&&f.isEditable(g.parentElement))){const f=c.dom.getPos(u),h=c.getBody(),g=c.getDoc().documentElement;l.set({element:u,dataTransfer:op(),dragging:!1,screenX:d.screenX,screenY:d.screenY,maxX:(c.inline?h.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?h.scrollHeight:g.offsetHeight)-2,relX:d.pageX-f.x,relY:d.pageY-f.y,width:u.offsetWidth,height:u.offsetHeight,ghost:JT(c,u,u.offsetWidth,u.offsetHeight),intervalId:SE(100)})}}var f,h,g}),s=((t,e)=>{const n=Gc((r,s)=>{return a=r,l=s,(i=e)._selectionOverrides.hideFakeCaret(),void F1(i.getBody(),a,l).fold(()=>i.selection.placeCaretAt(a,l),c=>{const d=i._selectionOverrides.showCaret(1,c.node,c.position===Ea.Before,!1);d?i.selection.setRng(d):i.selection.placeCaretAt(a,l)});var i,a,l},0);e.on("remove",n.cancel);const o=t;return r=>t.on(s=>{const i=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&i>10){const c=sc(e,"dragstart",s.element,s.dataTransfer,r);if(et(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const c=r.currentTarget===e.getDoc().documentElement,d=((u,f)=>({pageX:f.pageX-u.relX,pageY:f.pageY+5}))(s,(f=r,h=(p=u=e).inline?j1(p.getBody()):{left:0,top:0},g=(p=>{const v=p.getBody();return p.inline?{left:v.scrollLeft,top:v.scrollTop}:{left:0,top:0}})(u),b=((p,v)=>{if(v.target.ownerDocument!==p.getDoc()){const _=j1(p.getContentAreaContainer()),C=(E=>{const k=E.getBody(),N=E.getDoc().documentElement;return E.inline?{left:k.scrollLeft,top:k.scrollTop}:{left:k.scrollLeft||N.scrollLeft,top:k.scrollTop||N.scrollTop}})(p);return{left:v.pageX-_.left+C.left,top:v.pageY-_.top+C.top}}return{left:v.pageX,top:v.pageY}})(u,f),{pageX:b.left-h.left+g.left,pageY:b.top-h.top+g.top}));a=s.ghost,l=e.getBody(),a.parentNode!==l&&l.appendChild(a),((u,f,h,g,b,p,v,_,C,E,k,N)=>{let O=0,M=0;u.style.left=f.pageX+"px",u.style.top=f.pageY+"px",f.pageX+h>b&&(O=f.pageX+h-b),f.pageY+g>p&&(M=f.pageY+g-p),u.style.width=h-O+"px",u.style.height=g-M+"px";const $=C.clientHeight,z=C.clientWidth,R=v+C.getBoundingClientRect().top,P=_+C.getBoundingClientRect().left;k.on(B=>{B.intervalId.clear(),B.dragging&&N&&(v+8>=$?B.intervalId.set(V1(E)):v-8<=0?B.intervalId.set(q1(E)):_+8>=z?B.intervalId.set($1(E)):_-8<=0?B.intervalId.set(H1(E)):R+16>=window.innerHeight?B.intervalId.set(V1(window)):R-16<=0?B.intervalId.set(q1(window)):P+16>=window.innerWidth?B.intervalId.set($1(window)):P-16<=0&&B.intervalId.set(H1(window)))})})(s.ghost,d,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,e.getContentAreaContainer(),e.getWin(),o,c),n.throttle(r.clientX,r.clientY)}var u,f,p,h,g,b,a,l})})(e,t),i=((l,c)=>d=>{l.on(u=>{var f,h,g,b;if(u.intervalId.clear(),u.dragging){if(h=c,g=(h=>{const g=h.getSel();if(et(g)){const b=g.getRangeAt(0).startContainer;return U(b)?b.parentNode:b}return null})(c.selection),b=u.element,!ve(g)&&g!==b&&!h.dom.isChildOf(g,b)&&h.dom.isEditable(g)){const h=null!==(f=c.getDoc().elementFromPoint(d.clientX,d.clientY))&&void 0!==f?f:c.getBody();sc(c,"drop",h,u.dataTransfer,d).isDefaultPrevented()||c.undoManager.transact(()=>{((g,b)=>{const p=g.getParent(b.parentNode,g.isBlock);W1(b),p&&p!==g.getRoot()&&g.isEmpty(p)&&tr(T(p))})(c.dom,u.element),(g=>{const b=g.getData("text/html");return""===b?w.none():w.some(b)})(u.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}sc(c,"dragend",c.getBody(),u.dataTransfer,d)}}),Y1(l)})(e,t),a=((l,c)=>d=>K1(l,c,w.some(d)))(e,t);var l,c;t.on("mousedown",r),t.on("mousemove",s),t.on("mouseup",i),n.bind(o,"mousemove",s),n.bind(o,"mouseup",a),t.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",a)}),t.on("keydown",l=>{l.keyCode===ct.ESC&&K1(e,t,w.none())})})(p=t),xk(p)&&(v=>{const _=k=>{if(!k.isDefaultPrevented()){const N=k.dataTransfer;N&&(ut(N.types,"Files")||N.files.length>0)&&(k.preventDefault(),"drop"===k.type&&Ud(v,"Dropped file type is not supported"))}},C=k=>{_d(v,k.target)&&_(k)},E=()=>{const k=Jt.DOM,N=v.dom,O=document,M=v.inline?v.getBody():v.getDoc(),$=["drop","dragover"];X($,z=>{k.bind(O,z,C),N.bind(M,z,_)}),v.on("remove",()=>{X($,z=>{k.unbind(O,z,C),N.unbind(M,z,_)})})};v.on("init",()=>{eo.setEditorTimeout(v,E,0)})})(p),(p=>{const v=Gc(()=>{if(!p.removed&&p.getBody().contains(document.activeElement)){const _=p.selection.getRng();if(_.collapsed){const C=gg(p,_,!1);p.selection.setRng(C)}}},0);p.on("focus",()=>{v.throttle()}),p.on("blur",()=>{v.cancel()})})(t),(p=>{p.on("init",()=>{p.on("focusin",v=>{const _=v.target;if(re(_)){const C=ui(p.getBody(),_),E=At(C)?C:_;p.selection.getNode()!==E&&Kl(p,E).each(k=>p.selection.setRng(k))}})})})(t)),{showCaret:c,showBlockCaretContainer:p=>{p.hasAttribute("data-mce-caret")&&(il(p),e.scrollIntoView(p))},hideFakeCaret:b,destroy:()=>{r.destroy(),a=null}};var p},nR=(t,e)=>{let n=e;for(let o=t.previousSibling;U(o);o=o.previousSibling)n+=o.data.length;return n},G1=(t,e,n,o,r)=>{if(U(n)&&(o<0||o>n.data.length))return[];const s=r&&U(n)?[nR(n,o)]:[o];let i=n;for(;i!==e&&i.parentNode;)s.push(t.nodeIndex(i,r)),i=i.parentNode;return i===e?s.reverse():[]},mp=(t,e,n,o,r,s,i=!1)=>({start:G1(t,e,n,o,i),end:G1(t,e,r,s,i)}),Q1=(t,e)=>{const n=e.slice(),o=n.pop();return _n(o)?Me(n,(r,s)=>r.bind(i=>w.from(i.childNodes[s])),w.some(t)).bind(r=>U(r)&&(o<0||o>r.data.length)?w.none():w.some({node:r,offset:o})):w.none()},J1=(t,e)=>Q1(t,e.start).bind(({node:n,offset:o})=>Q1(t,e.end).map(({node:r,offset:s})=>{const i=document.createRange();return i.setStart(n,o),i.setEnd(r,s),i})),ka=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const o=e.parentNode;t.remove(e),ka(t,o,n)}},hu=(t,e,n,o=!0)=>{const r=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),o&&!n(e.startContainer)&&(U(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),U(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),ka(t,r,n),r!==s&&ka(t,s,n))},fp=(t,e)=>w.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),Z1=(t,e,n)=>{const o=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:Ph(o).concat(t.blockPatterns),inlinePatterns:Mh(o).concat(t.inlinePatterns)}},tx=(t,e,n,o)=>{const r=t.createRng();return r.setStart(e,0),r.setEnd(n,o),r.toString()},ex=(t,e,n)=>{((o,r,s)=>{if(U(o)&&0>=o.length)return w.some(jo(o,0));{const i=Js(Qd);return w.from(i.forwards(o,0,Jd(o),s)).map(a=>jo(a.container,0))}})(e,0,e).each(o=>{const r=o.container;gw(r,n.start.length,e).each(a=>{const l=t.createRng();l.setStart(r,0),l.setEnd(a.container,a.offset),hu(t,l,c=>c===e)});const s=T(r),i=kn(s);var a,l;/^\s[^\s]/.test(i)&&(a=s,l=i.slice(1),jn.set(a,l))})},nx=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),bu=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},ox=(t,e,n)=>{const o=J1(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,i=0===o.endOffset?s:s.splitText(o.endOffset),a=0===o.startOffset?r:r.splitText(o.startOffset),l=a.parentNode;return{prefix:e,end:i.parentNode.insertBefore(nx(t,e+"-end"),i),start:l.insertBefore(nx(t,e+"-start"),a)}},rx=(t,e,n)=>{ka(t,t.get(e.prefix+"-end"),n),ka(t,t.get(e.prefix+"-start"),n)},gp=t=>0===t.start.length,sx=(t,e,n,o)=>{const r=e.start;var s;return Mg(t,o.container,o.offset,(s=r,(i,a)=>{const l=i.data.substring(0,a),c=l.lastIndexOf(s.charAt(s.length-1)),d=l.lastIndexOf(s);return-1!==d?d+s.length:-1!==c?c+1:-1}),n).bind(i=>{var a,l;const c=null!==(l=null===(a=n.textContent)||void 0===a?void 0:a.indexOf(r))&&void 0!==l?l:-1;if(-1!==c&&i.offset>=c+r.length){const d=t.createRng();return d.setStart(i.container,i.offset-r.length),d.setEnd(i.container,i.offset),w.some(d)}return Pg(i.container,i.offset-r.length,n).map(u=>{const f=t.createRng();return f.setStart(u.container,u.offset),f.setEnd(i.container,i.offset),f}).filter(u=>u.toString()===r).orThunk(()=>sx(t,e,n,jo(i.container,0)))})},oR=(t,e,n,o)=>{const r=t.dom,s=r.getRoot(),i=n.pattern,a=n.position.container,l=n.position.offset;return Pg(a,l-n.pattern.end.length,e).bind(c=>{const d=mp(r,s,c.container,c.offset,a,l,o);if(gp(i))return w.some({matches:[{pattern:i,startRng:d,endRng:d}],position:c});{const u=vu(t,n.remainingPatterns,c.container,c.offset,e,o),f=u.getOr({matches:[],position:c}),h=f.position;return((b,p,v,_,C,E=!1)=>{if(0===p.start.length&&!E){const k=b.createRng();return k.setStart(v,_),k.setEnd(v,_),w.some(k)}return Lg(v,_,C).bind(k=>sx(b,p,C,k).bind(N=>{var O;return E&&(N.endContainer===k.container&&N.endOffset===k.offset||0===k.offset&&(null===(O=N.endContainer.textContent)||void 0===O?void 0:O.length)===N.endOffset)?w.none():w.some(N)}))})(r,i,h.container,h.offset,e,u.isNone()).map(b=>{const p=((v,_,C,E=!1)=>mp(v,_,C.startContainer,C.startOffset,C.endContainer,C.endOffset,E))(r,s,b,o);return{matches:f.matches.concat([{pattern:i,startRng:p,endRng:d}]),position:jo(b.startContainer,b.startOffset)}})}})},vu=(t,e,n,o,r,s)=>{const i=t.dom;return Lg(n,o,i.getRoot()).bind(a=>{const l=tx(i,r,n,o);for(let c=0;c<e.length;c++){const d=e[c];if(!Os(l,d.end))continue;const u=e.slice();u.splice(c,1);const f=oR(t,r,{pattern:d,remainingPatterns:u,position:a},s);if(f.isNone()&&o>0)return vu(t,e,n,o-1,r,s);if(f.isSome())return f}return w.none()})},ix=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?X(e.format,o=>{t.formatter.apply(o)}):t.execCommand(e.cmd,!1,e.value)},ax=(t,e,n,o,r,s)=>{var i;return((a,l)=>{const c=Yn(a,d=>ce(l,u=>d.pattern.start===u.pattern.start&&d.pattern.end===u.pattern.end));return a.length===l.length?c?a:l:a.length>l.length?a:l})(vu(t,r.inlinePatterns,n,o,e,s).fold(()=>[],a=>a.matches),vu(t,(i=r.inlinePatterns,Tn(i,(a,l)=>l.end.length-a.end.length)),n,o,e,s).fold(()=>[],a=>a.matches))},lx=(t,e)=>{if(0===e.length)return;const n=t.dom,o=t.selection.getBookmark(),r=((s,i)=>{const a=hl("mce_textpattern"),l=Vo(i,(c,d)=>{const u=ox(s,a+`_end${c.length}`,d.endRng);return c.concat([{...d,endMarker:u}])},[]);return Vo(l,(c,d)=>{const u=l.length-c.length-1,f=gp(d.pattern)?d.endMarker:ox(s,a+`_start${u}`,d.startRng);return c.concat([{...d,startMarker:f}])},[])})(n,e);X(r,s=>{const i=n.getParent(s.startMarker.start,n.isBlock),a=l=>l===i;gp(s.pattern)?((l,c,d,u)=>{const f=bu(l.dom,d);hu(l.dom,f,u),ix(l,c,f)})(t,s.pattern,s.endMarker,a):((l,c,d,u,f)=>{const h=l.dom,g=bu(h,u),b=bu(h,d);hu(h,b,f),hu(h,g,f);const v=bu(h,{prefix:d.prefix,start:d.end,end:u.start});ix(l,c,v)})(t,s.pattern,s.startMarker,s.endMarker,a),rx(n,s.endMarker,a),rx(n,s.startMarker,a)}),t.selection.moveToBookmark(o)},cx=(t,e,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],e))return!0;return!1},pp=Jt.DOM,iR=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,hp=t=>lo(t,e=>!1===we(e)),dx=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return hp({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:iR(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},ux=t=>{const e=t.options.get;return hp({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},mx=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,fx=t=>{const e=mx(t),n=Kh(t),o=t.contentCSS,r=()=>{e.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let l="";Q.each(t.contentStyles,c=>{l+=c+"\r\n"}),t.dom.addStyle(l)}const i=Promise.all(((l,c,d)=>{const u=[mx(l).loadAll(c)];return l.inline?u:u.concat([l.ui.styleSheetLoader.loadAll(d)])})(t,o,n)).then(s).catch(s),a=nk(t);return a&&((l,c)=>{const d=T(l.getBody()),u=Ja(Ge(d)),f=Ee("style");pe(f,"type","text/css"),fe(f,Er(c)),fe(u,f),l.on("remove",()=>{ie(f)})})(t,a),i},bp=t=>{var e;!0!==t.removed&&(lr(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||dd(o)&&o.selection.getStart(!0)!==r||rn(r).each(s=>{const i=s.getNode(),a=pt(i)?rn(i).getOr(s):s;o.selection.setRng(a.toRange())})})(e),e.nodeChanged({initial:!0});const n=Ak(e);Vt(n)&&n.call(e,e),(o=>{const r=Tk(o);r&&eo.setEditorTimeout(o,()=>{let s;s=!0===r?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},gx=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(pp.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const o=t.getBody();var i;o.disabled=!0,t.readonly=Gh(t),t._editableRoot=Ck(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===pp.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let b=[];const p=C=>{if(!C.blob||!C.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const E=C.id||"blobid"+TA+++(()=>{const M=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+M()+M()+M()})(),k=C.name||E,N=C.blob;var O;return{id:ot(E),name:ot(k),filename:ot(C.filename||k+"."+(O=N.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[O.toLowerCase()]||"dat")),blob:ot(N),base64:ot(C.base64),blobUri:ot(C.blobUri||URL.createObjectURL(N)),uri:ot(C.uri)}},v=C=>de(b,C).getOrUndefined(),_=C=>v(E=>E.id()===C);return{create:(C,E,k,N,O)=>{if(bt(C))return p({id:C,name:N,filename:O,blob:E,base64:k});if(Ae(C))return p(C);throw new Error("Unknown input type")},add:C=>{_(C.id())||b.push(C)},get:_,getByUri:C=>v(E=>E.blobUri()===C),getByData:(C,E)=>v(k=>k.base64()===C&&k.blob().type===E),findFirst:v,removeByUri:C=>{b=Et(b,E=>E.blobUri()!==C||(URL.revokeObjectURL(E.blobUri()),!1))},destroy:()=>{X(b,C=>{URL.revokeObjectURL(C.blobUri())}),b=[]}}})();let n,o;const r=S_(),s=[],i=b=>p=>t.selection?b(p):[],a=(b,p,v)=>{let _=0;do{_=b.indexOf(p,_),-1!==_&&(b=b.substring(0,_)+v+b.substr(_+p.length),_+=v.length-p.length+1)}while(-1!==_);return b},l=(b,p,v)=>(b=a(b,`src="${p}"`,`src="${v}"${v===zt.transparentSrc?' data-mce-placeholder="1"':""}`),a(b,'data-mce-src="'+p+'"','data-mce-src="'+v+'"')),c=(b,p)=>{X(t.undoManager.data,v=>{"fragmented"===v.type?v.fragments=jt(v.fragments,_=>l(_,b,p)):v.content=l(v.content,b,p)})},d=()=>(n||(n=A_(t,r)),h().then(i(b=>{const p=jt(b,v=>v.blobInfo);return n.upload(p,N_(t)).then(i(v=>{const _=[];let C=!1;const E=jt(v,(k,N)=>{const{blobInfo:O,image:M}=b[N];let $=!1;return k.status&&WE(t)?(k.url&&!se(M.src,k.url)&&(C=!0),e.removeByUri(M.src),lr(t)||((z,R)=>{const P=t.convertURL(R,"src");var B;c(z.src,R),dn(T(z),{src:$h(t)?(B=R,B+(-1===B.indexOf("?")?"?":"&")+(new Date).getTime()):R,"data-mce-src":P})})(M,k.url)):k.error&&(k.error.remove&&(c(M.src,zt.transparentSrc),_.push(M),$=!0),Ud(t,Lo.translate(["Failed to upload image: {0}",k.error.message]))),{element:M,status:k.status,uploadUri:k.url,blobInfo:O,removed:$}});return _.length>0&&!lr(t)?t.undoManager.transact(()=>{X(tl(_),k=>{const N=xn(k);var O;ie(k),N.each((O=t,M=>{var $,z;($=O).dom.isEmpty((z=M).dom)&&et($.schema.getTextBlockElements()[Yt(z)])&&fe(M,Qr('<br data-mce-bogus="1" />'))})),e.removeByUri(k.dom.src)})}):C&&t.undoManager.dispatchChange(),E}))}))),u=()=>Hh(t)?d():Promise.resolve([]),f=b=>Yn(s,p=>p(b)),h=()=>(o||(o=((t,e)=>{const n={};return{findAll:(o,r=ge)=>{const s=Et((a=o)?Fe(a.getElementsByTagName("img")):[],a=>{const l=a.src;return!a.hasAttribute("data-mce-bogus")&&!a.hasAttribute("data-mce-placeholder")&&!(!l||l===zt.transparentSrc)&&(xe(l,"blob:")?!t.isUploaded(l)&&r(a):!!xe(l,"data:")&&r(a))}),i=jt(s,a=>{const l=a.src;if(Ot(n,l))return n[l].then(c=>bt(c)?c:{image:a,blobInfo:c.blobInfo});{const c=((d,u)=>{const f=()=>Promise.reject("Invalid data URI");if(xe(u,"blob:")){const b=d.getByUri(u);return et(b)?Promise.resolve(b):(h=u,xe(h,"blob:")?(p=h,fetch(p).then(v=>v.ok?v.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${p} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):xe(h,"data:")?(g=h,new Promise((p,v)=>{qf(g).bind(({type:_,data:C,base64Encoded:E})=>Ay(_,C,E)).fold(()=>v("Invalid data URI"),p)})):Promise.reject("Unknown URI format")).then(p=>Oy(p).then(v=>Ty(v,!1,_=>w.some(Ry(d,p,_))).getOrThunk(f)))}var p,h,g;return xe(u,"data:")?Dy(d,u).fold(f,b=>Promise.resolve(b)):Promise.reject("Unknown image data format")})(e,l).then(d=>(delete n[l],{image:a,blobInfo:d})).catch(d=>(delete n[l],d));return n[l]=c,c}});var a;return Promise.all(i)}}})(r,e)),o.findAll(t.getBody(),f).then(i(b=>{const p=Et(b,v=>bt(v)?(Ud(t,v),!1):"blob"!==v.uriType);return lr(t)||X(p,v=>{c(v.image.src,v.blobInfo.blobUri()),v.image.src=v.blobInfo.blobUri(),v.image.removeAttribute("data-mce-src")}),p}))),g=b=>b.replace(/src="(blob:[^"]+)"/g,(p,v)=>{const _=r.getResultUri(v);if(_)return'src="'+_+'"';let C=e.getByUri(v);return C||(C=Me(t.editorManager.get(),(E,k)=>E||k.editorUpload&&k.editorUpload.blobCache.getByUri(v),void 0)),C?'src="data:'+C.blob().type+";base64,"+C.base64()+'"':p});return t.on("SetContent",()=>{Hh(t)?u():h()}),t.on("RawSaveContent",b=>{b.content=g(b.content)}),t.on("GetContent",b=>{b.source_view||"raw"===b.format||"tree"===b.format||(b.content=g(b.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",b=>{X(b,p=>{const v=p.attr("src");if(!v||e.getByUri(v))return;const _=r.getResultUri(v);_&&p.attr("src",_)})})}),{blobCache:e,addFilter:b=>{s.push(b)},uploadImages:d,uploadImagesAuto:u,scanForImages:h,destroy:()=>{e.destroy(),r.destroy(),o=n=null}}})(t),t.schema=ss(ux(t)),t.dom=Jt(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:JE(t),referrerPolicy:fm(t),onSetAttrib:i=>{t.dispatch("SetAttrib",i)}}),t.parser=(i=>{const a=pa(dx(i),i.schema);return a.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const d=i.dom,u="data-mce-"+c;let f=l.length;for(;f--;){const h=l[f];let g=h.attr(c);if(g&&!h.attr(u)){if(0===g.indexOf("data:")||0===g.indexOf("blob:"))continue;"style"===c?(g=d.serializeStyle(d.parseStyle(g),h.name),g.length||(g=null),h.attr(u,g),h.attr(c,g)):"tabindex"===c?(h.attr(u,g),h.attr(c,null)):h.attr(u,i.convertURL(g,c,h.name))}}}),a.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const d=l[c],u=d.attr("type")||"no/type";0!==u.indexOf("mce-")&&d.attr("type","mce-"+u)}}),Yk(i)&&a.addNodeFilter("#cdata",l=>{var c;let d=l.length;for(;d--;){const u=l[d];u.type=8,u.name="#comment",u.value="[CDATA["+i.dom.encode(null!==(c=u.value)&&void 0!==c?c:"")+"]]"}}),a.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const d=i.schema.getNonEmptyElements();for(;c--;){const u=l[c];u.isEmpty(d)&&0===u.getAll("br").length&&u.append(new pn("br",1))}}),a})(t),t.serializer=h_((i=>{const a=i.options.get;return{...dx(i),...ux(i),...hp({remove_trailing_brs:a("remove_trailing_brs"),url_converter:a("url_converter"),url_converter_scope:a("url_converter_scope"),element_format:a("element_format"),entities:a("entities"),entity_encoding:a("entity_encoding"),indent:a("indent"),indent_after:a("indent_after"),indent_before:a("indent_before")})}})(t),t),t.selection=p_(t.dom,t.getWin(),t.serializer,t),t.annotator=Xb(t),t.formatter=R_(t),t.undoManager=B_(t),t._nodeChangeDispatcher=new wT(t),t._selectionOverrides=eR(t),(i=>{const a=is(),l=Re(!1),c=nm(d=>{i.dispatch("longpress",{...d,type:"longpress"}),l.set(!0)},400);i.on("touchstart",d=>{FC(d).each(u=>{c.cancel();const f={x:u.clientX,y:u.clientY,target:d.target};c.throttle(d),l.set(!1),a.set(f)})},!0),i.on("touchmove",d=>{c.cancel(),FC(d).each(u=>{a.on(f=>{((h,g)=>{const b=Math.abs(h.clientX-g.x),p=Math.abs(h.clientY-g.y);return b>5||p>5})(u,f)&&(a.clear(),l.set(!1),i.dispatch("longpresscancel"))})})},!0),i.on("touchend touchcancel",d=>{c.cancel(),"touchcancel"!==d.type&&a.get().filter(u=>u.target.isEqualNode(d.target)).each(()=>{l.get()?d.preventDefault():i.dispatch("tap",{...d,type:"tap"})})},!0)})(t),(t=>{var e;(e=t).on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()}),(e=>{e.parser.addNodeFilter("details",n=>{const o=Jk(e);X(n,r=>{"expanded"===o?r.attr("open","open"):"collapsed"===o&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=Zk(e);X(n,r=>{"expanded"===o?r.attr("open","open"):"collapsed"===o&&r.attr("open",null)})})})(t),(e=>{e.on("keydown",n=>{n.keyCode!==ct.BACKSPACE&&n.keyCode!==ct.DELETE||((o,r)=>{const s=w.from(o.getParent(r.startContainer,"details")),i=w.from(o.getParent(r.endContainer,"details"));if(s.isSome()||i.isSome()){const a=s.bind(l=>w.from(o.select("summary",l)[0]));return w.some({startSummary:a,startDetails:s,endDetails:i})}return w.none()})(e.dom,e.selection.getRng()).fold(()=>{((o,r)=>{const{dom:s,selection:i}=o,a=o.getBody();if(o.selection.isCollapsed()){const l=H.fromRangeStart(i.getRng()),c=s.getParent(l.container(),s.isBlock);if(c&&s.isEmpty(c))if(le(c.nextSibling)){const d=gn(a,l).filter(u=>dp(s,u));if(d.isSome())return d.each(u=>{r||B1(o,u)}),!0}else if(le(c.previousSibling)&&on(a,l).filter(d=>dp(s,d)))return!0;return Ol(r,a,l).fold(ne,d=>!!dp(s,d)&&(c&&s.isEmpty(c)&&o.dom.remove(c),r||B1(o,d),!0))}return!1})(e,n.keyCode===ct.DELETE)&&n.preventDefault()},o=>{((t,e,n)=>{const o=t.selection,r=o.getNode(),s=o.getRng(),i=n.keyCode===ct.BACKSPACE,a=n.keyCode===ct.DELETE,l=t.selection.isCollapsed(),c=H.fromRangeStart(s),d=t.getBody();return!((l||!((u,f)=>{const h=f.startSummary.exists(p=>p.contains(u.startContainer)),g=f.startSummary.exists(p=>p.contains(u.endContainer)),b=f.startDetails.forall(p=>f.endDetails.forall(v=>p!==v));return(h||g)&&!(h&&g)||b})(s,e))&&!(l&&i&&(u=c,f=e,f.startSummary.exists(h=>{return g=u,rn(h).exists(p=>p.isEqual(g));var g})))&&!(l&&a&&((u,f)=>f.startSummary.exists(h=>{return g=u,yo(b=h).exists(p=>Dt(p.getNode())&&gn(b,p).exists(v=>v.isEqual(g))||p.isEqual(g));var g,b}))(c,e))&&!(l&&i&&((u,f)=>f.startDetails.exists(h=>gn(h,u).forall(g=>f.startSummary.exists(b=>!b.contains(u.container())&&b.contains(g.container())))))(c,e))&&!(l&&a&&((u,f,h)=>h.startDetails.exists(g=>on(u,f).forall(b=>!g.contains(b.container()))))(d,c,e))&&(!zT||!Ze(r)||(!l&&O1(s,r)||y0(a,c,r)?N1(r):t.undoManager.transact(()=>{const u=o.getSel();let{anchorNode:f,anchorOffset:h,focusNode:g,focusOffset:b}=u??{};const p=()=>{et(f)&&et(h)&&et(g)&&et(b)&&u?.setBaseAndExtent(f,h,g,b)},v=(C,E)=>{X(C.childNodes,k=>{Rl(k)&&E.appendChild(k)})},_=t.dom.create("span",{"data-mce-bogus":"all"});v(r,_),r.appendChild(_),p(),l&&(D1&&(n.altKey||i&&n.metaKey)||!D1&&n.ctrlKey)&&u?.modify("extend",i?"left":"right",n.metaKey?"line":"word"),!o.isCollapsed()&&O1(o.getRng(),_)?N1(r):(t.execCommand(i?"Delete":"ForwardDelete"),f=u?.anchorNode,h=u?.anchorOffset,g=u?.focusNode,b=u?.focusOffset,v(_,r),p()),t.dom.remove(_)}),0)));var u,f})(e,o,n)&&n.preventDefault()})})})(t)})(t),(i=>{const a="contenteditable",l=" "+Q.trim(Wk(i))+" ",c=" "+Q.trim(Zh(i))+" ",d=UC(l),u=UC(c),f=Kk(i);f.length>0&&i.on("BeforeSetContent",h=>{((g,b,p)=>{let v=b.length,_=p.content;if("raw"!==p.format){for(;v--;)_=_.replace(b[v],CO(g,_,Zh(g)));p.content=_}})(i,f,h)}),i.parser.addAttributeFilter("class",h=>{let g=h.length;for(;g--;){const b=h[g];d(b)?b.attr(a,"true"):u(b)&&b.attr(a,"false")}}),i.serializer.addAttributeFilter(a,h=>{let g=h.length;for(;g--;){const b=h[g];(d(b)||u(b))&&(f.length>0&&b.attr("data-mce-content")?(b.name="#text",b.type=3,b.raw=!0,b.value=b.attr("data-mce-content")):b.attr(a,null))}})})(t),lr(t)||((i=t).on("mousedown",a=>{a.detail>=3&&(a.preventDefault(),(t=>{const e=((n,o)=>{const r=H.fromRangeStart(n).getNode(),s=(d=o,Nr(T(r),u=>It(u.dom)||ue(u),P1(d)).getOr(T(d)).dom),i=I1(r,s,!1),a=I1(r,s,!0),l=document.createRange();var d;return M1(i,s).fold(()=>{L1(i)?l.setStart(i,0):l.setStartBefore(i)},c=>l.setStartBefore(c.dom)),M1(a,s).fold(()=>{L1(a)?l.setEnd(a,a.data.length):l.setEndAfter(a)},c=>l.setEndAfter(c.dom)),l})(t.selection.getRng(),t.getBody());t.selection.setRng(Af(e))})(i))}),(i=>{(a=>{const l=[",",".",";",":","!","?"],c=[32],d=()=>{return h=qk(a),g=Vk(a),{inlinePatterns:Mh(h),blockPatterns:Ph(h),dynamicPatternsLookup:g};var h,g},u=()=>a.options.isSet("text_patterns_lookup");a.on("keydown",h=>{if(13===h.keyCode&&!ct.modifierPressed(h)&&a.selection.isCollapsed()){const g=d();(g.inlinePatterns.length>0||g.blockPatterns.length>0||u())&&((t,e)=>{const n=t.selection.getRng();return fp(t,n).map(o=>{var r;const s=Math.max(0,n.startOffset),i=Z1(e,o,null!==(r=o.textContent)&&void 0!==r?r:""),a=ax(t,o,n.startContainer,s,i,!0),l=((c,d,u,f)=>{var h;const g=c.dom,b=fn(c);if(!g.is(d,b))return[];const p=null!==(h=d.textContent)&&void 0!==h?h:"";return((v,_)=>{const C=Tn(v,(N,O)=>O.start.length-N.start.length),E=_.replace(Qt," ");return de(C,k=>0===_.indexOf(k.start)||0===E.indexOf(k.start))})(u.blockPatterns,p).map(v=>Q.trim(p).length===v.start.length?[]:[{pattern:v,range:mp(g,g.getRoot(),d,0,d,0,!0)}]).getOr([])})(t,o,i);return(l.length>0||a.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent("\ufeff"),lx(t,a),((u,f)=>{if(0===f.length)return;const h=u.selection.getBookmark();X(f,g=>((b,p)=>{const _=p.pattern,C=J1(b.dom.getRoot(),p.range).getOrDie("Unable to resolve path range");return fp(b,C).each(E=>{"block-format"===_.type?((k,N)=>{const O=N.get(k);return Gt(O)&&Ie(O).exists(M=>Ot(M,"block"))})(_.format,b.formatter)&&b.undoManager.transact(()=>{ex(b.dom,E,_),b.formatter.apply(_.format)}):"block-command"===_.type&&b.undoManager.transact(()=>{ex(b.dom,E,_),b.execCommand(_.cmd,!1,_.value)})}),!0})(u,g)),u.selection.moveToBookmark(h)})(t,l);const c=t.selection.getRng(),d=Lg(c.startContainer,c.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),d.each(u=>{const f=u.container;"\ufeff"===f.data.charAt(u.offset-1)&&(f.deleteData(u.offset-1,1),ka(t.dom,f.parentNode,h=>h===t.dom.getRoot()))})}),!0)}).getOr(!1)})(a,g)&&h.preventDefault()}},!0);const f=()=>{if(a.selection.isCollapsed()){const h=d();(h.inlinePatterns.length>0||u())&&((g,b)=>{const p=g.selection.getRng();fp(g,p).map(v=>{const _=Math.max(0,p.startOffset-1),C=tx(g.dom,v,p.startContainer,_),E=Z1(b,v,C),k=ax(g,v,p.startContainer,_,E,!1);k.length>0&&g.undoManager.transact(()=>{lx(g,k)})})})(a,h)}};a.on("keyup",h=>{cx(c,h,(g,b)=>g===b.keyCode&&!ct.modifierPressed(b))&&f()}),a.on("keypress",h=>{cx(l,h,(g,b)=>g.charCodeAt(0)===b.charCode)&&eo.setEditorTimeout(a,f)})})(i)})(t));const r=CT(t);((t,e)=>{t.addCommand("delete",()=>{var n;IC(n=t,e,!1).fold(()=>{gf(n),pf(n)},nt)}),t.addCommand("forwardDelete",()=>{var n;IC(n=t,e,!0).fold(()=>v0(n,"ForwardDelete"),nt)})})(t,r),(i=>{i.on("NodeChange",dt(_O,i))})(t),(i=>{var a;const l=i.dom,c=fn(i),d=null!==(a=ik(i))&&void 0!==a?a:"",u=(f,h)=>{if((p=>{if(P_(p)){const v=p.keyCode;return!M_(p)&&(ct.metaKeyPressed(p)||p.altKey||v>=112&&v<=123||ut(IA,v))}return!1})(f))return;const g=i.getBody(),b=!(P_(p=f)&&!(M_(p)||"keyup"===p.type&&229===p.keyCode))&&((p,v,_)=>{if(_e(T(v),!1)){const C=v.firstElementChild;return!C||!p.getStyle(v.firstElementChild,"padding-left")&&!p.getStyle(v.firstElementChild,"padding-right")&&_===C.nodeName.toLowerCase()}return!1})(l,g,c);var p;(""!==l.getAttrib(g,L_)!==b||h)&&(l.setAttrib(g,L_,b?d:null),l.setAttrib(g,"aria-placeholder",b?d:null),((p,v)=>{p.dispatch("PlaceholderToggle",{state:v})})(i,b),i.on(b?"keydown":"keyup",u),i.off(b?"keyup":"keydown",u))};Bn(d)&&i.on("init",f=>{u(f,!0),i.on("change SetContent ExecCommand",u),i.on("paste",h=>eo.setEditorTimeout(i,()=>u(h)))})})(t),(t=>{const e=Re(!1),n=Re(Uk(t)?"text":"html"),o=(r=>{const s=Re(null);return{create:()=>((i,a)=>{const{dom:l,selection:c}=i,d=i.getBody();a.set(c.getRng());const u=l.add(i.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},u1);zt.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(d,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),c.select(u,!0)})(r,s),remove:()=>((i,a)=>{const l=i.dom;if(sp(i)){let c;const d=a.get();for(;c=sp(i);)l.remove(c),l.unbind(c);d&&i.selection.setRng(d)}a.set(null)})(r,s),getEl:()=>sp(r),getHtml:()=>(i=>{const a=i.dom,l=(f,h)=>{f.appendChild(h),a.remove(h,!0)},[c,...d]=Et(i.getBody().childNodes,TT);X(d,f=>{l(c,f)});const u=a.select("div[id=mcepastebin]",c);for(let f=u.length-1;f>=0;f--){const h=a.create("div");c.insertBefore(h,u[f]),l(h,u[f])}return c?c.innerHTML:""})(r),getLastRng:s.get}})(t);var r,s,i;r=t,(zt.browser.isChromium()||zt.browser.isSafari())&&(i=IT,(s=r).on("PastePreProcess",a=>{a.content=i(s,a.content,a.internal)})),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((i,a)=>{"text"===a.get()?(a.set("html"),nv(i,!1)):(a.set("text"),nv(i,!0)),i.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(i,a)=>{a.html&&gu(r,a.html,a.internal,!1),a.text&&lp(r,a.text,!1)})})(t,n),(r=>{const s=l=>c=>{l(r,c)},i=Lk(r);Vt(i)&&r.on("PastePreProcess",s(i));const a=Pk(r);Vt(a)&&r.on("PastePostProcess",s(a))})(t),t.on("PreInit",()=>{(r=>{r.on("cut",(s=>i=>{!i.isDefaultPrevented()&&x1(s)&&_1(i,w1(s),C1(s),()=>{if(zt.browser.isChromium()||zt.browser.isFirefox()){const a=s.selection.getRng();eo.setEditorTimeout(s,()=>{s.selection.setRng(a),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>i=>{!i.isDefaultPrevented()&&x1(s)&&_1(i,w1(s),C1(s),Bt)})(r))})(t),((r,s)=>{Bk(r)&&r.on("dragend dragover draggesture dragdrop drop drag",i=>{i.preventDefault(),i.stopPropagation()}),nd(r)||r.on("drop",i=>{const a=i.dataTransfer;a&&ce(a.files,c=>/^image\//.test(c.type))&&i.preventDefault()}),r.on("drop",i=>{if(i.isDefaultPrevented())return;const a=E1(r,i);if(ve(a))return;const l=b1(i.dataTransfer),c=bs(l,fu());if((!v1(l)||(h=>{const g=h["text/plain"];return!!g&&0===g.indexOf("file://")})(l))&&y1(r,i,a))return;const d=l[fu()],u=d||l["text/html"]||l["text/plain"],f=((h,g,b,p)=>{const v=h.getParent(b,_=>Ks(g,_));if(v&&Ot(p,"text/html")){const _=(new DOMParser).parseFromString(p["text/html"],"text/html").body;return!le(_.querySelector(v.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,a.startContainer,l);s.get()&&!f||u&&(i.preventDefault(),eo.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{d&&r.execCommand("Delete"),k1(r,a);const h=g1(u);l["text/html"]?gu(r,h,c,!0):lp(r,h,!0)})}))}),r.on("dragstart",i=>{s.set(!0)}),r.on("dragover dragend",i=>{nd(r)&&!s.get()&&(i.preventDefault(),k1(r,E1(r,i))),"dragend"===i.type&&s.set(!1)})})(t,e),((t,e,n)=>{((o,r,s)=>{let i;o.on("keydown",a=>{var l;(ct.metaKeyPressed(l=a)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!a.isDefaultPrevented()&&(i=a.shiftKey&&86===a.keyCode)}),o.on("paste",a=>{if(a.isDefaultPrevented()||(d=a,zt.os.isAndroid()&&0===(null===(f=null===(u=d.clipboardData)||void 0===u?void 0:u.items)||void 0===f?void 0:f.length)))return;var d,u,f;const l="text"===s.get()||i;i=!1;const c=b1(a.clipboardData);!v1(c)&&y1(o,a,r.getLastRng()||o.selection.getRng())||(bs(c,"text/html")?(a.preventDefault(),cp(o,c,c["text/html"],l,!0)):bs(c,"text/plain")&&bs(c,"text/uri-list")?(a.preventDefault(),cp(o,c,c["text/plain"],l,!0)):(r.create(),eo.setEditorTimeout(o,()=>{const d=r.getHtml();r.remove(),cp(o,c,d,l,!1)},0)))})})(t,e,n),(o=>{const r=i=>xe(i,"webkit-fake-url"),s=i=>xe(i,"data:");o.parser.addNodeFilter("img",(i,a,l)=>{if(!nd(o)&&!0===(null===(d=l.data)||void 0===d?void 0:d.paste))for(const c of i){const d=c.attr("src");bt(d)&&!c.attr("data-mce-object")&&d!==zt.transparentSrc&&(r(d)||!$k(o)&&s(d))&&c.remove()}var d})})(t)})(t,o,n)})})(t);const s=(i=>{const a=i;return(l=i,Zt(l.plugins,"rtc").bind(c=>w.from(c.setup))).fold(()=>(a.rtcInstance=c_(i),w.none()),l=>(a.rtcInstance=(()=>{const c=ot(null),d=ot("");return{init:{bindEvents:Bt},undoManager:{beforeChange:Bt,add:c,undo:c,redo:c,clear:Bt,reset:Bt,hasUndo:ne,hasRedo:ne,transact:c,ignore:Bt,extra:Bt},formatter:{match:ne,matchAll:ot([]),matchNode:ot(void 0),canApply:ne,closest:d,apply:Bt,remove:Bt,toggle:Bt,formatChanged:ot({unbind:Bt})},editor:{getContent:d,setContent:ot({content:"",html:""}),insertContent:ot(""),addVisual:Bt},selection:{getContent:d},autocompleter:{addDecoration:Bt,removeDecoration:Bt},raw:{getModel:ot(w.none())}}})(),w.some(()=>l().then(c=>(a.rtcInstance=(d=>{const u=C=>Ae(C)?C:{},{init:f,undoManager:h,formatter:g,editor:b,selection:p,autocompleter:v,raw:_}=d;return{init:{bindEvents:f.bindEvents},undoManager:{beforeChange:h.beforeChange,add:h.add,undo:h.undo,redo:h.redo,clear:h.clear,reset:h.reset,hasUndo:h.hasUndo,hasRedo:h.hasRedo,transact:(C,E,k)=>h.transact(k),ignore:(C,E)=>h.ignore(E),extra:(C,E,k,N)=>h.extra(k,N)},formatter:{match:(C,E,k,N)=>g.match(C,u(E),N),matchAll:g.matchAll,matchNode:g.matchNode,canApply:C=>g.canApply(C),closest:C=>g.closest(C),apply:(C,E,k)=>g.apply(C,u(E)),remove:(C,E,k,N)=>g.remove(C,u(E)),toggle:(C,E,k)=>g.toggle(C,u(E)),formatChanged:(C,E,k,N,O)=>g.formatChanged(E,k,N,O)},editor:{getContent:C=>b.getContent(C),setContent:(C,E)=>({content:b.setContent(C,E),html:""}),insertContent:(C,E)=>(b.insertContent(C),""),addVisual:b.addVisual},selection:{getContent:(C,E)=>p.getContent(E)},autocompleter:{addDecoration:v.addDecoration,removeDecoration:v.removeDecoration},raw:{getModel:()=>w.some(_.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(t);(i=>{const a=i.getDoc(),l=i.getBody();i.dispatch("PreInit"),Rk(i)||(a.body.spellcheck=!1,pp.setAttrib(l,"spellcheck","false")),i.quirks=(t=>{const e=Q.each,n=ct.BACKSPACE,o=ct.DELETE,r=t.dom,s=t.selection,i=t.parser,a=zt.browser,l=a.isFirefox(),c=a.isChromium()||a.isSafari(),d=zt.deviceType.isiPhone()||zt.deviceType.isiPad(),u=zt.os.isMacOS()||zt.os.isiOS(),f=(R,P)=>{try{t.getDoc().execCommand(R,!1,String(P))}catch{}},h=R=>R.isDefaultPrevented(),g=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",R=>{let P;if(R.target===t.getDoc().documentElement)if(P=s.getRng(),t.getBody().focus(),"mousedown"===R.type){if(en(P.startContainer))return;s.placeCaretAt(R.clientX,R.clientY)}else s.setRng(P)})},p=()=>{Range.prototype.getClientRects||t.on("mousedown",R=>{if(!h(R)&&"HTML"===R.target.nodeName){const P=t.getBody();P.blur(),eo.setEditorTimeout(t,()=>{P.focus()})}})},v=()=>{const R=Jh(t);t.on("click",P=>{const B=P.target;/^(IMG|HR)$/.test(B.nodeName)&&r.isEditable(B.parentNode)&&(P.preventDefault(),t.selection.select(B),t.nodeChanged()),"A"===B.nodeName&&r.hasClass(B,R)&&0===B.childNodes.length&&r.isEditable(B.parentNode)&&(P.preventDefault(),s.select(B))})},_=()=>{t.on("keydown",R=>{if(!h(R)&&R.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const P=s.getNode().previousSibling;if(P&&P.nodeName&&"table"===P.nodeName.toLowerCase())return R.preventDefault(),!1}return!0})},C=()=>{Gh(t)||t.on("BeforeExecCommand mousedown",()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),Yh(t)||f("enableObjectResizing",!1)})},E=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},k=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},N=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",R=>{let P;"HTML"===R.target.nodeName&&(P=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(P),t.selection.normalize(),t.nodeChanged())}))},O=()=>{u&&t.on("keydown",R=>{!ct.metaKeyPressed(R)||R.shiftKey||37!==R.keyCode&&39!==R.keyCode||(R.preventDefault(),t.selection.getSel().modify("move",37===R.keyCode?"backward":"forward","lineboundary"))})},M=()=>{t.on("click",R=>{let P=R.target;do{if("A"===P.tagName)return void R.preventDefault()}while(P=P.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},$=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",R=>{R.preventDefault()})})},z=Bt;return lr(t)?(c&&(b(),v(),$(),g(),d&&(k(),N(),M())),l&&(p(),C(),E(),O())):(t.on("keydown",R=>{if(h(R)||R.keyCode!==ct.BACKSPACE)return;let P=s.getRng();const B=P.startContainer,I=P.startOffset,tt=r.getRoot();let G=B;if(P.collapsed&&0===I){for(;G.parentNode&&G.parentNode.firstChild===G&&G.parentNode!==tt;)G=G.parentNode;"BLOCKQUOTE"===G.nodeName&&(t.formatter.toggle("blockquote",void 0,G),P=r.createRng(),P.setStart(B,0),P.setEnd(B,0),s.setRng(P))}}),(()=>{const R=P=>{const B=r.create("body"),I=P.cloneContents();return B.appendChild(I),s.serializer.serialize(B,{format:"html"})};t.on("keydown",P=>{const B=P.keyCode;if(!h(P)&&(B===o||B===n)&&t.selection.isEditable()){const I=t.selection.isCollapsed(),tt=t.getBody();if(I&&!r.isEmpty(tt)||!I&&!(G=>{const ht=R(G),rt=r.createRng();return rt.selectNode(t.getBody()),ht===R(rt)})(t.selection.getRng()))return;P.preventDefault(),t.setContent(""),tt.firstChild&&r.isBlock(tt.firstChild)?t.selection.setCursorLocation(tt.firstChild,0):t.selection.setCursorLocation(tt,0),t.nodeChanged()}})})(),zt.windowsPhone||t.on("keyup focusin mouseup",R=>{ct.modifierPressed(R)||(P=>{const B=P.getBody(),I=P.selection.getRng();return I.startContainer===I.endContainer&&I.startContainer===B&&0===I.startOffset&&I.endOffset===B.childNodes.length})(t)||s.normalize()},!0),c&&(b(),v(),t.on("init",()=>{f("DefaultParagraphSeparator",fn(t))}),$(),_(),i.addNodeFilter("br",R=>{let P=R.length;for(;P--;)"Apple-interchange-newline"===R[P].attr("class")&&R[P].remove()}),d?(k(),N(),M()):g()),l&&(t.on("keydown",R=>{if(!h(R)&&R.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const P=s.getNode(),B=P.previousSibling;if("HR"===P.nodeName)return r.remove(P),void R.preventDefault();B&&B.nodeName&&"hr"===B.nodeName.toLowerCase()&&(r.remove(B),R.preventDefault())}}}),p(),(()=>{const R=()=>{const B=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const I=s.getStart();I!==t.getBody()&&(r.setAttrib(I,"style",null),e(B,tt=>{I.setAttributeNode(tt.cloneNode(!0))}))}},P=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);t.on("keypress",B=>{let I;return!(!(h(B)||8!==B.keyCode&&46!==B.keyCode)&&P()&&(I=R(),t.getDoc().execCommand("delete",!1),I(),B.preventDefault(),1))}),r.bind(t.getDoc(),"cut",B=>{if(!h(B)&&P()){const I=R();eo.setEditorTimeout(t,()=>{I()})}})})(),C(),t.on("SetContent ExecCommand",R=>{"setcontent"!==R.type&&"mceInsertLink"!==R.command||e(r.select("a:not([data-mce-block])"),P=>{var B;let I=P.parentNode;const tt=r.getRoot();if(I?.lastChild===P){for(;I&&!r.isBlock(I);){if((null===(B=I.parentNode)||void 0===B?void 0:B.lastChild)!==I||I===tt)return;I=I.parentNode}r.add(I,"br",{"data-mce-bogus":1})}})}),E(),O(),_(),t.on("drop",R=>{var P;const B=null===(P=R.dataTransfer)||void 0===P?void 0:P.getData("text/html");bt(B)&&/^<img[^>]*>$/.test(B)&&t.dispatch("dragend",new window.DragEvent("dragend",R))}))),{refreshContentEditable:z,isHidden:()=>{if(!l||t.removed)return!1;const R=t.selection.getSel();return!R||!R.rangeCount||0===R.rangeCount}}})(i),i.dispatch("PostRender");const c=ok(i);void 0!==c&&(l.dir=c);const d=Dk(i);d&&i.on("BeforeSetContent",u=>{Q.each(d,f=>{u.content=u.content.replace(f,h=>"\x3c!--mce:protected "+escape(h)+"--\x3e")})}),i.on("SetContent",()=>{i.addVisual(i.getBody())}),i.on("compositionstart compositionend",u=>{i.composing="compositionstart"===u.type})})(t),s.fold(()=>{fx(t).then(()=>bp(t))},i=>{t.setProgressState(!0),fx(t).then(()=>{i().then(a=>{t.setProgressState(!1),bp(t),d_(t)},a=>{t.notificationManager.open({type:"error",text:String(a)}),bp(t),d_(t)})})})},aR=ge,vp=Jt.DOM,px=Jt.DOM,hx=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),bx=t=>{const e=t.getElement();return t.inline?hx(null):(n=>{const o=px.create("div");return px.insertAfter(o,n),hx(o,o)})(e)},lR=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const o=Q.trim(qh(n)),r=n.ui.registry.getAll().icons,s={...zd.get("default").icons,...zd.get(o).icons};Mt(s,(i,a)=>{Ot(r,a)||n.ui.registry.addIcon(a,i)})})(t),(n=>{const o=ra(n);if(bt(o)){const r=pi.get(o);n.theme=r(n,pi.urls[o])||{},Vt(n.theme.init)&&n.theme.init(n,pi.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const o=gm(n),r=ha.get(o);n.model=r(n,ha.urls[o])})(t),(n=>{const o=[];X(ed(n),r=>{((s,i,a)=>{const l=ba.get(a),c=ba.urls[a]||s.documentBaseUrl.replace(/\/$/,"");if(a=Q.trim(a),l&&-1===Q.inArray(i,a)){if(s.plugins[a])return;try{const d=l(s,c)||{};s.plugins[a]=d,Vt(d.init)&&(d.init(s,c),i.push(a))}catch(d){((u,f,h)=>{const g=Lo.translate(["Failed to initialize plugin: {0}",f]);Qb(u,"PluginLoadError",{message:g}),Hd(g,h),Ud(u,g)})(s,a,d)}}})(n,o,r.replace(/^\-/,""))})})(t);const e=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,bt(ra(n))?(r=>{const s=r.theme.renderUI;return s?s():bx(r)})(n):Vt(ra(n))?(r=>{const s=r.getElement(),i=ra(r)(r,s);return i.editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||r.id+"_parent"),i.iframeContainer&&i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||r.id+"_iframecontainer"),i.height=i.iframeHeight?i.iframeHeight:s.offsetHeight,i})(n):bx(n)})(t);var n,o;((n,o)=>{const r={show:w.from(o.show).getOr(Bt),hide:w.from(o.hide).getOr(Bt),isEnabled:w.from(o.isEnabled).getOr(ge),setEnabled:s=>{n.mode.isReadOnly()||w.from(o.setEnabled).each(i=>i(s))}};n.ui={...n.ui,...r}})(t,w.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(k_(o=n,ek(o)),(o=>k_(o,Kh(o)))(n)),t.inline?gx(t):((n,o)=>{((r,s)=>{const i=r.translate("Rich Text Area"),a=Mn(T(r.getElement()),"tabindex").bind(xo),l=((c,d,u,f)=>{const h=Ee("iframe");return f.each(g=>pe(h,"tabindex",g)),dn(h,u),dn(h,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:d}),Xe(h,"tox-edit-area__iframe"),h})(r.id,i,ME(r),a).dom;l.onload=()=>{l.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=l,r.iframeHTML=(c=>{let d=IE(c)+"<html><head>";zh(c)!==c.documentBaseUrl&&(d+='<base href="'+c.documentBaseURI.getURI()+'" />'),d+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const u=FE(c),f=jE(c),h=c.translate(Sk(c));return Uh(c)&&(d+='<meta http-equiv="Content-Security-Policy" content="'+Uh(c)+'" />'),d+=`</head><body id="${u}" class="mce-content-body ${f}" data-id="${c.id}" aria-label="${h}"><br></body></html>`,d})(r),vp.add(s.iframeContainer,l)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=vp.isHidden(o.editorContainer)),n.getElement().style.display="none",vp.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,i=()=>{r.contentDocument=s.contentDocument,gx(r)};if(Gk(r)||zt.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),i()}else{const l=((t,e,n,o)=>((r,s,i,a,l)=>{const c=(d=i,u=a,f=>{d(f)&&u((h=>{const g=T(Dc(h).getOr(h.target)),b=()=>h.stopPropagation(),p=()=>h.preventDefault(),v=hr(p,b);return{target:g,x:h.clientX,y:h.clientY,stop:b,prevent:p,kill:v,raw:h}})(f))});var d,u;return r.dom.addEventListener(s,c,!1),{unbind:dt(nl,r,s,c,!1)}})(t,"load",n,()=>{l.unbind(),i()}))(T(s),0,aR);s.srcdoc=r.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},hi=Jt.DOM,vx=t=>"-"===t.charAt(0),yx=(t,e,n)=>w.from(e).filter(o=>Bn(o)&&!zd.has(o)).map(o=>({url:`${t.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:w.some(o)})),_x=Ln().deviceType,Cx=_x.isPhone(),dR=_x.isTablet(),ac=t=>{if(ve(t))return[];{const e=Gt(t)?t:t.split(/[ ,]/),n=jt(e,Dn);return Et(n,Bn)}},yp=(t,e)=>Ot(t.sections(),e),mR=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Zt(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),fR=(t,e)=>{var n;const o=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?Q.extend({},t.external_plugins,o):o},hR=(t,e)=>{const n=t.selection,o=t.dom;return/^ | $/.test(e)?((r,s,i)=>{const a=T(r.getRoot());return i=Fl(a,H.fromRangeStart(s))?i.replace(/^ /,"&nbsp;"):i.replace(/^&nbsp;/," "),jl(a,H.fromRangeEnd(s))?i.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):i.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),e):e},yu=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:o}=(r=>{if("string"!=typeof r){const s=Q.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(e);eg(t,{...o,content:hR(t,n),format:"html",set:!1,selection:!0}).each(r=>{const s=(a=r.content,l=o,lg(t).editor.insertContent(a,l));var a,l;ng(t,s,r),t.addVisual()})}},bR={"font-size":"size","font-family":"face"},vR=Mi("font"),wx=t=>(e,n)=>w.from(n).map(T).filter(Ye).bind(o=>{return(r=t,s=e,i=o.dom,Df(T(i),a=>{return go(l=a,r).orThunk(()=>vR(l)?Zt(bR,r).bind(c=>Mn(l,c)):w.none());var l},a=>Ht(T(s),a))).or(((r,s)=>w.from(Jt.DOM.getStyle(s,r,!0)))(t,o.dom));var r,s,i}).getOr(""),yR=wx("font-size"),_R=hr(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),wx("font-family")),CR=t=>rn(t.getBody()).bind(e=>{const n=e.container();return w.from(U(n)?n.parentNode:n)}),_p=(t,e)=>{return n=t,o=Ba(w.some,e),(r=n,w.from(r.selection.getRng()).bind(s=>{const i=r.getBody();return s.startContainer===i&&0===s.startOffset?w.none():w.from(r.selection.getStart(!0))})).orThunk(dt(CR,n)).map(T).filter(Ye).bind(o);var n,o,r},xx=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const o=Q.explode(t.options.get("font_size_style_values")),r=Q.explode(t.options.get("font_size_classes"));return r.length>0?r[n-1]||e:o[n-1]||e}return e}return e},wR=t=>{const e=t.split(/\s*,\s*/);return jt(e,n=>-1===n.indexOf(" ")||xe(n,'"')||xe(n,"'")?n:`'${n}'`).join(",")},ER=["toggleview"],Ex=t=>ut(ER,t.toLowerCase());class kx{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,o,r){const s=this.editor,i=e.toLowerCase(),a=r?.skip_focus;if(s.removed||("mcefocus"!==i&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)||a?Xm(c=s).each(d=>c.selection.setRng(d)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:o}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[i];return!!Vt(l)&&(l(i,n,o),s.dispatch("ExecCommand",{command:e,ui:n,value:o}),!0)}queryCommandState(e){if(!Ex(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),o=this.commands.state[n];return!!Vt(o)&&o(n)}queryCommandValue(e){if(!Ex(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),o=this.commands.value[n];return Vt(o)?o(n):""}addCommands(e,n="exec"){const o=this.commands;Mt(e,(r,s)=>{X(s.toLowerCase().split(","),i=>{o[n][i]=r})})}addCommand(e,n,o){const r=e.toLowerCase();this.commands.exec[r]=(s,i,a)=>n.call(o??this.editor,i,a)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,o){this.commands.state[e.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(e,n,o){this.commands.value[e.toLowerCase()]=()=>n.call(o??this.editor)}}const bi="data-mce-contenteditable",Cp=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},_u=(t,e)=>{t.dom.contentEditable=e?"true":"false"},vi=t=>t.readonly,Sx=t=>{t.parser.addAttributeFilter("contenteditable",e=>{vi(t)&&X(e,n=>{n.attr(bi,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(bi,e=>{vi(t)&&X(e,n=>{n.attr("contenteditable",n.attr(bi))})}),t.serializer.addTempAttr(bi)},SR=["copy"],NR=Q.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class wp{static isNative(e){return!!NR[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ne}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const o=e.toLowerCase(),r=Qu(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let i=0,a=s.length;i<a;i++){const l=s[i];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(!1===l.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,n,o,r){if(!1===n&&(n=ne),n){const s={func:n,removed:!1};r&&Q.extend(s,r);const i=e.toLowerCase().split(" ");let a=i.length;for(;a--;){const l=i[a];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=o?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(e,n){if(e){const o=e.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let i=this.bindings[s];if(!s)return Mt(this.bindings,(a,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(i){if(n){const a=xs(i,l=>l.func===n);i=a.fail,this.bindings[s]=i,X(a.pass,l=>{l.removed=!0})}else i.length=0;i.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else Mt(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(e,n,o){return this.on(e,n,o,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const lc=t=>(t._eventDispatcher||(t._eventDispatcher=new wp({scope:t,toggleEvent:(e,n)=>{wp.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),xp={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const o=this;if(o.removed&&"remove"!==t&&"detach"!==t)return Qu(t.toLowerCase(),e??{},o);const r=lc(o).dispatch(t,e);if(!1!==n&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(t,r,!1),s=s.parent?s.parent():void 0}return r},on(t,e,n){return lc(this).on(t,e,n)},off(t,e){return lc(this).off(t,e)},once(t,e){return lc(this).once(t,e)},hasEventListeners(t){return lc(this).has(t)}},Cu=Jt.DOM;let yi;const wu=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=Xh(t);return n?(t.eventRoot||(t.eventRoot=Cu.select(n)[0]),t.eventRoot):t.getBody()},Nx=(t,e,n)=>{var o;(o=t).hidden||vi(o)?vi(t)&&((o,r)=>{if("click"!==r.type||ct.metaKeyPressed(r))ut(SR,r.type)&&o.dispatch(r.type,r);else{const s=T(r.target);(i=o,a=s,Ao(a,"a",l=>Ht(l,T(i.getBody()))).bind(l=>Mn(l,"href"))).each(i=>{if(r.preventDefault(),/^#/.test(i)){const a=o.dom.select(`${i},[name="${Go(i,"#")}"]`);a.length&&o.selection.scrollIntoView(a[0],!0)}else window.open(i,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var i,a})(t,n):t.dispatch(e,n)},Ax=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=wu(t,e);if(Xh(t)){if(yi||(yi={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||yi&&(Mt(yi,(r,s)=>{t.dom.unbind(wu(t,s))}),yi=null)})),yi[e])return;const o=r=>{const s=r.target,i=t.editorManager.get();let a=i.length;for(;a--;){const l=i[a].getBody();(l===s||Cu.isChildOf(s,l))&&Nx(i[a],e,r)}};yi[e]=o,Cu.bind(n,e,o)}else{const o=r=>{Nx(t,e,r)};Cu.bind(n,e,o),t.delegates[e]=o}},Ox={...xp,bindPendingEventDelegates(){const t=this;Q.each(t._pendingNativeEvents,e=>{Ax(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?Ax(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(wu(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(Mt(t.delegates,(o,r)=>{t.dom.unbind(wu(t,r),r,o)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},AR=t=>bt(t)?{value:t.split(/[ ,]/),valid:!0}:pr(t,bt)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Tx=(t,e)=>t+(Kr(e.message)?"":`. ${e.message}`),Rx=t=>t.valid,Ep=(t,e,n="")=>{const o=e(t);return qo(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},OR=["design","readonly"],Dx=(t,e,n,o)=>{const r=n[e.get()],s=n[o];try{s.activate()}catch(i){return void console.error(`problem while activating editor mode ${o}:`,i)}var i;r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((t,e)=>{const n=T(t.getBody());var o,r,s;s=e,Ya(o=n,r="mce-content-readonly")&&!s?xr(o,r):s&&Xe(o,r),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(o=>{w.from(o.selection.getNode()).each(r=>{r.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,_u(n,!1),X(x(n,'*[contenteditable="true"]'),o=>{pe(o,bi,"true"),_u(o,!1)})):(t.readonly=!1,t.hasEditableRoot()&&_u(n,!0),X(x(n,`*[${bi}="true"]`),o=>{Oe(o,bi),_u(o,!0)}),Cp(t,"StyleWithCSS",!1),Cp(t,"enableInlineTableEditing",!1),Cp(t,"enableObjectResizing",!1),(o=>li(o)||(r=>{const s=Ge(T(r.getElement()));return Km(s).filter(i=>!Qm(i.dom)&&_d(r,i.dom)).isSome()})(o))(t)&&t.focus(),(o=>{o.selection.setRng(o.selection.getRng())})(t),t.nodeChanged())})(t,s.editorReadOnly),e.set(o),(i=t).dispatch("SwitchMode",{mode:o})},kp=Q.each,Sp=Q.explode,TR={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Bx=Q.makeMap("alt,ctrl,shift,meta,access"),RR=t=>{const e={},n=zt.os.isMacOS()||zt.os.isiOS();kp(Sp(t.toLowerCase(),"+"),s=>{s in Bx?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=TR[s]||s.toUpperCase().charCodeAt(0))});const o=[e.keyCode];let r;for(r in Bx)e[r]?o.push(r):e[r]=!1;return e.id=o.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class Lx{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(kp(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,o,r){const s=this,i=s.normalizeCommandFunc(o);return kp(Sp(Q.trim(e)),a=>{const l=s.createShortcut(a,n,i,r);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,o=e;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:Q.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(e,n,o,r){const s=Q.map(Sp(e,">"),RR);return s[s.length-1]=Q.extend(s[s.length-1],{func:o,scope:r||this.editor}),Q.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const DR=()=>{const t=(()=>{const e={},n={},o={},r={},s={},i={},a={},l={},c=(d,u)=>(f,h)=>{d[f.toLowerCase()]={...h,type:u}};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(o,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(i,"contexttoolbar"),addContextForm:c(i,"contextform"),addSidebar:c(a,"sidebar"),addView:c(l,"views"),addIcon:(d,u)=>r[d.toLowerCase()]=u,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:i,sidebars:a,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},_i=Jt.DOM,Px=Q.extend,BR=Q.each;class xu{constructor(e,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,Px(this,Ox);const r=this;this.id=e,this.hidden=!1;const s=((t,e,n,o,r)=>{var s;const i=t?{mobile:mR(null!==(s=r.mobile)&&void 0!==s?s:{},e)}:{},a=((t,e)=>{const n=((s,i)=>{const a={},l={};return ks(s,(c,d)=>ut(t,d),$e(a),$e(l)),{t:a,f:l}})(e);return r=n.f,{sections:ot(n.t),options:ot(r)};var r})(["mobile"],zg(i,r)),l=Q.extend(n,o,a.options(),t&&yp(a,"mobile")?((c,d,u={})=>{const f=c.sections(),h=Zt(f,d).getOr({});return Q.extend({},u,h)})(a,"mobile"):{},{external_plugins:fR(o,a.options())});return((c,d,u,f)=>{const h=ac(u.forced_plugins),g=ac(f.plugins),b=yp(_=d,"mobile")?_.sections().mobile:{},p=((_,C,E,k)=>_&&yp(C,"mobile")?k:E)(c,d,g,b.plugins?ac(b.plugins):g),v=((_,C)=>[...ac(_),...ac(C)])(h,p);var _;return Q.extend(f,{forced_plugins:h,plugins:v})})(t,a,o,l)})(Cx||dR,Cx,g=n,o.defaultOptions,g);var g;this.options=((h,g)=>{const b={},p={},v=(C,E,k)=>{const N=Ep(E,k);return Rx(N)?(p[C]=N.value,!0):(console.warn(Tx(`Invalid value passed for the ${C} option`,N)),!1)},_=C=>Ot(b,C);return{register:(C,E)=>{const k=bt(E.processor)?(O=>{const M=(()=>{switch(O){case"array":return Gt;case"boolean":return qo;case"function":return Vt;case"number":return _n;case"object":return Ae;case"string":return bt;case"string[]":return AR;case"object[]":return $=>pr($,Ae);case"regexp":return $=>$o($,RegExp);default:return ge}})();return $=>Ep($,M,`The value must be a ${O}.`)})(E.processor):E.processor,N=((O,M,$)=>{if(!we(M)){const z=Ep(M,$);if(Rx(z))return z.value;console.error(Tx(`Invalid default value passed for the "${O}" option`,z))}})(C,E.default,k);b[C]={...E,default:N,processor:k},Zt(p,C).orThunk(()=>Zt(g,C)).each(O=>v(C,O,k))},isRegistered:_,get:C=>Zt(p,C).orThunk(()=>Zt(b,C).map(E=>E.default)).getOrUndefined(),set:(C,E)=>{if(_(C)){const k=b[C];return k.immutable?(console.error(`"${C}" is an immutable option and cannot be updated`),!1):v(C,E,k.processor)}return console.warn(`"${C}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:C=>{const E=_(C);return E&&delete p[C],E},isSet:C=>Ot(p,C)}})(0,s),(h=>{const g=h.options.register;g("id",{processor:"string",default:h.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:h.documentBaseUrl}),g("body_id",{processor:jh(h,"tinymce"),default:"tinymce"}),g("body_class",{processor:jh(h),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:b=>{const p=bt(b)&&Bn(b);return p?{value:b,valid:p}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:b=>{const p=ut(["block","linebreak","invert","default"],b);return p?{value:b,valid:p}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:b=>qo(b)||bt(b)?{valid:!0,value:b}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:b=>{const p=!1===b||bt(b)||pr(b,bt);return p?bt(b)?{value:jt(b.split(","),Dn),valid:p}:Gt(b)?{value:b,valid:p}:!1===b?{value:[],valid:p}:{value:b,valid:p}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:pm(h)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:b=>{const p=bt(b)||pr(b,bt);return p?{value:Gt(b)?b:jt(b.split(","),Dn),valid:p}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:b=>{const p=qo(b)||bt(b);return p?!1===b||um.isiPhone()||um.isiPad()?{value:"",valid:p}:{value:!0===b?"table,img,figure.image,div,video,iframe":b,valid:p}:{valid:!1,message:"Must be boolean or a string"}},default:!LE}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"object"}),g("service_message",{processor:"string"}),g("theme",{processor:b=>!1===b||bt(b)||Vt(b),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:b=>{const p=!1===b||bt(b);return p?{value:!1===b?"":b,valid:p}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:h.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:h.convertURL}),g("url_converter_scope",{processor:"object",default:h}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:"string"}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:mm}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:mm}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:mm}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:b=>bt(b)||!0===b}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:b=>pr(b,Ae)||!1===b?{value:Ih(!1===b?[]:b),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),g("text_patterns_lookup",{processor:b=>{return Vt(b)?{value:(p=b,v=>{const _=p(v);return Ih(_)}),valid:!0}:{valid:!1,message:"Must be a single function"};var p},default:b=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:b=>pr(b,Fh)?{value:b,valid:!0}:Fh(b)?{value:[b],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!1}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:b=>{const p=ut(["inherited","collapsed","expanded"],b);return p?{value:b,valid:p}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:b=>{const p=ut(["inherited","collapsed","expanded"],b);return p?{value:b,valid:p}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),h.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:Lo.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:PE.getAttrib(h.getElement(),"placeholder")})})})(r);const i=this.options.get;i("deprecation_warnings")&&((h,g)=>{((b,p)=>{const v=(t=>{const e=v_(t,bA),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),Tn(e)})(b),_=(t=>y_(t,yA))(p),C=_.length>0,E=v.length>0,k="mobile"===p.theme;if(C||E||k){const N="\n- ",O=k?`\n\nThemes:${N}mobile`:"",M=C?`\n\nPlugins:${N}${_.join(N)}`:"",$=E?`\n\nOptions:${N}${v.join(N)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+O+M+$)}})(h,g),((b,p)=>{const v=(t=>v_(t,vA))(b),_=(t=>y_(t,b_.map(e=>e.name)))(p),C=_.length>0,E=v.length>0;if(C||E){const k="\n- ",N=C?`\n\nPlugins:${k}${_.map(EA).join(k)}`:"",O=E?`\n\nOptions:${k}${v.join(k)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+N+O)}})(h,g)})(n,s);const a=i("suffix");a&&(o.suffix=a),this.suffix=o.suffix;const l=i("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const c=fm(r);c&&(Br.ScriptLoader._setReferrerPolicy(c),Jt.DOM.styleSheetLoader._setReferrerPolicy(c));const d=Qh(r);et(d)&&Jt.DOM.styleSheetLoader._setContentCssCors(d),nn.languageLoad=i("language_load"),nn.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new Fo(zh(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=pm(r),this.hasVisual=Ek(r),this.shortcuts=new Lx(this),this.editorCommands=new kx(this),(t=>{var e;(t=>{(e=>{const n=o=>()=>{X("left,center,right,justify".split(","),r=>{o!==r&&e.formatter.remove("align"+r)}),"none"!==o&&(e.formatter.toggle("align"+o,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=o=>()=>{const r=e.selection,s=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return ce(s,i=>et(e.formatter.matchNode(i,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(zt.os.isMacOS()||zt.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;e.dom.getParent(e.selection.getNode(),i=>!A(i)||s++!==r||(e.selection.select(i),!1),e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),It);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{yu(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{yu(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{yu(e,r)},mceInsertContent:(n,o,r)=>{yu(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Mk(e))}})})(t),(e=>{const n=(o,r,s)=>{const i=bt(s)?{href:s}:s,a=e.dom.getParent(e.selection.getNode(),"a");Ae(i)&&bt(i.href)&&(i.href=i.href.replace(/ /g,"%20"),a&&i.href||e.formatter.remove("link"),i.href&&e.formatter.apply("link",i,a))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");return void(o&&e.dom.remove(o,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{LC(e,"indent")},Outdent:()=>{PC(e)}}),e.editorCommands.addCommands({Outdent:()=>RC(e)},"state")})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{du(jw,e)},mceInsertNewLine:(n,o,r)=>{Ww(e,r)},InsertLineBreak:(n,o,r)=>{du(Hw,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{n.getDoc().execCommand(o);const r=n.dom.getParent(n.selection.getNode(),"ol,ul");if(r){const s=r.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const i=n.selection.getBookmark();n.dom.split(s,r),n.selection.moveToBookmark(i)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{const r=n.dom.getParent(n.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===o&&"UL"===r.tagName||"insertorderedlist"===o&&"OL"===r.tagName)}},"state")})(e)})(t),(e=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,i)=>{o(r,{value:i})},BackColor:(r,s,i)=>{o("hilitecolor",{value:i})},FontName:(r,s,i)=>{((a,l)=>{const c=xx(a,l);a.formatter.toggle("fontname",{value:wR(c)}),a.nodeChanged()})(n,i)},FontSize:(r,s,i)=>{var a;(a=n).formatter.toggle("fontsize",{value:xx(a,i)}),a.nodeChanged()},LineHeight:(r,s,i)=>{var a;(a=n).formatter.toggle("lineheight",{value:String(i)}),a.nodeChanged()},Lang:(r,s,i)=>{var a;o(r,{value:i.code,customValue:null!==(a=i.customCode)&&void 0!==a?a:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,i)=>{o(bt(i)?i:"p")},mceToggleFormat:(r,s,i)=>{o(i)}})})(e),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return _p(r=n,s=>_R(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return _p(r=n,s=>yR(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return _p(r=n,s=>{const i=T(r.getBody());return Df(s,l=>go(l,"line-height"),dt(Ht,i)).getOrThunk(()=>{const l=parseFloat(fo(s,"line-height")),c=parseFloat(fo(s,"font-size"));return String(l/c)})}).getOr("");var r})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??e.selection.getNode();if(s!==e.getBody()){const i=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(i)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{var s;(s=e).removed||(!0===r?tf(s):(a=>{const l=a.selection,c=a.getBody();let d=l.getRng();a.quirks.refreshContentEditable(),et(a.bookmark)&&!li(a)&&Xm(a).each(f=>{a.selection.setRng(f),d=f});const u=(f=a,h=l.getNode(),f.dom.getParent(h,g=>"true"===f.dom.getContentEditable(g)));var f,h;if(u&&a.dom.isChildOf(u,c))return Zm(u),Av(a,d),void tf(a);a.inline||(zt.browser.isOpera()||Zm(c),a.getWin().focus()),(zt.browser.isFirefox()||a.inline)&&(Zm(c),Av(a,d)),tf(a)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const u=i("cache_suffix");u&&(zt.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:DR(),styleSheetLoader:void 0,show:Bt,hide:Bt,setEnabled:Bt,isEnabled:ge},this.mode=(h=>{const g=Re("design"),b=Re({design:{activate:Bt,deactivate:Bt,editorReadOnly:!1},readonly:{activate:Bt,deactivate:Bt,editorReadOnly:!0}});return(p=h).serializer?Sx(p):p.on("PreInit",()=>{Sx(p)}),(p=>{p.on("ShowCaret",v=>{vi(p)&&v.preventDefault()}),p.on("ObjectSelected",v=>{vi(p)&&v.preventDefault()})})(h),{isReadOnly:()=>vi(h),set:p=>((v,_,C,E)=>{if(E!==C.get()){if(!Ot(_,E))throw new Error(`Editor mode '${E}' is invalid`);v.initialized?Dx(v,C,_,E):v.on("init",()=>Dx(v,C,_,E))}})(h,b.get(),g,p),get:()=>g.get(),register:(p,v)=>{b.set(((_,C,E)=>{if(ut(OR,C))throw new Error(`Cannot override default mode ${C}`);return{..._,[C]:{...E,deactivate:()=>{try{E.deactivate()}catch(k){console.error(`problem while deactivating editor mode ${C}:`,k)}}}}})(b.get(),p,v))}};var p})(r),o.dispatch("SetupEditor",{editor:this});const f=Nk(r);Vt(f)&&f.call(r,r)}render(){(e=>{const n=e.id;Lo.setCode(Vh(e));const o=()=>{hi.unbind(window,"ready",o),e.render()};if(!Xs.Event.domLoaded)return void hi.bind(window,"ready",o);if(!e.getElement())return;const r=T(e.getElement()),s=Sc(r);var l;e.on("remove",()=>{Ur(r.dom.attributes,a=>Oe(r,a.name)),dn(r,s)}),e.ui.styleSheetLoader=zp.forElement(r,{contentCssCors:Qh(l=e),referrerPolicy:fm(l)}),pm(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const i=e.getElement().form||hi.getParent(n,"form");i&&(e.formElement=i,pk(e)&&!Lt(e.getElement())&&(hi.insertAfter(hi.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=a=>{e.dispatch(a.type,a)},hi.bind(i,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!hk(e)||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),i._mceOldSubmit(i)))),e.windowManager=x_(e),e.notificationManager=w_(e),"xml"===e.options.get("encoding")&&e.on("GetContent",a=>{a.save&&(a.content=hi.encode(a.content))}),bk(e)&&e.on("submit",()=>{e.initialized&&e.save()}),vk(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=Br.ScriptLoader,o=()=>{!t.removed&&(r=>{const s=ra(r);return!bt(s)||et(pi.get(s))})(t)&&(r=>{const s=gm(r);return et(ha.get(s))})(t)&&lR(t)};((r,s)=>{const i=ra(r);if(bt(i)&&!vx(i)&&!Ot(pi.urls,i)){const a=lk(r),l=a?r.documentBaseURI.toAbsolute(a):`themes/${i}/theme${s}.js`;pi.load(i,l).catch(()=>{Vl(r,"ThemeLoadError",Wl("theme",l,i))})}})(t,e),((r,s)=>{const i=gm(r);if("plugin"!==i&&!Ot(ha.urls,i)){const a=ck(r),l=bt(a)?r.documentBaseURI.toAbsolute(a):`models/${i}/model${s}.js`;ha.load(i,l).catch(()=>{Vl(r,"ModelLoadError",Wl("model",l,i))})}})(t,e),((r,s)=>{const i=Vh(s),a=ZE(s);if(!Lo.hasCode(i)&&"en"!==i){const l=Bn(a)?a:`${s.editorManager.baseURL}/langs/${i}.js`;r.add(l).catch(()=>{Vl(s,"LanguageLoadError",Wl("language",l,i))})}})(n,t),((r,s,i)=>{const a=yx(s,"default",i),l=(c=s,w.from(KE(c)).filter(Bn).map(d=>({url:d,name:w.none()}))).orThunk(()=>yx(s,qh(s),""));var c;X((c=>{const d=[],u=f=>{d.push(f)};for(let f=0;f<c.length;f++)c[f].each(u);return d})([a,l]),c=>{r.add(c.url).catch(()=>{var d,u,f;d=s,u=c.url,f=c.name.getOrUndefined(),Vl(d,"IconsLoadError",Wl("icons",u,f))})})})(n,t,e),((r,s)=>{const i=(a,l)=>{ba.load(a,l).catch(()=>{Vl(r,"PluginLoadError",Wl("plugin",l,a))})};Mt(wk(r),(a,l)=>{i(l,a),r.options.set("plugins",ed(r).concat(l))}),X(ed(r),a=>{!(a=Q.trim(a))||ba.urls[a]||vx(a)||i(a,`plugins/${a}/plugin${s}.js`)})})(t,e),n.loadQueue().then(o,o)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return li(this)}translate(e){return Lo.translate(e)}getParam(e,n,o){const r=this.options;return r.isRegistered(e)||(et(o)?r.register(e,{processor:o,default:n}):r.register(e,{processor:ge,default:n})),r.isSet(e)||we(n)?r.get(e):n}hasPlugin(e,n){return!(!ut(ed(this),e)||n&&void 0===ba.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,o){this.editorCommands.addCommand(e,n,o)}addQueryStateHandler(e,n,o){this.editorCommands.addQueryStateHandler(e,n,o)}addQueryValueHandler(e,n,o){this.editorCommands.addQueryValueHandler(e,n,o)}addShortcut(e,n,o,r){this.shortcuts.add(e,n,o,r)}execCommand(e,n,o,r){return this.editorCommands.execCommand(e,n,o,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(_i.show(e.getContainer()),_i.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(_i.hide(e.getContainer()),_i.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...e,load:!0},s=Lt(o)?o.value:o.innerHTML,i=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),i}return""}save(e={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...e,save:!0,element:o};let s=n.getContent(r);const i={...r,content:s};if(i.no_events||n.dispatch("SaveContent",i),"raw"===i.format&&n.dispatch("RawSaveContent",i),s=i.content,Lt(o))o.value=s;else{!e.is_removing&&n.inline||(o.innerHTML=s);const a=_i.getParent(n.id,"form");a&&BR(a.elements,l=>l.name!==n.id||(l.value=s,!1))}return i.element=r.element=o=null,!1!==i.set_dirty&&n.setDirty(!1),s}setContent(e,n){return cg(this,e,n)}getContent(e){return((n,o={})=>{const r=(s=o,i=o.format?o.format:"html",{...s,format:i,get:!0,getInner:!0});var s,i;return Qy(n,r).fold(He,s=>{const i=(l=s,lg(n).editor.getContent(l));var l;return Jy(n,i,s)})})(this,e)}insertContent(e,n){n&&(e=Px({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?cg(this,this.startContent,{format:"raw"}):cg(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||_i.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=_i.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const o=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:o?.body)&&void 0!==n?n:null}convertURL(e,n,o){const r=this,s=r.options.get,i=Ok(r);return Vt(i)?i.call(r,e,o,!0,n):!s("convert_urls")||"link"===o||Ae(o)&&"LINK"===o.nodeName||0===e.indexOf("file:")||0===e.length?e:s("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,o)=>{var s;s=o,ye(this).editor.addVisual(s)})(0,e)}setEditableRoot(e){var n,o;(n=this)._editableRoot!==(o=e)&&(n._editableRoot=o,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:o}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),s=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&et(s?.nextSibling)&&Fd.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&r&&Fd.setStyle((i=e).id,"display",i.orgDisplay),(i=>{i.dispatch("detach")})(e),Fd.remove(e.getContainer()),jd(n),jd(o),e.destroy()}var i})(this)}destroy(e){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),jd(r),jd(s)),(i=>{const a=i.formElement;a&&(a._mceOldSubmit&&(a.submit=a._mceOldSubmit,delete a._mceOldSubmit),Fd.unbind(a,"submit reset",i.formEventDelegate))})(n),(i=>{const a=i;a.contentAreaContainer=a.formElement=a.container=a.editorContainer=null,a.bodyElement=a.contentDocument=a.contentWindow=null,a.iframeElement=a.targetElm=null;const l=i.selection;l&&(a.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Sa=Jt.DOM,Eu=Q.each;let ku,Mx=!1,hn=[];const Su=t=>{const e=t.type;Eu(vs.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},Ix=t=>{if(t!==Mx){const e=Jt.DOM;t?(e.bind(window,"resize",Su),e.bind(window,"scroll",Su)):(e.unbind(window,"resize",Su),e.unbind(window,"scroll",Su)),Mx=t}},Fx=t=>{const e=hn;return hn=Et(hn,n=>t!==n),vs.activeEditor===t&&(vs.activeEditor=hn.length>0?hn[0]:null),vs.focusedEditor===t&&(vs.focusedEditor=null),e.length!==hn.length},LR="CSS1Compat"!==document.compatMode,vs={...xp,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"5.1",releaseDate:"2023-06-19",i18n:Lo,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",o=Fo.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,n=r.suffix;else{const i=document.getElementsByTagName("script");for(let a=0;a<i.length;a++){const l=i[a].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const a=document.currentScript.src;-1!==a.indexOf(".min")&&(n=".min"),e=a.substring(0,a.lastIndexOf("/"))}}var s;t.baseURL=new Fo(o).toAbsolute(e),t.documentBaseURL=o,t.baseURI=new Fo(t.baseURL),t.suffix=n,(s=t).on("AddEditor",dt(US,s)),s.on("RemoveEditor",dt(HS,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const o=t.plugin_base_urls;void 0!==o&&Mt(o,(r,s)=>{nn.PluginManager.urls[s]=r})},init(t){const e=this;let n;const o=Q.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=i=>{n=i};const s=()=>{let i=0;const a=[];let l;var c;Sa.unbind(window,"ready",s),(c=>{const d=t.onpageload;d&&d.apply(e,[])})(),l=((c,d)=>{const u=[],f=Vt(d)?h=>ce(u,g=>d(g,h)):h=>ut(u,h);for(let h=0,g=c.length;h<g;h++){const b=c[h];f(b)||u.push(b)}return u})((c=t,zt.browser.isIE()||zt.browser.isEdge()?(Hd("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):LR?(Hd("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):bt(c.selector)?Sa.select(c.selector):et(c.target)?[c.target]:[])),Q.each(l,c=>{var d;(d=e.get(c.id))&&d.initialized&&!(d.getContainer()||d.getBody()).parentNode&&(Fx(d),d.unbindAllNativeEvents(),d.destroy(!0),d.removed=!0)}),l=Q.grep(l,c=>!e.get(c.id)),0===l.length?r([]):Eu(l,c=>{t.inline&&c.tagName.toLowerCase()in o?Hd("Could not initialize inline editor on invalid inline target element",c):((d,u,f)=>{const h=new xu(d,u,e);a.push(h),h.on("init",()=>{++i===l.length&&r(a)}),h.targetElm=h.targetElm||f,h.render()})((d=>{let u=d.id;return u||(u=Zt(d,"name").filter(f=>!Sa.get(f)).getOrThunk(Sa.uniqueId),d.setAttribute("id",u)),u})(c),t,c)})};return Sa.bind(window,"ready",s),new Promise(i=>{n?i(n):r=a=>{i(a)}})},get(t){return 0===arguments.length?hn.slice(0):bt(t)?de(hn,e=>e.id===t).getOr(null):_n(t)&&hn[t]?hn[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&hn.push(t),Ix(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),ku||(ku=o=>{const r=e.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",ku))),t},createEditor(t,e){return this.add(new xu(t,e,this))},remove(t){const e=this;let n;if(t){if(!bt(t))return n=t,le(e.get(n.id))?null:(Fx(n)&&e.dispatch("RemoveEditor",{editor:n}),0===hn.length&&window.removeEventListener("beforeunload",ku),n.remove(),Ix(hn.length>0),n);Eu(Sa.select(t),o=>{n=e.get(o.id),n&&e.remove(n)})}else for(let o=hn.length-1;o>=0;o--)e.remove(hn[o])},execCommand(t,e,n){var o;const r=this,s=Ae(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return r.get(s)||new xu(s,n.options,r).render(),!0;case"mceRemoveEditor":{const i=r.get(s);return i&&i.remove(),!0}case"mceToggleEditor":{const i=r.get(s);return i?(i.isHidden()?i.show():i.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{Eu(hn,t=>{t.save()})},addI18n:(t,e)=>{Lo.add(t,e)},translate:t=>Lo.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new Fo(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Fo(this.baseURL)}};vs.setup();const PR=(()=>{const t=is();return{FakeClipboardItem:e=>({items:e,types:an(e),getType:n=>Zt(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),jx=Math.min,Na=Math.max,Nu=Math.round,zx=(t,e,n)=>{let o=e.x,r=e.y;const s=t.w,i=t.h,a=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(r+=l),"r"===c[1]&&(o+=a),"c"===c[0]&&(r+=Nu(l/2)),"c"===c[1]&&(o+=Nu(a/2)),"b"===c[3]&&(r-=i),"r"===c[4]&&(o-=s),"c"===c[3]&&(r-=Nu(i/2)),"c"===c[4]&&(o-=Nu(s/2)),Aa(o,r,s,i)},Aa=(t,e,n,o)=>({x:t,y:e,w:n,h:o}),MR={inflate:(t,e,n)=>Aa(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:zx,findBestRelativePosition:(t,e,n,o)=>{for(let r=0;r<o.length;r++){const s=zx(t,e,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(t,e)=>{const n=Na(t.x,e.x),o=Na(t.y,e.y),r=jx(t.x+t.w,e.x+e.w),s=jx(t.y+t.h,e.y+e.h);return r-n<0||s-o<0?null:Aa(n,o,r-n,s-o)},clamp:(t,e,n)=>{let o=t.x,r=t.y,s=t.x+t.w,i=t.y+t.h;const a=e.x+e.w,l=e.y+e.h,c=Na(0,e.x-o),d=Na(0,e.y-r),u=Na(0,s-a),f=Na(0,i-l);return o+=c,r+=d,n&&(s+=c,i+=d,o-=u,r-=f),s-=u,i-=f,Aa(o,r,s-o,i-r)},create:Aa,fromClientRect:t=>Aa(t.left,t.top,t.width,t.height)},IR=(()=>{const t={},e={};return{load:(n,o)=>{const r=`Script at URL "${o}" failed to load`,s=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const i=new Promise((a,l)=>{const c=((d,u,f=1e3)=>{let h=!1,g=null;const b=_=>(...C)=>{h||(h=!0,null!==g&&(clearTimeout(g),g=null),_.apply(null,C))},p=b(d),v=b(u);return{start:(..._)=>{h||null!==g||(g=setTimeout(()=>v.apply(null,_),f))},resolve:p,reject:v}})(a,l);e[n]=c.resolve,Br.ScriptLoader.loadScript(o).then(()=>c.start(s),()=>c.reject(r))});return t[n]=i,i}},add:(n,o)=>{void 0!==e[n]&&(e[n](o),delete e[n]),t[n]=Promise.resolve(o)},unload:n=>{delete t[n]}}})();let cc;try{const t="__storage_test__";cc=window.localStorage,cc.setItem(t,t),cc.removeItem(t)}catch{cc=(()=>{let e={},n=[];const o={getItem:r=>e[r]||null,setItem:(r,s)=>{n.push(r),e[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const FR={geom:{Rect:MR},util:{Delay:eo,Tools:Q,VK:ct,URI:Fo,EventDispatcher:wp,Observable:xp,I18n:Lo,LocalStorage:cc,ImageUploader:t=>{const e=S_(),n=A_(t,e);return{upload:(o,r=!0)=>n.upload(o,r?N_(t):void 0)}}},dom:{EventUtils:Xs,TreeWalker:y,TextSeeker:Js,DOMUtils:Jt,ScriptLoader:Br,RangeUtils:ai,Serializer:h_,StyleSheetLoader:jp,ControlSelection:rv,BookmarkManager:Bl,Selection:p_,Event:Xs.Event},html:{Styles:Gu,Entities:rs,Node:pn,Schema:ss,DomParser:pa,Writer:Hv,Serializer:us},Env:zt,AddOnManager:nn,Annotator:Xb,Formatter:R_,UndoManager:B_,EditorCommands:kx,WindowManager:x_,NotificationManager:w_,EditorObservable:Ox,Shortcuts:Lx,Editor:xu,FocusManager:Nv,EditorManager:vs,DOM:Jt.DOM,ScriptLoader:Br.ScriptLoader,PluginManager:ba,ThemeManager:pi,ModelManager:ha,IconManager:zd,Resource:IR,FakeClipboard:PR,trim:Q.trim,isArray:Q.isArray,is:Q.is,toArray:Q.toArray,makeMap:Q.makeMap,each:Q.each,map:Q.map,grep:Q.grep,inArray:Q.inArray,extend:Q.extend,walk:Q.walk,resolve:Q.resolve,explode:Q.explode,_addCacheSuffix:Q._addCacheSuffix},Ux=Q.extend(vs,FR);(t=>{window.tinymce=t,window.tinyMCE=t})(Ux),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(Ux)}();